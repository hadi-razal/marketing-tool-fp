[{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\CompanyCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":2,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":75},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":54,"column":29,"nodeType":"JSXOpeningElement","endLine":54,"endColumn":115}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Building2, MapPin, Users, Globe, ArrowRight, CheckCircle2, Trash2, Calendar, MessageSquare } from 'lucide-react';\r\nimport { getBrandColor } from '@/lib/utils';\r\nimport { Comment } from '@/services/databaseService';\r\n\r\nexport interface Company {\r\n    id: string;\r\n    name: string;\r\n    website?: string;\r\n    logo?: string;\r\n    industry?: string;\r\n    location?: string;\r\n    employees?: number;\r\n    revenue?: string;\r\n    description?: string;\r\n    linkedin?: string;\r\n    twitter?: string;\r\n    facebook?: string;\r\n    keywords?: string[];\r\n    phone?: string;\r\n    founded_year?: number;\r\n    isSaved?: boolean;\r\n    saved_by?: string;\r\n    comments?: Comment[];\r\n}\r\n\r\ninterface CompanyCardProps {\r\n    company: Company;\r\n    onClick?: () => void;\r\n    onAction?: () => void;\r\n    actionIcon?: React.ElementType;\r\n}\r\n\r\nexport const CompanyCard: React.FC<CompanyCardProps> = ({ company, onClick, onAction, actionIcon: ActionIcon }) => {\r\n    const brandColor = getBrandColor(company.name);\r\n\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"group relative bg-zinc-900/50 backdrop-blur-md border border-white/5 p-5 rounded-2xl transition-all duration-300 hover:bg-zinc-900/80 hover:border-white/10 hover:shadow-2xl hover:shadow-black/50 cursor-pointer flex flex-col h-full overflow-hidden\"\r\n        >\r\n            {/* Top Gradient Line */}\r\n            <div\r\n                className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[var(--brand-color)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\"\r\n                style={{ '--brand-color': brandColor } as React.CSSProperties}\r\n            />\r\n\r\n            {/* Header Section */}\r\n            <div className=\"flex justify-between items-start mb-4 relative z-10\">\r\n                <div className=\"flex gap-4\">\r\n                    {/* Logo */}\r\n                    <div className=\"relative w-12 h-12 rounded-xl bg-white/5 border border-white/10 p-2 flex items-center justify-center overflow-hidden transition-transform duration-300 group-hover:scale-105 group-hover:border-white/20\">\r\n                        {company.logo ? (\r\n                            <img src={company.logo} alt={company.name} className=\"w-full h-full object-contain\" />\r\n                        ) : (\r\n                            <Building2 className=\"w-6 h-6 text-zinc-500\" />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Name & Industry */}\r\n                    <div>\r\n                        <h3 className=\"text-white font-bold text-lg leading-tight tracking-tight group-hover:text-white/90 transition-colors\">\r\n                            {company.name}\r\n                        </h3>\r\n                        {company.industry && (\r\n                            <div className=\"mt-1\">\r\n                                <span className=\"inline-flex items-center px-2 py-0.5 rounded-md bg-white/5 border border-white/5 text-[10px] font-medium text-zinc-400\">\r\n                                    {company.industry}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex gap-2\">\r\n                    {company.isSaved && (\r\n                        <div className=\"w-8 h-8 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-emerald-500\" title=\"Saved\">\r\n                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                        </div>\r\n                    )}\r\n                    {onAction && ActionIcon && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); onAction(); }}\r\n                            className=\"w-8 h-8 rounded-lg bg-white/5 hover:bg-red-500/10 border border-white/5 hover:border-red-500/20 flex items-center justify-center text-zinc-400 hover:text-red-500 transition-all\"\r\n                        >\r\n                            <ActionIcon className=\"w-4 h-4\" />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <p className=\"text-zinc-400 text-xs leading-relaxed line-clamp-2 mb-5 min-h-[2.5em]\">\r\n                {company.description || 'No description available for this company.'}\r\n            </p>\r\n\r\n            {/* Metadata Tags */}\r\n            <div className=\"flex flex-wrap gap-2 mt-auto mb-5\">\r\n                {company.location && (\r\n                    <div className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/5 border border-white/5 text-[10px] text-zinc-300 font-medium\">\r\n                        <MapPin className=\"w-3 h-3 text-zinc-500\" />\r\n                        <span className=\"truncate max-w-[100px]\">{company.location}</span>\r\n                    </div>\r\n                )}\r\n                {company.employees && (\r\n                    <div className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/5 border border-white/5 text-[10px] text-zinc-300 font-medium\">\r\n                        <Users className=\"w-3 h-3 text-zinc-500\" />\r\n                        <span>{company.employees.toLocaleString()}</span>\r\n                    </div>\r\n                )}\r\n                {company.website && (\r\n                    <a\r\n                        href={company.website}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        className=\"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/5 border border-white/5 text-[10px] text-zinc-300 font-medium hover:bg-white/10 hover:text-white transition-colors\"\r\n                    >\r\n                        <Globe className=\"w-3 h-3 text-zinc-500\" />\r\n                        <span>Website</span>\r\n                    </a>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"pt-4 border-t border-white/5 flex items-center justify-between mt-auto\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    {company.founded_year && (\r\n                        <div className=\"flex items-center gap-1.5 text-[10px] text-zinc-500 font-medium\">\r\n                            <Calendar className=\"w-3 h-3\" />\r\n                            <span>{company.founded_year}</span>\r\n                        </div>\r\n                    )}\r\n                    {company.comments && company.comments.length > 0 && (\r\n                        <div className=\"flex items-center gap-1.5 text-[10px] text-zinc-500 font-medium\">\r\n                            <MessageSquare className=\"w-3 h-3\" />\r\n                            <span>{company.comments.length}</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-1 text-[10px] font-bold text-zinc-500 group-hover:text-white transition-colors\">\r\n                    View Details\r\n                    <ArrowRight className=\"w-3 h-3 transition-transform group-hover:translate-x-0.5\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\CompanyCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\CompanyDetailsModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":47,"column":13,"nodeType":"JSXOpeningElement","endLine":52,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3006,3009],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3006,3009],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'company.comments'. Either include it or remove the dependency array. If 'setLocalComments' needs the current value of 'company.comments', you can also switch to useReducer instead of useState and read 'company.comments' in the reducer.","line":116,"column":8,"nodeType":"ArrayExpression","endLine":116,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [company.comments, company.id, company.isSaved]","fix":{"range":[4524,4555],"text":"[company.comments, company.id, company.isSaved]"}}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":253,"column":41,"nodeType":"JSXOpeningElement","endLine":253,"endColumn":127},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12943,12946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12943,12946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":287,"column":57,"nodeType":"JSXOpeningElement","endLine":287,"endColumn":170},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":287,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13183,13186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13183,13186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":497,"column":85,"nodeType":"JSXOpeningElement","endLine":497,"endColumn":183},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":573,"column":109,"nodeType":"JSXOpeningElement","endLine":573,"endColumn":203},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":633,"column":73,"nodeType":"JSXOpeningElement","endLine":633,"endColumn":177}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { X, Globe, Linkedin, Twitter, Facebook, MapPin, Users, Calendar, DollarSign, Phone, Building2, ExternalLink, Save, CheckCircle2, Loader2, Trash2, Send, ChevronDown, ChevronUp, MessageSquare } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Company } from './CompanyCard';\r\nimport { formatDistanceToNow, format, isBefore, subHours } from 'date-fns';\r\n\r\nimport { getBrandColor } from '@/lib/utils';\r\nimport { databaseService, Comment } from '@/services/databaseService';\r\nimport { createClient } from '@/lib/supabase';\r\n\r\ninterface CompanyDetailsModalProps {\r\n    company: Company | null;\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSave?: (company: Company) => Promise<void>; // Async save handler\r\n}\r\n\r\n// Helper for date formatting\r\nconst formatCommentDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '';\r\n\r\n    const now = new Date();\r\n    // If older than 24 hours, show absolute date\r\n    if (isBefore(date, subHours(now, 24))) {\r\n        return format(date, 'MMM d, yyyy h:mm a');\r\n    }\r\n\r\n    // Custom \"Just now\" for very recent\r\n    const diffInSeconds = (now.getTime() - date.getTime()) / 1000;\r\n    if (diffInSeconds < 60) {\r\n        return 'Just now';\r\n    }\r\n\r\n    return formatDistanceToNow(date, { addSuffix: true });\r\n};\r\n\r\nconst Avatar = ({ src, alt, name, className }: { src?: string, alt: string, name: string, className?: string }) => {\r\n    const [imageError, setImageError] = useState(false);\r\n\r\n    // Ignore backend-provided ui-avatars URLs to ensure consistent styling\r\n    const isUiAvatar = src?.includes('ui-avatars.com');\r\n    const hasValidImage = src && !isUiAvatar && !imageError;\r\n\r\n    if (hasValidImage) {\r\n        return (\r\n            <img\r\n                src={src}\r\n                alt={alt}\r\n                className={className}\r\n                onError={() => setImageError(true)}\r\n            />\r\n        );\r\n    }\r\n\r\n    const initials = name\r\n        ? name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase()\r\n        : 'U';\r\n\r\n    return (\r\n        <div className={`${className} flex items-center justify-center bg-orange-500 text-white font-bold`}>\r\n            {initials}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const CompanyDetailsModal: React.FC<CompanyDetailsModalProps> = ({ company, isOpen, onClose, onSave }) => {\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [showAllKeywords, setShowAllKeywords] = useState(false);\r\n    const [localComments, setLocalComments] = useState<Comment[]>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [isPostingComment, setIsPostingComment] = useState(false);\r\n    const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n    const [activeTab, setActiveTab] = useState<'overview' | 'comments' | 'people'>('overview');\r\n    const [companyPeople, setCompanyPeople] = useState<any[]>([]);\r\n    const [isLoadingPeople, setIsLoadingPeople] = useState(false);\r\n    const [replyingTo, setReplyingTo] = useState<{ id: string, userName: string, text: string, userProfileUrl?: string } | null>(null);\r\n    const [expandedComments, setExpandedComments] = useState<Set<string>>(new Set());\r\n    const commentsEndRef = React.useRef<HTMLDivElement>(null);\r\n\r\n    const scrollToBottom = () => {\r\n        commentsEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const supabase = createClient();\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                setCurrentUserId(user.id);\r\n            }\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Reset comments when company changes\r\n        setLocalComments([]);\r\n        setReplyingTo(null);\r\n        setExpandedComments(new Set());\r\n\r\n        const fetchComments = async () => {\r\n            if (company?.id && company.isSaved) {\r\n                try {\r\n                    const comments = await databaseService.getComments(company.id);\r\n                    setLocalComments(comments);\r\n                } catch (error) {\r\n                    console.error('Failed to fetch comments:', error);\r\n                }\r\n            } else if (company?.comments) {\r\n                setLocalComments(company.comments);\r\n            }\r\n        };\r\n\r\n        fetchComments();\r\n    }, [company?.id, company?.isSaved]);\r\n\r\n    useEffect(() => {\r\n        const fetchPeople = async () => {\r\n            if (activeTab === 'people' && company?.id) {\r\n                setIsLoadingPeople(true);\r\n                try {\r\n                    const people = await databaseService.getPeopleByCompany(company.id);\r\n                    setCompanyPeople(people);\r\n                } catch (error) {\r\n                    console.error('Failed to fetch people:', error);\r\n                } finally {\r\n                    setIsLoadingPeople(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        fetchPeople();\r\n    }, [activeTab, company?.id]);\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'comments') {\r\n            // Small timeout to ensure DOM is ready\r\n            setTimeout(scrollToBottom, 100);\r\n        }\r\n    }, [activeTab, localComments.length]);\r\n\r\n    if (!company) return null;\r\n\r\n    const brandColor = getBrandColor(company.name);\r\n\r\n    const handleSave = async () => {\r\n        if (onSave && !company.isSaved) {\r\n            setIsSaving(true);\r\n            await onSave(company);\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId: string) => {\r\n        if (!confirm('Are you sure you want to delete this comment?')) return;\r\n\r\n        try {\r\n            const updatedComments = await databaseService.deleteComment(company.id, commentId);\r\n            setLocalComments(updatedComments);\r\n        } catch (error) {\r\n            console.error('Failed to delete comment:', error);\r\n            alert('Failed to delete comment. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handleDeleteReply = async (commentId: string, replyId: string) => {\r\n        if (!confirm('Are you sure you want to delete this reply?')) return;\r\n\r\n        try {\r\n            const updatedComments = await databaseService.deleteReply(company.id, commentId, replyId);\r\n            setLocalComments(updatedComments);\r\n        } catch (error) {\r\n            console.error('Failed to delete reply:', error);\r\n            alert('Failed to delete reply. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handlePostComment = async () => {\r\n        if (!newComment.trim()) return;\r\n\r\n        setIsPostingComment(true);\r\n        try {\r\n            let updatedComments;\r\n            if (replyingTo) {\r\n                updatedComments = await databaseService.addReply(company.id, replyingTo.id, newComment.trim());\r\n                // Automatically expand the comment we just replied to\r\n                setExpandedComments(prev => new Set(prev).add(replyingTo.id));\r\n                setReplyingTo(null);\r\n            } else {\r\n                updatedComments = await databaseService.addComment(company.id, newComment.trim());\r\n                // Scroll to bottom for new main comments\r\n                setTimeout(scrollToBottom, 100);\r\n            }\r\n            setLocalComments(updatedComments);\r\n            setNewComment('');\r\n        } catch (error) {\r\n            console.error('Failed to post comment/reply:', error);\r\n            alert('Failed to post. Please try again.');\r\n        } finally {\r\n            setIsPostingComment(false);\r\n        }\r\n    };\r\n\r\n    const toggleReplies = (commentId: string) => {\r\n        setExpandedComments(prev => {\r\n            const next = new Set(prev);\r\n            if (next.has(commentId)) {\r\n                next.delete(commentId);\r\n            } else {\r\n                next.add(commentId);\r\n            }\r\n            return next;\r\n        });\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed inset-0 m-auto w-full max-w-4xl h-[90vh] bg-[#09090b] border border-white/10 rounded-3xl shadow-2xl z-50 overflow-hidden flex flex-col\"\r\n                    >\r\n                        {/* Hero Header */}\r\n                        <div\r\n                            className=\"relative h-64 border-b border-white/5 shrink-0 transition-colors duration-700\"\r\n                            style={{ background: `linear-gradient(135deg, #09090b 0%, #000000 40%, ${brandColor}40 100%)` }}\r\n                        >\r\n                            <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\" />\r\n\r\n                            {/* Close Button */}\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"absolute top-6 right-6 p-2 bg-black/50 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors border border-white/5 backdrop-blur-md z-20\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n\r\n                            {/* Content Container */}\r\n                            <div className=\"absolute bottom-0 left-0 w-full p-8 flex items-end gap-8 bg-gradient-to-t from-[#09090b] to-transparent\">\r\n                                <div className=\"w-32 h-32 rounded-2xl bg-white p-3 border-4 border-[#09090b] shadow-2xl flex items-center justify-center overflow-hidden shrink-0 relative z-10\">\r\n                                    {company.logo ? (\r\n                                        <img src={company.logo} alt={company.name} className=\"w-full h-full object-contain\" />\r\n                                    ) : (\r\n                                        <Building2 className=\"w-16 h-16 text-zinc-400\" />\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"mb-2 flex-1\">\r\n                                    <div className=\"flex items-center gap-4 mb-2\">\r\n                                        <h2 className=\"text-4xl font-bold text-white tracking-tight\">{company.name}</h2>\r\n                                        {/* {company.isSaved && (\r\n                                            <span className=\"bg-green-500/10 border border-green-500/20 text-green-500 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1.5\">\r\n                                                <CheckCircle2 className=\"w-3.5 h-3.5\" /> Saved\r\n                                            </span>\r\n                                        )} */}\r\n                                    </div>\r\n                                    <div className=\"flex flex-wrap items-center gap-4 text-sm\">\r\n                                        {company.industry && (\r\n                                            <span className=\"px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 font-medium\">\r\n                                                {company.industry}\r\n                                            </span>\r\n                                        )}\r\n                                        {company.location && (\r\n                                            <span className=\"flex items-center gap-1.5 text-zinc-400\">\r\n                                                <MapPin className=\"w-4 h-4 text-zinc-500\" /> {company.location}\r\n                                            </span>\r\n                                        )}\r\n                                        {company.founded_year && (\r\n                                            <span className=\"flex items-center gap-1.5 text-zinc-400\">\r\n                                                <Calendar className=\"w-4 h-4 text-zinc-500\" /> Est. {company.founded_year}\r\n                                            </span>\r\n                                        )}\r\n                                        {company.saved_by && (\r\n                                            <span className=\"flex items-center gap-1.5 text-zinc-500\">\r\n                                                {(company as any).saved_by_profile_url ? (\r\n                                                    <div className=\"w-4 h-4 rounded-full overflow-hidden border border-zinc-700\">\r\n                                                        <img src={(company as any).saved_by_profile_url} alt={company.saved_by} className=\"w-full h-full object-cover\" />\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"w-1 h-1 rounded-full bg-zinc-600\" />\r\n                                                )}\r\n                                                Saved by {company.saved_by}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Save Button */}\r\n                                {onSave && (\r\n                                    <button\r\n                                        onClick={handleSave}\r\n                                        disabled={company.isSaved || isSaving}\r\n                                        className={`px-6 py-3 rounded-xl font-bold text-sm flex items-center gap-2 transition-all shadow-lg mb-2 ${company.isSaved\r\n                                            ? 'bg-zinc-800 text-zinc-500 cursor-default border border-white/5'\r\n                                            : 'bg-white hover:bg-zinc-200 text-black shadow-white/10 active:scale-95'\r\n                                            }`}\r\n                                    >\r\n                                        {isSaving ? (\r\n                                            <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                        ) : company.isSaved ? (\r\n                                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                                        ) : (\r\n                                            <Save className=\"w-4 h-4\" />\r\n                                        )}\r\n                                        {isSaving ? 'Saving...' : company.isSaved ? 'Saved to Database' : 'Save Company'}\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Tab Navigation */}\r\n                        <div className=\"px-8 pt-6 bg-[#09090b]\">\r\n                            <div className=\"flex items-center gap-6 border-b border-white/5\">\r\n                                <button\r\n                                    onClick={() => setActiveTab('overview')}\r\n                                    className={`pb-4 text-sm font-bold transition-all relative ${activeTab === 'overview' ? 'text-white' : 'text-zinc-500 hover:text-zinc-300'}`}\r\n                                >\r\n                                    Overview\r\n                                    {activeTab === 'overview' && (\r\n                                        <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-white rounded-full\" />\r\n                                    )}\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveTab('comments')}\r\n                                    className={`pb-4 text-sm font-bold transition-all relative ${activeTab === 'comments' ? 'text-white' : 'text-zinc-500 hover:text-zinc-300'}`}\r\n                                >\r\n                                    Comments\r\n                                    {localComments.length > 0 && (\r\n                                        <span className=\"ml-2 px-1.5 py-0.5 rounded-full bg-white/10 text-[10px] text-zinc-400\">\r\n                                            {localComments.length}\r\n                                        </span>\r\n                                    )}\r\n                                    {activeTab === 'comments' && (\r\n                                        <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-white rounded-full\" />\r\n                                    )}\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveTab('people')}\r\n                                    className={`pb-4 text-sm font-bold transition-all relative ${activeTab === 'people' ? 'text-white' : 'text-zinc-500 hover:text-zinc-300'}`}\r\n                                >\r\n                                    People\r\n                                    {activeTab === 'people' && (\r\n                                        <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-white rounded-full\" />\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Content Area */}\r\n                        <div className=\"flex-1 min-h-0 bg-[#09090b] flex flex-col relative\">\r\n                            <AnimatePresence mode=\"wait\">\r\n                                {activeTab === 'overview' ? (\r\n                                    <motion.div\r\n                                        key=\"overview\"\r\n                                        initial={{ opacity: 0, x: -20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        exit={{ opacity: 0, x: 20 }}\r\n                                        transition={{ duration: 0.2 }}\r\n                                        className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\"\r\n                                    >\r\n                                        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                                            {/* Main Info Column */}\r\n                                            <div className=\"lg:col-span-2 space-y-10\">\r\n                                                <section>\r\n                                                    <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4 flex items-center gap-2\">\r\n                                                        <span className=\"w-8 h-[1px] bg-zinc-800\"></span> About\r\n                                                    </h3>\r\n                                                    <p className=\"text-zinc-300 leading-relaxed text-base\">\r\n                                                        {company.description || 'No description available for this company.'}\r\n                                                    </p>\r\n                                                </section>\r\n\r\n                                                {company.keywords && company.keywords.length > 0 && (\r\n                                                    <section>\r\n                                                        <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4 flex items-center gap-2\">\r\n                                                            <span className=\"w-8 h-[1px] bg-zinc-800\"></span> Keywords\r\n                                                        </h3>\r\n                                                        <div className=\"flex flex-wrap gap-2\">\r\n                                                            {company.keywords.slice(0, showAllKeywords ? undefined : 8).map((keyword, idx) => (\r\n                                                                <span key={idx} className=\"px-3 py-1.5 rounded-lg bg-white/5 border border-white/5 text-zinc-400 text-sm hover:bg-white/10 transition-colors cursor-default\">\r\n                                                                    {keyword}\r\n                                                                </span>\r\n                                                            ))}\r\n                                                            {company.keywords.length > 8 && (\r\n                                                                <button\r\n                                                                    onClick={() => setShowAllKeywords(!showAllKeywords)}\r\n                                                                    className=\"px-3 py-1.5 rounded-lg bg-zinc-800/50 border border-zinc-700/50 text-zinc-400 text-sm hover:bg-zinc-800 hover:text-white transition-colors\"\r\n                                                                >\r\n                                                                    {showAllKeywords ? 'Show Less' : `+${company.keywords.length - 8} more`}\r\n                                                                </button>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </section>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            {/* Sidebar Info Column */}\r\n                                            <div className=\"space-y-6\">\r\n                                                <div className=\"bg-zinc-900/50 rounded-2xl p-6 border border-white/5 space-y-5\">\r\n                                                    <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Company Details</h3>\r\n\r\n                                                    {company.website && (\r\n                                                        <a href={company.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-3 text-sm text-zinc-300 hover:text-blue-400 transition-colors group p-2 hover:bg-white/5 rounded-lg -mx-2\">\r\n                                                            <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5 group-hover:border-blue-500/30 transition-colors\">\r\n                                                                <Globe className=\"w-4 h-4 text-zinc-500 group-hover:text-blue-400\" />\r\n                                                            </div>\r\n                                                            <span className=\"truncate flex-1\">Website</span>\r\n                                                            <ExternalLink className=\"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                                                        </a>\r\n                                                    )}\r\n\r\n                                                    {company.employees && (\r\n                                                        <div className=\"flex items-center gap-3 text-sm text-zinc-300 p-2 -mx-2\">\r\n                                                            <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                                                <Users className=\"w-4 h-4 text-zinc-500\" />\r\n                                                            </div>\r\n                                                            <span>{company.employees.toLocaleString()} Employees</span>\r\n                                                        </div>\r\n                                                    )}\r\n\r\n                                                    {company.revenue && (\r\n                                                        <div className=\"flex items-center gap-3 text-sm text-zinc-300 p-2 -mx-2\">\r\n                                                            <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                                                <DollarSign className=\"w-4 h-4 text-zinc-500\" />\r\n                                                            </div>\r\n                                                            <span>{company.revenue} Revenue</span>\r\n                                                        </div>\r\n                                                    )}\r\n\r\n                                                    {company.phone && (\r\n                                                        <div className=\"flex items-center gap-3 text-sm text-zinc-300 p-2 -mx-2\">\r\n                                                            <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                                                <Phone className=\"w-4 h-4 text-zinc-500\" />\r\n                                                            </div>\r\n                                                            <span>{company.phone}</span>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                <div className=\"bg-zinc-900/50 rounded-2xl p-6 border border-white/5\">\r\n                                                    <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4\">Social Profiles</h3>\r\n                                                    <div className=\"flex gap-3\">\r\n                                                        {company.linkedin && (\r\n                                                            <a href={company.linkedin} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-10 h-10 rounded-xl bg-[#0077b5]/10 border border-[#0077b5]/20 flex items-center justify-center text-[#0077b5] hover:bg-[#0077b5] hover:text-white transition-all duration-300\">\r\n                                                                <Linkedin className=\"w-5 h-5\" />\r\n                                                            </a>\r\n                                                        )}\r\n                                                        {company.twitter && (\r\n                                                            <a href={company.twitter} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-10 h-10 rounded-xl bg-[#1da1f2]/10 border border-[#1da1f2]/20 flex items-center justify-center text-[#1da1f2] hover:bg-[#1da1f2] hover:text-white transition-all duration-300\">\r\n                                                                <Twitter className=\"w-5 h-5\" />\r\n                                                            </a>\r\n                                                        )}\r\n                                                        {company.facebook && (\r\n                                                            <a href={company.facebook} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-10 h-10 rounded-xl bg-[#1877f2]/10 border border-[#1877f2]/20 flex items-center justify-center text-[#1877f2] hover:bg-[#1877f2] hover:text-white transition-all duration-300\">\r\n                                                                <Facebook className=\"w-5 h-5\" />\r\n                                                            </a>\r\n                                                        )}\r\n                                                        {!company.linkedin && !company.twitter && !company.facebook && (\r\n                                                            <span className=\"text-zinc-500 text-sm italic\">No social profiles found.</span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ) : activeTab === 'comments' ? (\r\n                                    <motion.div\r\n                                        key=\"comments\"\r\n                                        initial={{ opacity: 0, x: 20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        exit={{ opacity: 0, x: -20 }}\r\n                                        transition={{ duration: 0.2 }}\r\n                                        className=\"flex-1 flex flex-col min-h-0\"\r\n                                    >\r\n                                        {/* Comments List */}\r\n                                        <div className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\">\r\n                                            <div className=\"max-w-3xl mx-auto space-y-8\">\r\n                                                {localComments.length > 0 ? (\r\n                                                    <>\r\n                                                        {localComments.map((comment) => (\r\n                                                            <div key={comment.id} className=\"group relative\">\r\n                                                                <div className=\"pl-4 border-l-2 border-white/5 hover:border-white/10 transition-colors\">\r\n                                                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                                                        <div className=\"flex items-center gap-3\">\r\n                                                                            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center text-xs font-bold text-white shadow-inner overflow-hidden\">\r\n                                                                                {comment.userProfileUrl ? (\r\n                                                                                    <img src={comment.userProfileUrl} alt={comment.userName} className=\"w-full h-full object-cover\" />\r\n                                                                                ) : (\r\n                                                                                    comment.userName.substring(0, 2).toUpperCase()\r\n                                                                                )}\r\n                                                                            </div>\r\n                                                                            <div>\r\n                                                                                <span className=\"block text-sm font-bold text-white leading-none mb-1\">{comment.userName}</span>\r\n                                                                                <span className=\"text-[10px] text-zinc-500 font-medium\">\r\n                                                                                    {formatCommentDate(comment.createdAt)}\r\n                                                                                </span>\r\n                                                                            </div>\r\n                                                                        </div>\r\n\r\n                                                                        <div className=\"flex items-center gap-2\">\r\n                                                                            <button\r\n                                                                                onClick={() => setReplyingTo({ id: comment.id, userName: comment.userName, text: comment.text, userProfileUrl: comment.userProfileUrl })}\r\n                                                                                className=\"text-xs text-zinc-500 hover:text-white transition-colors opacity-0 group-hover:opacity-100\"\r\n                                                                            >\r\n                                                                                Reply\r\n                                                                            </button>\r\n                                                                            {(currentUserId === comment.uid) && (\r\n                                                                                <button\r\n                                                                                    onClick={(e) => {\r\n                                                                                        e.stopPropagation();\r\n                                                                                        handleDeleteComment(comment.id);\r\n                                                                                    }}\r\n                                                                                    className=\"p-1.5 rounded-lg text-zinc-600 hover:text-red-400 hover:bg-red-400/10 transition-all\"\r\n                                                                                    title=\"Delete comment\"\r\n                                                                                >\r\n                                                                                    <Trash2 className=\"w-3.5 h-3.5\" />\r\n                                                                                </button>\r\n                                                                            )}\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <p className=\"text-sm text-zinc-300 leading-relaxed pl-11\">\r\n                                                                        {comment.text}\r\n                                                                    </p>\r\n                                                                </div>\r\n\r\n                                                                {/* Replies Section */}\r\n                                                                {comment.replies && comment.replies.length > 0 && (\r\n                                                                    <div className=\"mt-2 ml-11\">\r\n                                                                        {/* Toggle Button */}\r\n                                                                        <button\r\n                                                                            onClick={() => toggleReplies(comment.id)}\r\n                                                                            className=\"flex items-center gap-2 text-xs font-bold text-zinc-500 hover:text-white transition-colors mb-2\"\r\n                                                                        >\r\n                                                                            <div className=\"w-6 h-[1px] bg-zinc-800\"></div>\r\n                                                                            {expandedComments.has(comment.id) ? (\r\n                                                                                <>\r\n                                                                                    <ChevronUp className=\"w-3 h-3\" />\r\n                                                                                    Hide {comment.replies.length} replies\r\n                                                                                </>\r\n                                                                            ) : (\r\n                                                                                <>\r\n                                                                                    <ChevronDown className=\"w-3 h-3\" />\r\n                                                                                    View {comment.replies.length} replies\r\n                                                                                </>\r\n                                                                            )}\r\n                                                                        </button>\r\n\r\n                                                                        {/* Replies List */}\r\n                                                                        <AnimatePresence>\r\n                                                                            {expandedComments.has(comment.id) && (\r\n                                                                                <motion.div\r\n                                                                                    initial={{ opacity: 0, height: 0 }}\r\n                                                                                    animate={{ opacity: 1, height: 'auto' }}\r\n                                                                                    exit={{ opacity: 0, height: 0 }}\r\n                                                                                    className=\"space-y-4 overflow-hidden\"\r\n                                                                                >\r\n                                                                                    {comment.replies.map((reply) => (\r\n                                                                                        <div key={reply.id} className=\"relative pl-4 border-l-2 border-white/5 hover:border-white/10 transition-colors group/reply\">\r\n                                                                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                                                                <div className=\"flex items-center gap-3\">\r\n                                                                                                    <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center text-[10px] font-bold text-white shadow-inner overflow-hidden\">\r\n                                                                                                        {reply.userProfileUrl ? (\r\n                                                                                                            <img src={reply.userProfileUrl} alt={reply.userName} className=\"w-full h-full object-cover\" />\r\n                                                                                                        ) : (\r\n                                                                                                            reply.userName.substring(0, 2).toUpperCase()\r\n                                                                                                        )}\r\n                                                                                                    </div>\r\n                                                                                                    <div>\r\n                                                                                                        <span className=\"block text-xs font-bold text-white leading-none mb-1\">{reply.userName}</span>\r\n                                                                                                        <span className=\"text-[10px] text-zinc-500 font-medium\">\r\n                                                                                                            {formatCommentDate(reply.createdAt)}\r\n                                                                                                        </span>\r\n                                                                                                    </div>\r\n                                                                                                </div>\r\n\r\n                                                                                                {(currentUserId === reply.uid) && (\r\n                                                                                                    <button\r\n                                                                                                        onClick={(e) => {\r\n                                                                                                            e.stopPropagation();\r\n                                                                                                            handleDeleteReply(comment.id, reply.id);\r\n                                                                                                        }}\r\n                                                                                                        className=\"p-1.5 rounded-lg text-zinc-600 hover:text-red-400 hover:bg-red-400/10 transition-all\"\r\n                                                                                                        title=\"Delete reply\"\r\n                                                                                                    >\r\n                                                                                                        <Trash2 className=\"w-3 h-3\" />\r\n                                                                                                    </button>\r\n                                                                                                )}\r\n                                                                                            </div>\r\n                                                                                            <p className=\"text-sm text-zinc-300 leading-relaxed pl-9\">\r\n                                                                                                {reply.text}\r\n                                                                                            </p>\r\n                                                                                        </div>\r\n                                                                                    ))}\r\n                                                                                </motion.div>\r\n                                                                            )}\r\n                                                                        </AnimatePresence>\r\n                                                                    </div>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        ))}\r\n                                                        <div ref={commentsEndRef} />\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <div className=\"text-center py-12\">\r\n                                                        <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-3\">\r\n                                                            <MessageSquare className=\"w-5 h-5 text-zinc-600\" />\r\n                                                        </div>\r\n                                                        <p className=\"text-sm text-zinc-500\">No comments yet. Start the conversation!</p>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Fixed Input Area */}\r\n                                        {company.isSaved && (\r\n                                            <div className=\"p-4 border-t border-white/5 bg-[#09090b] z-10\">\r\n                                                <div className=\"max-w-3xl mx-auto flex flex-col gap-3\">\r\n                                                    {replyingTo && (\r\n                                                        <div className=\"flex items-center justify-between bg-zinc-900/50 border border-white/5 rounded-xl p-2 px-3 mb-1\">\r\n                                                            <div className=\"flex items-center gap-3 overflow-hidden\">\r\n                                                                <div className=\"w-6 h-6 rounded-full bg-white/5 flex items-center justify-center shrink-0 overflow-hidden\">\r\n                                                                    {replyingTo.userProfileUrl ? (\r\n                                                                        <img src={replyingTo.userProfileUrl} alt={replyingTo.userName} className=\"w-full h-full object-cover\" />\r\n                                                                    ) : (\r\n                                                                        <span className=\"text-[10px] font-bold text-zinc-400\">{replyingTo.userName.substring(0, 2).toUpperCase()}</span>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                                <div className=\"flex flex-col min-w-0\">\r\n                                                                    <span className=\"text-[10px] font-bold text-zinc-400\">Replying to {replyingTo.userName}</span>\r\n                                                                    <span className=\"text-[10px] text-zinc-600 truncate max-w-[300px]\">{replyingTo.text}</span>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <button\r\n                                                                onClick={() => setReplyingTo(null)}\r\n                                                                className=\"p-1 rounded-lg hover:bg-white/10 text-zinc-500 hover:text-white transition-colors\"\r\n                                                            >\r\n                                                                <X className=\"w-3 h-3\" />\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )}\r\n\r\n                                                    <div\r\n                                                        className=\"flex items-end gap-2 bg-zinc-900/50 border border-white/10 rounded-xl p-2 focus-within:border-[var(--brand-color)]/50 focus-within:ring-1 focus-within:ring-[var(--brand-color)]/50 transition-all\"\r\n                                                        style={{ '--brand-color': brandColor } as React.CSSProperties}\r\n                                                    >\r\n                                                        <textarea\r\n                                                            placeholder={replyingTo ? `Reply to ${replyingTo.userName}...` : \"Add a note...\"}\r\n                                                            value={newComment}\r\n                                                            onChange={(e) => setNewComment(e.target.value)}\r\n                                                            className=\"flex-1 bg-transparent border-none focus:ring-0 p-2 text-sm text-white placeholder:text-zinc-600 resize-none min-h-[24px] max-h-[120px] leading-relaxed custom-scrollbar\"\r\n                                                            rows={1}\r\n                                                            style={{ minHeight: '24px' }}\r\n                                                            onInput={(e) => {\r\n                                                                const target = e.target as HTMLTextAreaElement;\r\n                                                                target.style.height = 'auto';\r\n                                                                target.style.height = `${Math.min(target.scrollHeight, 120)}px`;\r\n                                                            }}\r\n                                                            onKeyDown={(e) => {\r\n                                                                if (e.key === 'Enter' && !e.shiftKey) {\r\n                                                                    e.preventDefault();\r\n                                                                    handlePostComment();\r\n                                                                }\r\n                                                            }}\r\n                                                        />\r\n                                                        <button\r\n                                                            onClick={handlePostComment}\r\n                                                            disabled={!newComment.trim() || isPostingComment}\r\n                                                            className=\"shrink-0 bg-white hover:bg-zinc-200 text-black px-4 py-2 rounded-lg text-xs font-bold transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-white/5 h-[36px]\"\r\n                                                        >\r\n                                                            {isPostingComment ? (\r\n                                                                <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                                            ) : (\r\n                                                                <Send className=\"w-3 h-3\" />\r\n                                                            )}\r\n                                                            Post\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </motion.div>\r\n                                ) : (\r\n                                    <motion.div\r\n                                        key=\"people\"\r\n                                        initial={{ opacity: 0, x: 20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        exit={{ opacity: 0, x: -20 }}\r\n                                        transition={{ duration: 0.2 }}\r\n                                        className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\"\r\n                                    >\r\n                                        {isLoadingPeople ? (\r\n                                            <div className=\"flex items-center justify-center h-40\">\r\n                                                <Loader2 className=\"w-8 h-8 text-zinc-500 animate-spin\" />\r\n                                            </div>\r\n                                        ) : companyPeople.length > 0 ? (\r\n                                            <div className=\"overflow-hidden rounded-xl border border-white/5 bg-zinc-900/30\">\r\n                                                <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                                                    <thead className=\"bg-white/5 text-xs uppercase font-bold text-zinc-500\">\r\n                                                        <tr>\r\n                                                            <th className=\"px-6 py-4\">Name</th>\r\n                                                            <th className=\"px-6 py-4\">Title</th>\r\n                                                            <th className=\"px-6 py-4\">Location</th>\r\n                                                            <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody className=\"divide-y divide-white/5\">\r\n                                                        {companyPeople.map((person) => (\r\n                                                            <tr key={person.id} className=\"hover:bg-white/5 transition-colors\">\r\n                                                                <td className=\"px-6 py-4\">\r\n                                                                    <div className=\"flex items-center gap-3\">\r\n                                                                        <Avatar\r\n                                                                            src={person.image || person.photo_url}\r\n                                                                            alt={person.name}\r\n                                                                            name={person.name}\r\n                                                                            className=\"w-8 h-8 rounded-full object-cover text-xs\"\r\n                                                                        />\r\n                                                                        <div>\r\n                                                                            <div className=\"font-medium text-white\">{person.name}</div>\r\n                                                                            <div className=\"text-xs text-zinc-500\">{person.email}</div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                                <td className=\"px-6 py-4 max-w-[200px] truncate\" title={person.title}>\r\n                                                                    {person.title || 'N/A'}\r\n                                                                </td>\r\n                                                                <td className=\"px-6 py-4\">\r\n                                                                    {person.location || person.city || 'N/A'}\r\n                                                                </td>\r\n                                                                <td className=\"px-6 py-4 text-right\">\r\n                                                                    <div className=\"flex justify-end gap-2\">\r\n                                                                        {person.linkedin && (\r\n                                                                            <a\r\n                                                                                href={person.linkedin.startsWith('http') ? person.linkedin : `https://${person.linkedin}`}\r\n                                                                                target=\"_blank\"\r\n                                                                                rel=\"noopener noreferrer\"\r\n                                                                                className=\"p-1.5 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500 hover:text-white transition-colors\"\r\n                                                                            >\r\n                                                                                <Linkedin className=\"w-3.5 h-3.5\" />\r\n                                                                            </a>\r\n                                                                        )}\r\n                                                                        {person.email && (\r\n                                                                            <a\r\n                                                                                href={`mailto:${person.email}`}\r\n                                                                                className=\"p-1.5 rounded-lg bg-orange-500/10 text-orange-400 hover:bg-orange-500 hover:text-white transition-colors\"\r\n                                                                            >\r\n                                                                                <Send className=\"w-3.5 h-3.5\" />\r\n                                                                            </a>\r\n                                                                        )}\r\n                                                                    </div>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                        ))}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"text-center py-12\">\r\n                                                <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-3\">\r\n                                                    <Users className=\"w-5 h-5 text-zinc-600\" />\r\n                                                </div>\r\n                                                <p className=\"text-sm text-zinc-500\">No people found for this company.</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </motion.div>\r\n                                )}\r\n                            </AnimatePresence>\r\n                        </div>\r\n                    </motion.div >\r\n                </>\r\n            )}\r\n        </AnimatePresence >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\CreateCompanyModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":2,"column":87,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":92}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { X, Building2, Globe, MapPin, Users, FileText, Loader2, DollarSign, Calendar, Phone, Linkedin, Twitter, Facebook, Hash, CheckCircle2, LucideIcon } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface CompanyFormData {\r\n    name: string;\r\n    industry: string;\r\n    website: string;\r\n    location: string;\r\n    size: string;\r\n    description: string;\r\n    logo: string;\r\n    revenue: string;\r\n    founded_year: string;\r\n    phone: string;\r\n    linkedin: string;\r\n    twitter: string;\r\n    facebook: string;\r\n    keywords: string;\r\n    id?: string;\r\n}\r\n\r\ninterface CreateCompanyModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSubmit: (data: CompanyFormData) => void;\r\n}\r\n\r\ninterface InputFieldProps {\r\n    label: string;\r\n    icon: LucideIcon;\r\n    value: string | number;\r\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n    placeholder?: string;\r\n    type?: string;\r\n    required?: boolean;\r\n    className?: string;\r\n}\r\n\r\nconst InputField: React.FC<InputFieldProps> = ({ label, icon: Icon, value, onChange, placeholder, type = \"text\", required = false, className = \"\" }) => (\r\n    <div className={`space-y-1.5 ${className}`}>\r\n        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider ml-1\">{label} {required && <span className=\"text-red-500\">*</span>}</label>\r\n        <div className=\"relative group\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <Icon className=\"h-4 w-4 text-zinc-500 group-focus-within:text-indigo-500 transition-colors\" />\r\n            </div>\r\n            <input\r\n                type={type}\r\n                required={required}\r\n                value={value}\r\n                onChange={onChange}\r\n                className=\"block w-full pl-10 pr-3 py-2.5 bg-zinc-900/50 border border-white/10 rounded-xl text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all hover:bg-white/5\"\r\n                placeholder={placeholder}\r\n            />\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const CreateCompanyModal: React.FC<CreateCompanyModalProps> = ({ isOpen, onClose, onSubmit }) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [formData, setFormData] = useState<CompanyFormData>({\r\n        name: '',\r\n        industry: '',\r\n        website: '',\r\n        location: '',\r\n        size: '',\r\n        description: '',\r\n        logo: '',\r\n        revenue: '',\r\n        founded_year: '',\r\n        phone: '',\r\n        linkedin: '',\r\n        twitter: '',\r\n        facebook: '',\r\n        keywords: ''\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        // Simulate API delay\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        onSubmit({ ...formData, id: `company_${Date.now()}` });\r\n        setLoading(false);\r\n        onClose();\r\n        setFormData({\r\n            name: '', industry: '', website: '', location: '', size: '', description: '', logo: '',\r\n            revenue: '', founded_year: '', phone: '', linkedin: '', twitter: '', facebook: '', keywords: ''\r\n        });\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        className=\"fixed inset-0 m-auto w-full max-w-2xl h-fit max-h-[90vh] bg-[#09090b] border border-white/10 rounded-3xl shadow-2xl z-50 flex flex-col overflow-hidden\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"relative h-32 shrink-0 overflow-hidden\">\r\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-900/40 via-[#09090b] to-[#09090b]\" />\r\n                            <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\" />\r\n\r\n                            <div className=\"relative z-10 p-6 flex justify-between items-start\">\r\n                                <div>\r\n                                    <h2 className=\"text-2xl font-bold text-white tracking-tight mb-1\">Add New Company</h2>\r\n                                    <p className=\"text-zinc-400 text-sm\">Enter the details to add a new company to the database.</p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={onClose}\r\n                                    className=\"p-2 bg-black/20 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors border border-white/5 backdrop-blur-md\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-6 -mt-4 relative z-20\">\r\n                            <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n                                {/* Basic Info Section */}\r\n                                <section className=\"space-y-4\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20\">\r\n                                            <Building2 className=\"w-4 h-4 text-indigo-400\" />\r\n                                        </div>\r\n                                        <h3 className=\"text-sm font-bold text-white\">Company Information</h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        <InputField\r\n                                            label=\"Company Name\"\r\n                                            icon={Building2}\r\n                                            value={formData.name}\r\n                                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                            placeholder=\"Acme Inc.\"\r\n                                            required\r\n                                            className=\"md:col-span-2\"\r\n                                        />\r\n                                        <InputField\r\n                                            label=\"Industry\"\r\n                                            icon={Hash}\r\n                                            value={formData.industry}\r\n                                            onChange={(e) => setFormData({ ...formData, industry: e.target.value })}\r\n                                            placeholder=\"Technology, SaaS...\"\r\n                                            required\r\n                                        />\r\n                                        <InputField\r\n                                            label=\"Website\"\r\n                                            icon={Globe}\r\n                                            value={formData.website}\r\n                                            onChange={(e) => setFormData({ ...formData, website: e.target.value })}\r\n                                            placeholder=\"https://example.com\"\r\n                                            type=\"url\"\r\n                                        />\r\n                                    </div>\r\n                                </section>\r\n\r\n                                {/* Details Section */}\r\n                                <section className=\"space-y-4 pt-4 border-t border-white/5\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center border border-emerald-500/20\">\r\n                                            <FileText className=\"w-4 h-4 text-emerald-400\" />\r\n                                        </div>\r\n                                        <h3 className=\"text-sm font-bold text-white\">Key Details</h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        <InputField\r\n                                            label=\"Location\"\r\n                                            icon={MapPin}\r\n                                            value={formData.location}\r\n                                            onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n                                            placeholder=\"San Francisco, CA\"\r\n                                        />\r\n\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider ml-1\">Company Size</label>\r\n                                            <div className=\"relative group\">\r\n                                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                                    <Users className=\"h-4 w-4 text-zinc-500 group-focus-within:text-indigo-500 transition-colors\" />\r\n                                                </div>\r\n                                                <select\r\n                                                    value={formData.size}\r\n                                                    onChange={e => setFormData({ ...formData, size: e.target.value })}\r\n                                                    className=\"block w-full pl-10 pr-3 py-2.5 bg-zinc-900/50 border border-white/10 rounded-xl text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all hover:bg-white/5 appearance-none\"\r\n                                                >\r\n                                                    <option value=\"\" className=\"bg-zinc-900 text-zinc-500\">Select Size</option>\r\n                                                    <option value=\"1-10\" className=\"bg-zinc-900\">1-10 employees</option>\r\n                                                    <option value=\"11-50\" className=\"bg-zinc-900\">11-50 employees</option>\r\n                                                    <option value=\"51-200\" className=\"bg-zinc-900\">51-200 employees</option>\r\n                                                    <option value=\"201-500\" className=\"bg-zinc-900\">201-500 employees</option>\r\n                                                    <option value=\"500+\" className=\"bg-zinc-900\">500+ employees</option>\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <InputField\r\n                                            label=\"Revenue\"\r\n                                            icon={DollarSign}\r\n                                            value={formData.revenue}\r\n                                            onChange={(e) => setFormData({ ...formData, revenue: e.target.value })}\r\n                                            placeholder=\"$1M - $10M\"\r\n                                        />\r\n                                        <InputField\r\n                                            label=\"Founded Year\"\r\n                                            icon={Calendar}\r\n                                            value={formData.founded_year}\r\n                                            onChange={(e) => setFormData({ ...formData, founded_year: e.target.value })}\r\n                                            placeholder=\"2020\"\r\n                                            type=\"number\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider ml-1\">Description</label>\r\n                                        <textarea\r\n                                            rows={3}\r\n                                            value={formData.description}\r\n                                            onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                                            className=\"block w-full p-3 bg-zinc-900/50 border border-white/10 rounded-xl text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all hover:bg-white/5 resize-none\"\r\n                                            placeholder=\"Brief description of the company...\"\r\n                                        />\r\n                                    </div>\r\n                                </section>\r\n\r\n                                {/* Socials Section */}\r\n                                <section className=\"space-y-4 pt-4 border-t border-white/5\">\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center border border-blue-500/20\">\r\n                                            <Globe className=\"w-4 h-4 text-blue-400\" />\r\n                                        </div>\r\n                                        <h3 className=\"text-sm font-bold text-white\">Social Profiles</h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                        <InputField\r\n                                            label=\"LinkedIn\"\r\n                                            icon={Linkedin}\r\n                                            value={formData.linkedin}\r\n                                            onChange={(e) => setFormData({ ...formData, linkedin: e.target.value })}\r\n                                            placeholder=\"LinkedIn URL\"\r\n                                            type=\"url\"\r\n                                        />\r\n                                        <InputField\r\n                                            label=\"Twitter\"\r\n                                            icon={Twitter}\r\n                                            value={formData.twitter}\r\n                                            onChange={(e) => setFormData({ ...formData, twitter: e.target.value })}\r\n                                            placeholder=\"Twitter URL\"\r\n                                            type=\"url\"\r\n                                        />\r\n                                        <InputField\r\n                                            label=\"Facebook\"\r\n                                            icon={Facebook}\r\n                                            value={formData.facebook}\r\n                                            onChange={(e) => setFormData({ ...formData, facebook: e.target.value })}\r\n                                            placeholder=\"Facebook URL\"\r\n                                            type=\"url\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <InputField\r\n                                        label=\"Keywords\"\r\n                                        icon={Hash}\r\n                                        value={formData.keywords}\r\n                                        onChange={(e) => setFormData({ ...formData, keywords: e.target.value })}\r\n                                        placeholder=\"SaaS, B2B, Marketing, AI (comma separated)\"\r\n                                    />\r\n                                </section>\r\n\r\n                                {/* Footer Actions */}\r\n                                <div className=\"pt-6 border-t border-white/5 flex justify-end gap-3 sticky bottom-0 bg-[#09090b] pb-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={onClose}\r\n                                        className=\"px-5 py-2.5 rounded-xl text-sm font-medium text-zinc-400 hover:text-white hover:bg-white/5 transition-colors\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={loading}\r\n                                        className=\"bg-white hover:bg-zinc-200 text-black px-8 py-2.5 rounded-xl text-sm font-bold transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-white/5\"\r\n                                    >\r\n                                        {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <CheckCircle2 className=\"w-4 h-4\" />}\r\n                                        {loading ? 'Creating...' : 'Create Company'}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\CreatePersonModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Dashboard\\FPLevelDistribution.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Dashboard\\RecentActivity.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1523,1526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1523,1526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1534,1537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1534,1537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1805,1808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1805,1808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":64,"column":8,"nodeType":"ArrayExpression","endLine":64,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [supabase]","fix":{"range":[2243,2245],"text":"[supabase]"}}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { Plus, Edit2, Trash2, CheckCircle2, Eye, Circle } from 'lucide-react';\r\nimport { createClient } from '@/lib/supabase';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\ninterface ActivityItem {\r\n    id: number;\r\n    label: string;\r\n    status: string;\r\n    created_at: string;\r\n    uid: string;\r\n    user_name?: string;\r\n}\r\n\r\nexport const RecentActivity = () => {\r\n    const [activities, setActivities] = useState<ActivityItem[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const supabase = createClient();\r\n\r\n    useEffect(() => {\r\n        const fetchActivities = async () => {\r\n            try {\r\n                const { data: activityData, error } = await supabase\r\n                    .from('activities')\r\n                    .select('*')\r\n                    .order('created_at', { ascending: false })\r\n                    .limit(8);\r\n\r\n                if (error) throw error;\r\n\r\n                if (activityData) {\r\n                    const userIds = [...new Set(activityData.map((a: any) => a.uid).filter(Boolean))];\r\n                    let userMap: Record<string, string> = {};\r\n\r\n                    if (userIds.length > 0) {\r\n                        const { data: users } = await supabase\r\n                            .from('users')\r\n                            .select('uid, name')\r\n                            .in('uid', userIds);\r\n\r\n                        if (users) {\r\n                            userMap = users.reduce((acc: any, user: any) => {\r\n                                acc[user.uid] = user.name;\r\n                                return acc;\r\n                            }, {});\r\n                        }\r\n                    }\r\n\r\n                    const mappedActivities = activityData.map((a: any) => ({\r\n                        ...a,\r\n                        user_name: userMap[a.uid] || 'Unknown User'\r\n                    }));\r\n\r\n                    setActivities(mappedActivities);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching activities:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchActivities();\r\n    }, []);\r\n\r\n    const getIcon = (label: string) => {\r\n        const l = label.toLowerCase();\r\n        if (l.includes('completed')) return CheckCircle2;\r\n        if (l.includes('add') || l.includes('new')) return Plus;\r\n        if (l.includes('edit')) return Edit2;\r\n        if (l.includes('delete')) return Trash2;\r\n        if (l.includes('visibility')) return Eye;\r\n        return Circle;\r\n    };\r\n\r\n    const getColor = (label: string) => {\r\n        const l = label.toLowerCase();\r\n        if (l.includes('completed')) return 'text-emerald-400';\r\n        if (l.includes('add')) return 'text-blue-400';\r\n        if (l.includes('edit')) return 'text-amber-400';\r\n        if (l.includes('delete')) return 'text-red-400';\r\n        return 'text-zinc-500';\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-zinc-900/50 rounded-2xl p-5 border border-white/[0.04]\">\r\n            <h3 className=\"text-sm font-medium text-white mb-5\">Recent Activity</h3>\r\n\r\n            <div className=\"space-y-1\">\r\n                {loading ? (\r\n                    <p className=\"text-zinc-500 text-sm py-4\">Loading...</p>\r\n                ) : activities.length === 0 ? (\r\n                    <p className=\"text-zinc-500 text-sm py-4\">No recent activity</p>\r\n                ) : (\r\n                    activities.map((activity) => {\r\n                        const Icon = getIcon(activity.label);\r\n                        const colorClass = getColor(activity.label);\r\n\r\n                        return (\r\n                            <div\r\n                                key={activity.id}\r\n                                className=\"flex items-start gap-3 py-3 border-b border-white/[0.03] last:border-0\"\r\n                            >\r\n                                <Icon className={`w-4 h-4 mt-0.5 shrink-0 ${colorClass}`} />\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <p className=\"text-sm text-zinc-300 leading-snug\">\r\n                                        <span className=\"font-medium text-white\">{activity.user_name}</span>\r\n                                        {' '}{activity.status}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-zinc-600 mt-1\">\r\n                                        {formatDistanceToNow(new Date(activity.created_at), { addSuffix: true })}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Dashboard\\RecentlySaved.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[165,168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[165,168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":36,"column":37,"nodeType":"JSXOpeningElement","endLine":36,"endColumn":117}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Building2, ArrowUpRight } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\ninterface RecentlySavedProps {\r\n    companies: any[];\r\n}\r\n\r\nexport const RecentlySaved: React.FC<RecentlySavedProps> = ({ companies }) => {\r\n    return (\r\n        <div className=\"bg-zinc-900/50 rounded-2xl p-5 border border-white/[0.04]\">\r\n            <div className=\"flex items-center justify-between mb-5\">\r\n                <h3 className=\"text-sm font-medium text-white\">Recently Saved</h3>\r\n                <Link\r\n                    href=\"/database\"\r\n                    className=\"text-xs text-zinc-500 hover:text-zinc-300 transition-colors\"\r\n                >\r\n                    View all\r\n                </Link>\r\n            </div>\r\n\r\n            {companies.length === 0 ? (\r\n                <div className=\"py-8 text-center\">\r\n                    <Building2 className=\"w-6 h-6 text-zinc-700 mx-auto mb-2\" />\r\n                    <p className=\"text-xs text-zinc-500\">No companies saved yet</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-1\">\r\n                    {companies.map((company) => (\r\n                        <div\r\n                            key={company.id}\r\n                            className=\"flex items-center gap-3 py-2.5 group\"\r\n                        >\r\n                            <div className=\"w-8 h-8 rounded-lg bg-zinc-800 flex items-center justify-center shrink-0\">\r\n                                {company.logo ? (\r\n                                    <img src={company.logo} alt={company.name} className=\"w-5 h-5 object-contain\" />\r\n                                ) : (\r\n                                    <Building2 className=\"w-4 h-4 text-zinc-600\" />\r\n                                )}\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <h4 className=\"text-sm text-zinc-300 truncate group-hover:text-white transition-colors\">\r\n                                    {company.name}\r\n                                </h4>\r\n                                {company.location && (\r\n                                    <p className=\"text-xs text-zinc-600 truncate\">{company.location}</p>\r\n                                )}\r\n                            </div>\r\n                            {company.website && (\r\n                                <a\r\n                                    href={company.website.startsWith('http') ? company.website : `https://${company.website}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"p-1.5 text-zinc-600 hover:text-zinc-300 transition-colors opacity-0 group-hover:opacity-100\"\r\n                                >\r\n                                    <ArrowUpRight className=\"w-3.5 h-3.5\" />\r\n                                </a>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Dashboard\\StatsGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[379,382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[379,382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Building2, Phone, ListTodo, TrendingUp } from 'lucide-react';\r\n\r\ninterface StatsGridProps {\r\n    stats: {\r\n        totalCompanies: number;\r\n        contacted: number;\r\n        pendingTasks: number;\r\n        avgLevel: number;\r\n    };\r\n}\r\n\r\nconst StatCard = ({ label, value, icon: Icon, accent }: { label: string; value: string | number; icon: any; accent: string }) => (\r\n    <div className=\"group relative bg-zinc-900/50 hover:bg-zinc-900 rounded-2xl p-5 transition-all duration-200 border border-white/[0.04] hover:border-white/[0.08]\">\r\n        <div className=\"flex items-start justify-between\">\r\n            <div className=\"space-y-3\">\r\n                <p className=\"text-zinc-500 text-xs font-medium uppercase tracking-wide\">{label}</p>\r\n                <p className=\"text-2xl font-semibold text-white\">{value}</p>\r\n            </div>\r\n            <div className={`p-2.5 rounded-xl ${accent}`}>\r\n                <Icon className=\"w-4 h-4\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport const StatsGrid: React.FC<StatsGridProps> = ({ stats }) => {\r\n    return (\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <StatCard\r\n                label=\"Companies\"\r\n                value={stats.totalCompanies.toLocaleString()}\r\n                icon={Building2}\r\n                accent=\"bg-blue-500/10 text-blue-400\"\r\n            />\r\n            <StatCard\r\n                label=\"Contacted\"\r\n                value={stats.contacted.toLocaleString()}\r\n                icon={Phone}\r\n                accent=\"bg-emerald-500/10 text-emerald-400\"\r\n            />\r\n            <StatCard\r\n                label=\"Pending Tasks\"\r\n                value={stats.pendingTasks}\r\n                icon={ListTodo}\r\n                accent=\"bg-amber-500/10 text-amber-400\"\r\n            />\r\n            <StatCard\r\n                label=\"Avg. Level\"\r\n                value={stats.avgLevel.toFixed(1)}\r\n                icon={TrendingUp}\r\n                accent=\"bg-violet-500/10 text-violet-400\"\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Dashboard\\UserLeaderboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\DatabasePage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[980,983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[980,983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1762,1765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1762,1765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPersonModalOpen' is assigned a value but never used.","line":42,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'notify'. Either include it or remove the dependency array. If 'notify' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":64,"column":8,"nodeType":"ArrayExpression","endLine":64,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [notify]","fix":{"range":[2568,2570],"text":"[notify]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newPerson' is defined but never used.","line":88,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3443,3446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3443,3446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'newCompany' is defined but never used.","line":95,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3716,3719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3716,3719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6100,6103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6100,6103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7279,7282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7279,7282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'company' is defined but never used.","line":419,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":419,"endColumn":39}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useMemo } from 'react';\r\nimport {\r\n    FolderOpen, Search, Database, Trash2, Users, Building2, Plus, Filter, MapPin\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nimport { ProfileCard } from './ProfileCard';\r\nimport { CompanyCard, Company } from './CompanyCard';\r\nimport { CreatePersonModal } from './CreatePersonModal';\r\nimport { CreateCompanyModal } from './CreateCompanyModal';\r\nimport { CompanyDetailsModal } from './CompanyDetailsModal';\r\nimport { LeadDetailModal } from './LeadDetailModal';\r\nimport { CompanyCardSkeleton } from './CompanyCardSkeleton';\r\nimport { databaseService } from '@/services/databaseService';\r\n\r\ninterface DatabasePageProps {\r\n    notify: (msg: string, type?: string) => void;\r\n}\r\n\r\nexport const DatabasePage: React.FC<DatabasePageProps> = ({ notify }) => {\r\n    const [activeView, setActiveView] = useState<'people' | 'companies'>('people');\r\n    const [people, setPeople] = useState<any[]>([]);\r\n    const [companies, setCompanies] = useState<Company[]>([]);\r\n    const [dbSearch, setDbSearch] = useState<string>('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Filter State\r\n    const [showFilters, setShowFilters] = useState(false);\r\n    const [filters, setFilters] = useState({\r\n        industry: '',\r\n        location: '',\r\n        employees: ''\r\n    });\r\n\r\n    // Modal States\r\n    const [isCreatePersonOpen, setIsCreatePersonOpen] = useState(false);\r\n    const [isCreateCompanyOpen, setIsCreateCompanyOpen] = useState(false);\r\n    const [selectedCompany, setSelectedCompany] = useState<Company | null>(null);\r\n    const [isCompanyModalOpen, setIsCompanyModalOpen] = useState(false);\r\n    const [selectedPerson, setSelectedPerson] = useState<any>(null);\r\n    const [isPersonModalOpen, setIsPersonModalOpen] = useState(false);\r\n\r\n    // Fetch data on mount\r\n    React.useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const [savedCompanies, savedPeople] = await Promise.all([\r\n                    databaseService.getSavedCompanies(),\r\n                    databaseService.getSavedPeople()\r\n                ]);\r\n                setCompanies(savedCompanies);\r\n                setPeople(savedPeople);\r\n            } catch (error) {\r\n                console.error('Failed to fetch data:', error);\r\n                notify('Failed to load data', 'error');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleDeletePerson = async (id: string) => {\r\n        try {\r\n            await databaseService.deletePerson(id);\r\n            setPeople(prev => prev.filter(p => p.id !== id));\r\n            notify('Person removed', 'success');\r\n        } catch (error) {\r\n            console.error('Failed to delete person:', error);\r\n            notify('Failed to delete person', 'error');\r\n        }\r\n    };\r\n\r\n    const handleDeleteCompany = async (id: string) => {\r\n        try {\r\n            await databaseService.deleteCompany(id);\r\n            setCompanies(prev => prev.filter(c => c.id !== id));\r\n            notify('Company removed', 'success');\r\n        } catch (error) {\r\n            console.error('Failed to delete company:', error);\r\n            notify('Failed to delete company', 'error');\r\n        }\r\n    };\r\n\r\n    const handleCreatePerson = async (newPerson: any) => {\r\n        // Refresh list after creation\r\n        const savedPeople = await databaseService.getSavedPeople();\r\n        setPeople(savedPeople);\r\n        notify('Person created successfully', 'success');\r\n    };\r\n\r\n    const handleCreateCompany = async (newCompany: any) => {\r\n        const savedCompanies = await databaseService.getSavedCompanies();\r\n        setCompanies(savedCompanies);\r\n        notify('Company created successfully', 'success');\r\n    };\r\n\r\n    const uniqueIndustries = useMemo(() => {\r\n        const industries = new Set(companies.map(c => c.industry).filter(Boolean));\r\n        return Array.from(industries).sort();\r\n    }, [companies]);\r\n\r\n    const filteredData = useMemo(() => {\r\n        const query = dbSearch.toLowerCase();\r\n\r\n        if (activeView === 'people') {\r\n            return people.filter(p =>\r\n                p.name.toLowerCase().includes(query) ||\r\n                p.company.toLowerCase().includes(query) ||\r\n                p.email.toLowerCase().includes(query)\r\n            );\r\n        } else {\r\n            return companies.filter(c => {\r\n                const matchesSearch =\r\n                    c.name.toLowerCase().includes(query) ||\r\n                    (c.industry || '').toLowerCase().includes(query);\r\n\r\n                const matchesIndustry = !filters.industry || c.industry === filters.industry;\r\n\r\n                const matchesLocation = !filters.location ||\r\n                    (c.location || '').toLowerCase().includes(filters.location.toLowerCase());\r\n\r\n                let matchesEmployees = true;\r\n                if (filters.employees && c.employees) {\r\n                    const count = c.employees;\r\n                    switch (filters.employees) {\r\n                        case '1-10': matchesEmployees = count >= 1 && count <= 10; break;\r\n                        case '11-50': matchesEmployees = count >= 11 && count <= 50; break;\r\n                        case '51-200': matchesEmployees = count >= 51 && count <= 200; break;\r\n                        case '201-500': matchesEmployees = count >= 201 && count <= 500; break;\r\n                        case '501-1000': matchesEmployees = count >= 501 && count <= 1000; break;\r\n                        case '1000+': matchesEmployees = count > 1000; break;\r\n                    }\r\n                } else if (filters.employees && !c.employees) {\r\n                    matchesEmployees = false;\r\n                }\r\n\r\n                return matchesSearch && matchesIndustry && matchesLocation && matchesEmployees;\r\n            });\r\n        }\r\n    }, [people, companies, activeView, dbSearch, filters]);\r\n\r\n    const handleUnlock = async (lead: any, type: 'email' | 'phone') => {\r\n        try {\r\n            const response = await fetch('/api/apollo/enrich', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    id: lead.id,\r\n                    reveal_email: type === 'email',\r\n                    reveal_phone: type === 'phone'\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to unlock contact info');\r\n            }\r\n\r\n            const unlockedLead = { ...data.lead, isSaved: true };\r\n\r\n            // Save to database automatically\r\n            await databaseService.savePerson(unlockedLead);\r\n\r\n            // Update local state\r\n            setPeople(prev => prev.map(p => p.id === lead.id ? unlockedLead : p));\r\n            if (selectedPerson && selectedPerson.id === lead.id) {\r\n                setSelectedPerson(unlockedLead);\r\n            }\r\n\r\n            notify(`Contact ${type} unlocked and saved!`, 'success');\r\n            return unlockedLead;\r\n        } catch (error: any) {\r\n            console.error('Unlock failed:', error);\r\n            notify(error.message || 'Failed to unlock contact info', 'error');\r\n            return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col lg:flex-row h-full gap-6\">\r\n            {selectedPerson && (\r\n                <LeadDetailModal\r\n                    lead={selectedPerson}\r\n                    onClose={() => {\r\n                        setSelectedPerson(null);\r\n                        setIsPersonModalOpen(false);\r\n                    }}\r\n                    onUnlock={handleUnlock}\r\n                />\r\n            )}\r\n            {/* Database Sidebar */}\r\n            <div className=\"w-full lg:w-72 flex-shrink-0 flex flex-col h-full bg-[#09090b] border border-white/5 rounded-[32px] p-6\">\r\n                <h2 className=\"text-sm font-bold text-white mb-6 flex items-center gap-2.5\">\r\n                    <Database className=\"w-4 h-4 text-orange-500\" /> Database\r\n                </h2>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <button\r\n                        onClick={() => setActiveView('people')}\r\n                        className={`w-full text-left px-4 py-3 rounded-xl text-xs font-medium transition-all flex items-center gap-3 group ${activeView === 'people' ? 'bg-zinc-900 text-white border border-white/5' : 'text-zinc-500 hover:text-white hover:bg-white/5 border border-transparent'}`}\r\n                    >\r\n                        <Users className={`w-4 h-4 ${activeView === 'people' ? 'text-orange-500' : 'text-zinc-600 group-hover:text-zinc-400'}`} />\r\n                        <span>People</span>\r\n                        {activeView === 'people' && <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-orange-500\"></div>}\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => setActiveView('companies')}\r\n                        className={`w-full text-left px-4 py-3 rounded-xl text-xs font-medium transition-all flex items-center gap-3 group ${activeView === 'companies' ? 'bg-zinc-900 text-white border border-white/5' : 'text-zinc-500 hover:text-white hover:bg-white/5 border border-transparent'}`}\r\n                    >\r\n                        <Building2 className={`w-4 h-4 ${activeView === 'companies' ? 'text-orange-500' : 'text-zinc-600 group-hover:text-zinc-400'}`} />\r\n                        <span>Companies</span>\r\n                        {activeView === 'companies' && <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-orange-500\"></div>}\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"mt-auto pt-4 border-t border-white/5\">\r\n                    <div className=\"px-4 py-2 text-xs text-zinc-500 flex items-center gap-2\">\r\n                        <FolderOpen className=\"w-3 h-3\" /> {activeView === 'people' ? `${people.length} People` : `${companies.length} Companies`}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"flex-1 bg-[#09090b] border border-white/5 rounded-[32px] p-6 lg:p-8 flex flex-col overflow-hidden\">\r\n                <div className=\"flex flex-col xl:flex-row justify-between items-start xl:items-center mb-8 gap-6\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-white tracking-tight mb-1\">\r\n                            {activeView === 'people' ? 'People' : 'Companies'}\r\n                        </h1>\r\n                        <p className=\"text-zinc-500 text-xs font-medium\">\r\n                            Manage your {activeView} database\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row gap-3 w-full xl:w-auto\">\r\n                        <div className=\"relative flex-1 sm:flex-none\">\r\n                            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={`Search ${activeView}...`}\r\n                                value={dbSearch}\r\n                                onChange={(e) => setDbSearch(e.target.value)}\r\n                                className=\"w-full sm:w-[300px] bg-zinc-900 text-white text-xs font-medium pl-10 pr-4 py-3 rounded-xl border border-white/5 focus:border-white/10 outline-none transition-all placeholder:text-zinc-600\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            {activeView === 'companies' && (\r\n                                <button\r\n                                    onClick={() => setShowFilters(!showFilters)}\r\n                                    className={`px-4 py-2.5 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border ${showFilters ? 'bg-zinc-800 text-white border-white/10' : 'bg-zinc-900 text-zinc-400 border-white/5 hover:text-white hover:bg-zinc-800'}`}\r\n                                >\r\n                                    <Filter className=\"w-3.5 h-3.5\" /> Filters\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={() => activeView === 'people' ? setIsCreatePersonOpen(true) : setIsCreateCompanyOpen(true)}\r\n                                className=\"bg-white hover:bg-zinc-200 text-black px-5 py-2.5 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 shadow-lg shadow-white/5\"\r\n                            >\r\n                                <Plus className=\"w-3.5 h-3.5\" /> Add {activeView === 'people' ? 'Person' : 'Company'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Filters Panel */}\r\n                <AnimatePresence>\r\n                    {showFilters && activeView === 'companies' && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: 'auto', opacity: 1 }}\r\n                            exit={{ height: 0, opacity: 0 }}\r\n                            className=\"overflow-hidden mb-6\"\r\n                        >\r\n                            <div className=\"bg-zinc-900/50 border border-white/5 rounded-2xl p-5 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                {/* Industry Filter */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider\">Industry</label>\r\n                                    <div className=\"relative\">\r\n                                        <select\r\n                                            value={filters.industry}\r\n                                            onChange={(e) => setFilters(prev => ({ ...prev, industry: e.target.value }))}\r\n                                            className=\"w-full bg-zinc-900 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-blue-500/50 appearance-none cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"\">All Industries</option>\r\n                                            {uniqueIndustries.map(ind => (\r\n                                                <option key={ind} value={ind}>{ind}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none\">\r\n                                            <svg className=\"w-3 h-3 text-zinc-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Location Filter */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider\">Location</label>\r\n                                    <div className=\"relative\">\r\n                                        <MapPin className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500\" />\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"City, Country...\"\r\n                                            value={filters.location}\r\n                                            onChange={(e) => setFilters(prev => ({ ...prev, location: e.target.value }))}\r\n                                            className=\"w-full bg-zinc-900 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white focus:outline-none focus:border-blue-500/50 placeholder:text-zinc-600\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Employees Filter */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider\">Employees</label>\r\n                                    <div className=\"relative\">\r\n                                        <select\r\n                                            value={filters.employees}\r\n                                            onChange={(e) => setFilters(prev => ({ ...prev, employees: e.target.value }))}\r\n                                            className=\"w-full bg-zinc-900 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-blue-500/50 appearance-none cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"\">Any Size</option>\r\n                                            <option value=\"1-10\">1-10 Employees</option>\r\n                                            <option value=\"11-50\">11-50 Employees</option>\r\n                                            <option value=\"51-200\">51-200 Employees</option>\r\n                                            <option value=\"201-500\">201-500 Employees</option>\r\n                                            <option value=\"501-1000\">501-1000 Employees</option>\r\n                                            <option value=\"1000+\">1000+ Employees</option>\r\n                                        </select>\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none\">\r\n                                            <svg className=\"w-3 h-3 text-zinc-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar\">\r\n                    {loading ? (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 pb-20\">\r\n                            {[...Array(6)].map((_, i) => (\r\n                                <CompanyCardSkeleton key={i} />\r\n                            ))}\r\n                        </div>\r\n                    ) : filteredData.length === 0 ? (\r\n                        <div className=\"h-full flex flex-col items-center justify-center opacity-40\">\r\n                            <div className=\"w-24 h-24 rounded-full bg-zinc-900 flex items-center justify-center mb-4 border border-white/5\">\r\n                                <Database className=\"w-10 h-10 text-zinc-600\" />\r\n                            </div>\r\n                            <p className=\"text-zinc-500 font-medium text-sm\">No {activeView} found</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 pb-20\">\r\n                            {activeView === 'people' ? (\r\n                                filteredData.map((person, idx) => (\r\n                                    <motion.div\r\n                                        key={person.id}\r\n                                        initial={{ opacity: 0, scale: 0.95 }}\r\n                                        animate={{ opacity: 1, scale: 1 }}\r\n                                        transition={{ delay: idx * 0.05 }}\r\n                                    >\r\n                                        <ProfileCard\r\n                                            lead={person}\r\n                                            actionIcon={Trash2}\r\n                                            onAction={() => handleDeletePerson(person.id)}\r\n                                            onClick={() => {\r\n                                                setSelectedPerson(person);\r\n                                                setIsPersonModalOpen(true);\r\n                                            }}\r\n                                        />\r\n                                    </motion.div>\r\n                                ))\r\n                            ) : (\r\n                                filteredData.map((company, idx) => (\r\n                                    <motion.div\r\n                                        key={company.id}\r\n                                        initial={{ opacity: 0, scale: 0.95 }}\r\n                                        animate={{ opacity: 1, scale: 1 }}\r\n                                        transition={{ delay: idx * 0.05 }}\r\n                                    >\r\n                                        <CompanyCard\r\n                                            company={company}\r\n                                            actionIcon={Trash2}\r\n                                            onAction={() => handleDeleteCompany(company.id)}\r\n                                            onClick={() => {\r\n                                                setSelectedCompany(company);\r\n                                                setIsCompanyModalOpen(true);\r\n                                            }}\r\n                                        />\r\n                                    </motion.div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modals */}\r\n            <CreatePersonModal\r\n                isOpen={isCreatePersonOpen}\r\n                onClose={() => setIsCreatePersonOpen(false)}\r\n                onSubmit={handleCreatePerson}\r\n            />\r\n            <CreateCompanyModal\r\n                isOpen={isCreateCompanyOpen}\r\n                onClose={() => setIsCreateCompanyOpen(false)}\r\n                onSubmit={handleCreateCompany}\r\n            />\r\n            <CompanyDetailsModal\r\n                company={selectedCompany}\r\n                isOpen={isCompanyModalOpen}\r\n                onClose={() => setIsCompanyModalOpen(false)}\r\n                onSave={async (company) => {\r\n                    setIsCompanyModalOpen(false);\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Drive\\DriveSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":2,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":2,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":2,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Folder' is defined but never used.","line":2,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":2,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":84},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[550,553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[550,553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { HardDrive, Clock, Star, Trash2, Cloud, Users, Share2, Folder, ChevronRight, Loader2 } from 'lucide-react';\r\nimport { cn } from '@/components/ui/Button';\r\nimport { workDriveApi } from '@/lib/zoho';\r\n\r\ninterface DriveSidebarProps {\r\n    activeSection?: string;\r\n    onNavigate?: (section: string, folderId?: string) => void;\r\n}\r\n\r\nexport const DriveSidebar: React.FC<DriveSidebarProps> = ({ activeSection = 'my-files', onNavigate }) => {\r\n    const [teamFolders, setTeamFolders] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchTeamFolders = async () => {\r\n            try {\r\n                const res = await workDriveApi.getTeamFolders();\r\n                if (res.data) {\r\n                    setTeamFolders(res.data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Failed to fetch team folders:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchTeamFolders();\r\n    }, []);\r\n\r\n    const mainItems = [\r\n        { id: 'my-files', label: 'My Files', icon: HardDrive },\r\n        { id: 'shared', label: 'Shared with Me', icon: Share2 },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-64 flex-shrink-0 border-r border-white/10 p-4 hidden md:flex flex-col gap-6 overflow-y-auto custom-scrollbar\">\r\n            <div className=\"px-2\">\r\n                <h2 className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-4\">Drive</h2>\r\n                <div className=\"flex flex-col gap-1\">\r\n                    {mainItems.map((item) => (\r\n                        <button\r\n                            key={item.id}\r\n                            onClick={() => onNavigate?.(item.id)}\r\n                            className={cn(\r\n                                \"flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-left\",\r\n                                activeSection === item.id\r\n                                    ? \"bg-orange-500/10 text-orange-500\"\r\n                                    : \"text-zinc-400 hover:bg-white/5 hover:text-zinc-200\"\r\n                            )}\r\n                        >\r\n                            <item.icon className=\"w-4 h-4\" />\r\n                            {item.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"px-2\">\r\n                <h2 className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-4 flex items-center justify-between\">\r\n                    Team Folders\r\n                    {loading && <Loader2 className=\"w-3 h-3 animate-spin\" />}\r\n                </h2>\r\n                <div className=\"flex flex-col gap-1\">\r\n                    {teamFolders.map((folder) => (\r\n                        <button\r\n                            key={folder.id}\r\n                            onClick={() => onNavigate?.('team-folder', folder.id)}\r\n                            className={cn(\r\n                                \"flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-200 text-left truncate\",\r\n                                activeSection === folder.id\r\n                                    ? \"bg-orange-500/10 text-orange-500\"\r\n                                    : \"text-zinc-400 hover:bg-white/5 hover:text-zinc-200\"\r\n                            )}\r\n                            title={folder.attributes.name}\r\n                        >\r\n                            <Users className=\"w-4 h-4 flex-shrink-0\" />\r\n                            <span className=\"truncate\">{folder.attributes.name}</span>\r\n                        </button>\r\n                    ))}\r\n                    {!loading && teamFolders.length === 0 && (\r\n                        <p className=\"text-xs text-zinc-600 px-3\">No team folders found</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Storage Widget */}\r\n            <div className=\"mt-auto p-4 rounded-2xl bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 border border-white/5\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                    <div className=\"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-500\">\r\n                        <Cloud className=\"w-4 h-4\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text-sm font-medium text-white\">Storage</p>\r\n                        <p className=\"text-xs text-zinc-500\">Zoho WorkDrive</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden mb-2\">\r\n                    <div className=\"w-[45%] h-full bg-blue-500 rounded-full\" />\r\n                </div>\r\n                <p className=\"text-xs text-zinc-400\">4.2 GB of 10 GB used</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Drive\\FileCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":2,"column":90,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":102},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":2,"column":104,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":116},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { File as FileIcon, Folder, Image as ImageIcon, FileText, Music, Video, Download, MoreVertical, ExternalLink } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { WorkDriveFile } from '@/lib/zoho';\r\nimport { cn } from '@/components/ui/Button';\r\n\r\ninterface FileCardProps {\r\n    file: WorkDriveFile;\r\n    viewMode?: 'grid' | 'list';\r\n    onNavigate: (id: string) => void;\r\n    onDownload: (file: WorkDriveFile) => void;\r\n}\r\n\r\nexport const FileCard: React.FC<FileCardProps> = ({ file, viewMode = 'grid', onNavigate, onDownload }) => {\r\n    const isFolder = file.attributes.is_folder;\r\n    const name = file.attributes.name;\r\n    const size = file.attributes.size ? (file.attributes.size / 1024 / 1024).toFixed(2) + ' MB' : '';\r\n    const date = file.attributes.modified_time_in_millisecond\r\n        ? new Date(file.attributes.modified_time_in_millisecond).toLocaleDateString()\r\n        : '';\r\n\r\n    const getIcon = () => {\r\n        if (isFolder) return <Folder className=\"w-full h-full text-orange-400\" fill=\"currentColor\" fillOpacity={0.2} />;\r\n        const ext = name.split('.').pop()?.toLowerCase();\r\n        if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext || '')) return <ImageIcon className=\"w-full h-full text-purple-400\" />;\r\n        if (['pdf', 'doc', 'docx', 'txt'].includes(ext || '')) return <FileText className=\"w-full h-full text-blue-400\" />;\r\n        if (['mp3', 'wav'].includes(ext || '')) return <Music className=\"w-full h-full text-pink-400\" />;\r\n        if (['mp4', 'mov', 'avi'].includes(ext || '')) return <Video className=\"w-full h-full text-green-400\" />;\r\n        return <FileIcon className=\"w-full h-full text-zinc-400\" />;\r\n    };\r\n\r\n    if (viewMode === 'list') {\r\n        return (\r\n            <motion.div\r\n                layout\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, scale: 0.95 }}\r\n                className=\"group flex items-center gap-4 p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 transition-all cursor-pointer\"\r\n                onDoubleClick={() => isFolder && onNavigate(file.id)}\r\n            >\r\n                <div className=\"w-10 h-10 p-2 bg-black/20 rounded-lg flex items-center justify-center\">\r\n                    {getIcon()}\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"text-sm font-medium text-zinc-200 truncate group-hover:text-white transition-colors\">{name}</h3>\r\n                    <div className=\"flex items-center gap-2 text-xs text-zinc-500\">\r\n                        <span>{date}</span>\r\n                        {size && <span>ΓÇó {size}</span>}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                    {!isFolder && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); onDownload(file); }}\r\n                            className=\"p-2 hover:bg-white/10 rounded-lg text-zinc-400 hover:text-white transition-colors\"\r\n                            title=\"Download\"\r\n                        >\r\n                            <Download className=\"w-4 h-4\" />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            layout\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.9 }}\r\n            className=\"group relative flex flex-col p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 transition-all cursor-pointer hover:-translate-y-1 hover:shadow-xl hover:shadow-black/20\"\r\n            onDoubleClick={() => isFolder && onNavigate(file.id)}\r\n        >\r\n            <div className=\"aspect-square mb-3 rounded-xl bg-black/20 flex items-center justify-center p-6 group-hover:scale-105 transition-transform duration-300\">\r\n                {getIcon()}\r\n            </div>\r\n\r\n            <div className=\"flex items-start justify-between gap-2\">\r\n                <div className=\"min-w-0\">\r\n                    <h3 className=\"text-sm font-medium text-zinc-200 truncate group-hover:text-white transition-colors\" title={name}>\r\n                        {name}\r\n                    </h3>\r\n                    <p className=\"text-xs text-zinc-500 mt-0.5\">{size || (isFolder ? 'Folder' : '')}</p>\r\n                </div>\r\n\r\n                {!isFolder && (\r\n                    <button\r\n                        onClick={(e) => { e.stopPropagation(); onDownload(file); }}\r\n                        className=\"p-1.5 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-white transition-colors opacity-0 group-hover:opacity-100\"\r\n                        title=\"Download\"\r\n                    >\r\n                        <Download className=\"w-4 h-4\" />\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Drive\\FileExplorer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileIcon' is defined but never used.","line":2,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":101},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":2,"column":103,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":111},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":2,"column":113,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":125},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Folder' is defined but never used.","line":2,"column":127,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":133},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageIcon' is defined but never used.","line":2,"column":144,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":153},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":2,"column":155,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":163},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Music' is defined but never used.","line":2,"column":165,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":170},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Video' is defined but never used.","line":2,"column":172,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":177},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":2,"column":179,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":185},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Share2' is defined but never used.","line":2,"column":187,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":193},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'propFolderId'. Either include it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentView, propFolderId]","fix":{"range":[1951,1964],"text":"[currentView, propFolderId]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6177,6180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6177,6180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'breadcrumbs.length' and 'onNavigate'. Either include them or remove the dependency array.","line":150,"column":8,"nodeType":"ArrayExpression","endLine":150,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [currentView, currentFolderId, breadcrumbs.length, onNavigate]","fix":{"range":[6439,6469],"text":"[currentView, currentFolderId, breadcrumbs.length, onNavigate]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { Upload, Grid, List as ListIcon, Search, ChevronRight, Loader2, FolderPlus, File as FileIcon, Download, MoreVertical, Folder, Image as ImageIcon, FileText, Music, Video, Trash2, Share2 } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { workDriveApi, WorkDriveFile } from '@/lib/zoho';\r\nimport { cn } from '@/components/ui/Button';\r\nimport { FileCard } from './FileCard';\r\n\r\ninterface FileExplorerProps {\r\n    viewType?: string;\r\n    folderId?: string | null;\r\n    onNavigate?: (folderId: string) => void;\r\n    onViewChange?: (view: string) => void;\r\n}\r\n\r\nexport const FileExplorer: React.FC<FileExplorerProps> = ({\r\n    viewType: propViewType,\r\n    folderId: propFolderId,\r\n    onNavigate,\r\n    onViewChange\r\n}) => {\r\n    const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n    const [files, setFiles] = useState<WorkDriveFile[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [breadcrumbs, setBreadcrumbs] = useState<{ id: string; name: string }[]>([]);\r\n    const [uploading, setUploading] = useState(false);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    // Internal state for uncontrolled mode\r\n    const [internalViewType, setInternalViewType] = useState('my-files');\r\n    const [internalFolderId, setInternalFolderId] = useState<string | null>(null);\r\n\r\n    // Derived state\r\n    const currentView = propViewType !== undefined ? propViewType : internalViewType;\r\n    const currentFolderId = propFolderId !== undefined ? propFolderId : internalFolderId;\r\n\r\n    // Reset internal folder state when view changes\r\n    useEffect(() => {\r\n        if (propFolderId === undefined) {\r\n            setInternalFolderId(null);\r\n        }\r\n        setBreadcrumbs([]);\r\n    }, [currentView]);\r\n\r\n    const handleViewChange = (newView: string) => {\r\n        if (onViewChange) {\r\n            onViewChange(newView);\r\n        } else {\r\n            setInternalViewType(newView);\r\n        }\r\n    };\r\n\r\n    const handleNavigateLocal = (targetFolderId: string, folderName?: string) => {\r\n        if (onNavigate) {\r\n            onNavigate(targetFolderId);\r\n        } else {\r\n            setInternalFolderId(targetFolderId);\r\n        }\r\n\r\n        // Update breadcrumbs\r\n        const newCrumb = { id: targetFolderId, name: folderName || 'Folder' };\r\n        const existingIndex = breadcrumbs.findIndex(b => b.id === targetFolderId);\r\n        if (existingIndex >= 0) {\r\n            setBreadcrumbs(breadcrumbs.slice(0, existingIndex + 1));\r\n        } else {\r\n            setBreadcrumbs([...breadcrumbs, newCrumb]);\r\n        }\r\n    };\r\n\r\n    // Load initial view or folder\r\n    useEffect(() => {\r\n        const loadContent = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            setFiles([]);\r\n\r\n            try {\r\n                // If we have a specific folder ID, load it\r\n                if (currentFolderId) {\r\n                    const res = await workDriveApi.getFiles(currentFolderId);\r\n                    if (res.data) {\r\n                        setFiles(res.data);\r\n                        if (breadcrumbs.length === 0) {\r\n                            setBreadcrumbs([{ id: currentFolderId, name: 'Folder' }]);\r\n                        }\r\n                    }\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                // Otherwise load based on currentView\r\n                if (currentView === 'team-folders') {\r\n                    const res = await workDriveApi.getTeamFolders();\r\n                    if (res.data) {\r\n                        setFiles(res.data);\r\n                        setBreadcrumbs([{ id: 'root', name: 'Team Folders' }]);\r\n                    }\r\n                } else if (currentView === 'my-files') {\r\n                    const userRes = await workDriveApi.getMe();\r\n                    const privateSpaceUrl = userRes.data?.relationships?.privatespace?.links?.related;\r\n\r\n                    if (privateSpaceUrl) {\r\n                        const config = JSON.parse(localStorage.getItem('zoho_config') || '{}');\r\n                        const token = config.accessToken;\r\n\r\n                        const psRes = await fetch(privateSpaceUrl, {\r\n                            headers: {\r\n                                'Authorization': `Zoho-oauthtoken ${token}`,\r\n                                'Accept': 'application/vnd.api+json'\r\n                            }\r\n                        });\r\n                        const psData = await psRes.json();\r\n\r\n                        if (psData.data) {\r\n                            const myFolderId = psData.data.id;\r\n                            if (onNavigate) {\r\n                                // Don't trigger navigation, just load files\r\n                                const filesRes = await workDriveApi.getFiles(myFolderId);\r\n                                if (filesRes.data) setFiles(filesRes.data);\r\n                                setBreadcrumbs([{ id: myFolderId, name: 'My Files' }]);\r\n                            } else {\r\n                                const filesRes = await workDriveApi.getFiles(myFolderId);\r\n                                if (filesRes.data) setFiles(filesRes.data);\r\n                                setBreadcrumbs([{ id: myFolderId, name: 'My Files' }]);\r\n                                setInternalFolderId(myFolderId);\r\n                            }\r\n                            setLoading(false);\r\n                            return;\r\n                        }\r\n                    }\r\n                    setError(\"Could not locate 'My Files'.\");\r\n\r\n                } else if (currentView === 'shared') {\r\n                    const res = await workDriveApi.getSharedFiles();\r\n                    if (res.data) {\r\n                        setFiles(res.data);\r\n                        setBreadcrumbs([{ id: 'shared', name: 'Shared with Me' }]);\r\n                    }\r\n                }\r\n            } catch (err: any) {\r\n                console.error('Failed to load content:', err);\r\n                setError(`Failed to load content: ${err.message}`);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadContent();\r\n    }, [currentView, currentFolderId]);\r\n\r\n    const handleBreadcrumbClick = (index: number) => {\r\n        const target = breadcrumbs[index];\r\n        if (target.id === 'root' || target.id === 'shared') {\r\n            if (onNavigate) onNavigate('');\r\n            setInternalFolderId(null);\r\n        } else {\r\n            handleNavigateLocal(target.id, target.name);\r\n        }\r\n    };\r\n\r\n    const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const activeId = currentFolderId;\r\n        if (!e.target.files || !e.target.files.length || !activeId) {\r\n            if (!activeId) alert(\"Cannot upload here. Please navigate to a folder first.\");\r\n            return;\r\n        }\r\n\r\n        const file = e.target.files[0];\r\n        setUploading(true);\r\n        try {\r\n            await workDriveApi.uploadFile(activeId, file);\r\n            const res = await workDriveApi.getFiles(activeId);\r\n            if (res.data) setFiles(res.data);\r\n        } catch (error) {\r\n            console.error('Upload failed:', error);\r\n            alert('Upload failed');\r\n        } finally {\r\n            setUploading(false);\r\n            if (fileInputRef.current) fileInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    const handleDownload = async (file: WorkDriveFile) => {\r\n        try {\r\n            const url = await workDriveApi.getDownloadUrl(file.id);\r\n            const config = JSON.parse(localStorage.getItem('zoho_config') || '{}');\r\n            const token = config.accessToken;\r\n\r\n            const res = await fetch(url, {\r\n                headers: { 'Authorization': `Zoho-oauthtoken ${token}` }\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Download failed');\r\n\r\n            const blob = await res.blob();\r\n            const downloadUrl = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = downloadUrl;\r\n            a.download = file.attributes.name;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            window.URL.revokeObjectURL(downloadUrl);\r\n            document.body.removeChild(a);\r\n        } catch (error) {\r\n            console.error('Download error:', error);\r\n            alert('Download failed');\r\n        }\r\n    };\r\n\r\n    const filteredFiles = files.filter(f =>\r\n        f.attributes.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex-1 flex flex-col h-full overflow-hidden\">\r\n            {/* Toolbar */}\r\n            <div className=\"flex flex-col md:flex-row items-center justify-between p-4 border-b border-white/5 gap-4\">\r\n                <div className=\"flex items-center gap-2 overflow-hidden w-full md:w-auto\">\r\n                    {/* View Selector (Mobile/Compact) */}\r\n                    <select\r\n                        value={currentView}\r\n                        onChange={(e) => handleViewChange(e.target.value)}\r\n                        className=\"md:hidden bg-zinc-900 border border-zinc-700 text-white text-sm rounded-lg px-2 py-1 mr-2\"\r\n                    >\r\n                        <option value=\"my-files\">My Files</option>\r\n                        <option value=\"team-folders\">Team Folders</option>\r\n                        <option value=\"shared\">Shared</option>\r\n                    </select>\r\n\r\n                    {breadcrumbs.map((crumb, index) => (\r\n                        <div key={crumb.id} className=\"flex items-center text-sm\">\r\n                            {index > 0 && <ChevronRight className=\"w-4 h-4 text-zinc-600 mx-1\" />}\r\n                            <button\r\n                                onClick={() => handleBreadcrumbClick(index)}\r\n                                className={cn(\r\n                                    \"hover:text-white transition-colors truncate max-w-[150px]\",\r\n                                    index === breadcrumbs.length - 1 ? \"text-white font-medium\" : \"text-zinc-500\"\r\n                                )}\r\n                            >\r\n                                {crumb.name}\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3 w-full md:w-auto justify-end\">\r\n                    {/* Desktop View Switcher */}\r\n                    <div className=\"hidden md:flex bg-zinc-900/50 rounded-lg p-1 border border-white/5 mr-2\">\r\n                        <button onClick={() => handleViewChange('my-files')} className={cn(\"px-3 py-1.5 rounded-md text-xs font-medium transition-colors\", currentView === 'my-files' ? \"bg-zinc-800 text-white\" : \"text-zinc-500 hover:text-zinc-300\")}>My Files</button>\r\n                        <button onClick={() => handleViewChange('team-folders')} className={cn(\"px-3 py-1.5 rounded-md text-xs font-medium transition-colors\", currentView === 'team-folders' ? \"bg-zinc-800 text-white\" : \"text-zinc-500 hover:text-zinc-300\")}>Team Folders</button>\r\n                        <button onClick={() => handleViewChange('shared')} className={cn(\"px-3 py-1.5 rounded-md text-xs font-medium transition-colors\", currentView === 'shared' ? \"bg-zinc-800 text-white\" : \"text-zinc-500 hover:text-zinc-300\")}>Shared</button>\r\n                    </div>\r\n\r\n                    <div className=\"relative group flex-1 md:flex-none\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500 group-hover:text-zinc-400 transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search files...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"w-full md:w-64 bg-black/20 border border-white/10 rounded-xl pl-9 pr-4 py-2 text-sm text-white focus:outline-none focus:border-orange-500/50 transition-all placeholder:text-zinc-600\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center bg-white/5 rounded-xl p-1 border border-white/10\">\r\n                        <button\r\n                            onClick={() => setViewMode('grid')}\r\n                            className={cn(\"p-2 rounded-lg transition-all\", viewMode === 'grid' ? \"bg-white/10 text-white shadow-sm\" : \"text-zinc-500 hover:text-zinc-300\")}\r\n                        >\r\n                            <Grid className=\"w-4 h-4\" />\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setViewMode('list')}\r\n                            className={cn(\"p-2 rounded-lg transition-all\", viewMode === 'list' ? \"bg-white/10 text-white shadow-sm\" : \"text-zinc-500 hover:text-zinc-300\")}\r\n                        >\r\n                            <ListIcon className=\"w-4 h-4\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"h-6 w-px bg-white/10 hidden md:block\" />\r\n\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        className=\"hidden\"\r\n                        onChange={handleUpload}\r\n                    />\r\n                    <button\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        disabled={uploading || (!currentFolderId && currentView !== 'my-files')}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white rounded-xl text-sm font-medium transition-all shadow-lg shadow-orange-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02]\"\r\n                    >\r\n                        {uploading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Upload className=\"w-4 h-4\" />}\r\n                        <span className=\"hidden sm:inline\">Upload File</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\r\n                {error ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-red-400 gap-4 p-4\">\r\n                        <div className=\"w-20 h-20 rounded-3xl bg-red-500/10 flex items-center justify-center border border-red-500/20\">\r\n                            <FolderPlus className=\"w-10 h-10 opacity-50\" />\r\n                        </div>\r\n                        <p className=\"text-center max-w-md font-medium\">{error}</p>\r\n\r\n                        <div className=\"flex flex-col gap-2 w-full max-w-sm mt-4\">\r\n                            <label className=\"text-xs text-zinc-500 uppercase font-bold tracking-wider\">Manual Folder ID Override</label>\r\n                            <div className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"e.g. smd3w...\"\r\n                                    className=\"flex-1 bg-zinc-900 border border-zinc-700 rounded-lg px-3 py-2 text-sm text-white focus:border-orange-500 focus:outline-none\"\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter') {\r\n                                            const val = e.currentTarget.value.trim();\r\n                                            if (val) {\r\n                                                handleNavigateLocal(val, 'Manual Folder');\r\n                                                setError(null);\r\n                                            }\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <button\r\n                                    onClick={() => window.location.reload()}\r\n                                    className=\"px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-white transition-colors border border-white/10\"\r\n                                >\r\n                                    Retry\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"text-xs text-zinc-600\">\r\n                                If auto-discovery fails, paste a Folder ID from your WorkDrive URL (the long alphanumeric string).\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                ) : loading ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-zinc-500 gap-4\">\r\n                        <Loader2 className=\"w-8 h-8 animate-spin text-orange-500\" />\r\n                        <span className=\"text-sm font-medium\">Loading your files...</span>\r\n                    </div>\r\n                ) : filteredFiles.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-zinc-500 gap-6\">\r\n                        <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-white/5 to-transparent flex items-center justify-center border border-white/5 shadow-inner\">\r\n                            <FolderPlus className=\"w-10 h-10 opacity-30\" />\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            <p className=\"text-lg font-medium text-white mb-1\">This folder is empty</p>\r\n                            <p className=\"text-sm opacity-50\">Upload files to get started</p>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className={cn(\r\n                        \"grid gap-4\",\r\n                        viewMode === 'grid' ? \"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6\" : \"grid-cols-1\"\r\n                    )}>\r\n                        <AnimatePresence mode='popLayout'>\r\n                            {filteredFiles.map((file) => (\r\n                                <FileCard\r\n                                    key={file.id}\r\n                                    file={file}\r\n                                    viewMode={viewMode}\r\n                                    onNavigate={(id) => handleNavigateLocal(id, file.attributes.name)}\r\n                                    onDownload={handleDownload}\r\n                                />\r\n                            ))}\r\n                        </AnimatePresence>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\FairplatzAIWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used.","line":4,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5713,5716],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5713,5716],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":309,"column":49,"nodeType":"JSXOpeningElement","endLine":309,"endColumn":142}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Send, Sparkles, Bot, Loader2, X, MessageSquare, ChevronRight } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { createClient } from '@/lib/supabase';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\n\r\ninterface Message {\r\n    id: string;\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n    timestamp: Date;\r\n}\r\n\r\nconst TIPS = [\r\n    \"LetΓÇÖs get started.\",\r\n    \"IΓÇÖm ready when you are.\",\r\n    \"Tap to explore.\",\r\n    \"Your assistant is here.\",\r\n    \"Try something new.\",\r\n    \"LetΓÇÖs make it easy.\",\r\n    \"Here to help.\",\r\n    \"LetΓÇÖs do magic Γ£¿\",\r\n    \"Ask away.\",\r\n    \"IΓÇÖve got your back.\",\r\n    \"Instant assistance.\",\r\n    \"One tap. Endless help.\",\r\n    \"Always ready.\",\r\n    \"Your smart sidekick.\",\r\n    \"Powered up and ready.\",\r\n    \"Surprise me ≡ƒæÇ\",\r\n    \"WhatΓÇÖs on your mind?\",\r\n    \"LetΓÇÖs create something.\",\r\n    \"Hello, human ≡ƒÿä\",\r\n    \"Try me!\",\r\n    \"LetΓÇÖs make things happen.\",\r\n    \"IΓÇÖm all earsΓÇª metaphorically.\",\r\n    \"Your intelligent helper.\",\r\n    \"Smarter workflows start here.\",\r\n    \"Efficiency mode: ON.\",\r\n    \"LetΓÇÖs simplify your day.\",\r\n    \"Unlock quick insights.\",\r\n    \"Your productivity booster.\",\r\n    \"Ready.\",\r\n    \"Go.\",\r\n    \"Start.\",\r\n    \"LetΓÇÖs begin.\",\r\n    \"Activate.\",\r\n    \"Explore.\",\r\n    \"Next step.\"\r\n];\r\n\r\nexport const FairplatzAIWidget: React.FC = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        {\r\n            id: '1',\r\n            role: 'assistant',\r\n            content: 'Hello! I am **Fairplatz AI**. How can I help you today?',\r\n            timestamp: new Date(),\r\n        }\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const [userProfileUrl, setUserProfileUrl] = useState<string | null>(null);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Widget specific state\r\n    const [showTip, setShowTip] = useState(false);\r\n    const [currentTip, setCurrentTip] = useState(TIPS[0]);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const supabase = createClient();\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                const { data: userData } = await supabase\r\n                    .from('users')\r\n                    .select('name, profile_url')\r\n                    .eq('uid', user.id)\r\n                    .single();\r\n\r\n                if (userData) {\r\n                    setUserName(userData.name || 'User');\r\n                    setUserProfileUrl(userData.profile_url || null);\r\n                }\r\n            }\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    // Random tip logic with variable timing\r\n    useEffect(() => {\r\n        let timeoutId: NodeJS.Timeout;\r\n\r\n        const scheduleNextTip = () => {\r\n            // Random delay between 15s and 45s\r\n            const delay = Math.floor(Math.random() * 30000) + 15000;\r\n\r\n            timeoutId = setTimeout(() => {\r\n                if (!isOpen) {\r\n                    const randomTip = TIPS[Math.floor(Math.random() * TIPS.length)];\r\n                    setCurrentTip(randomTip);\r\n                    setShowTip(true);\r\n\r\n                    // Hide after 5s\r\n                    setTimeout(() => {\r\n                        setShowTip(false);\r\n                        scheduleNextTip(); // Schedule next one after hiding\r\n                    }, 5000);\r\n                } else {\r\n                    scheduleNextTip(); // Retry later if open\r\n                }\r\n            }, delay);\r\n        };\r\n\r\n        scheduleNextTip();\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [isOpen]);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            scrollToBottom();\r\n        }\r\n    }, [messages, isOpen]);\r\n\r\n    const getInitials = (name: string) => {\r\n        return name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase() || 'U';\r\n    };\r\n\r\n    const handleSend = async () => {\r\n        if (!input.trim() || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            id: Date.now().toString(),\r\n            role: 'user',\r\n            content: input.trim(),\r\n            timestamp: new Date(),\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        const messageText = input.trim();\r\n        setInput('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const history = messages.slice(-10).map(msg => ({\r\n                role: msg.role,\r\n                content: msg.content,\r\n            }));\r\n\r\n            const response = await fetch('/api/gemini', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: messageText,\r\n                    history,\r\n                    userName\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to get response');\r\n            }\r\n\r\n            const assistantMessage: Message = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'assistant',\r\n                content: data.response,\r\n                timestamp: new Date(),\r\n            };\r\n\r\n            setMessages(prev => [...prev, assistantMessage]);\r\n        } catch (error: any) {\r\n            console.error('AI Error:', error);\r\n            const errorMessage: Message = {\r\n                id: (Date.now() + 1).toString(),\r\n                role: 'assistant',\r\n                content: `Sorry, I encountered an error. Please try again.`,\r\n                timestamp: new Date(),\r\n            };\r\n            setMessages(prev => [...prev, errorMessage]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSend();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Floating Trigger Widget */}\r\n            <div className=\"fixed bottom-6 right-6 z-50 flex items-center gap-4\">\r\n                {/* Tip Bubble */}\r\n                <AnimatePresence>\r\n                    {showTip && !isOpen && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, x: 20, scale: 0.9 }}\r\n                            animate={{ opacity: 1, x: 0, scale: 1 }}\r\n                            exit={{ opacity: 0, x: 10, scale: 0.9 }}\r\n                            className=\"bg-white text-zinc-900 px-4 py-2 rounded-xl shadow-xl border border-zinc-200 text-sm font-medium relative hidden md:block\"\r\n                        >\r\n                            {currentTip}\r\n                            <div className=\"absolute top-1/2 -right-1 w-2 h-2 bg-white transform -translate-y-1/2 rotate-45 border-t border-r border-zinc-200\" />\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Main Button */}\r\n                <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    onClick={() => setIsOpen(true)}\r\n                    className=\"relative w-14 h-14 rounded-2xl bg-gradient-to-br from-orange-500 to-red-600 shadow-2xl shadow-orange-500/30 flex items-center justify-center group overflow-hidden border border-white/10\"\r\n                >\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent\" />\r\n                    {isOpen ? (\r\n                        <div className=\"w-full h-full bg-zinc-950 flex items-center justify-center\">\r\n                            <ChevronRight className=\"w-6 h-6 text-zinc-400\" />\r\n                        </div>\r\n\r\n                    ) : (\r\n                        <>\r\n                            {/* Waving Effect */}\r\n                            <motion.div\r\n                                animate={{ rotate: [0, -10, 10, -10, 10, 0] }}\r\n                                transition={{ repeat: Infinity, repeatDelay: 5, duration: 2 }}\r\n                            >\r\n                                <Sparkles className=\"w-7 h-7 text-white drop-shadow-md\" />\r\n                            </motion.div>\r\n                            {/* Pulse Ring */}\r\n                            <div className=\"absolute inset-0 rounded-2xl border-2 border-white/20 animate-ping opacity-20\" />\r\n                        </>\r\n                    )}\r\n                </motion.button>\r\n            </div>\r\n\r\n            {/* Chat Side Drawer */}\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <>\r\n                        {/* Backdrop */}\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            onClick={() => setIsOpen(false)}\r\n                            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40\"\r\n                        />\r\n\r\n                        {/* Slide-over Panel */}\r\n                        <motion.div\r\n                            initial={{ x: '100%' }}\r\n                            animate={{ x: 0 }}\r\n                            exit={{ x: '100%' }}\r\n                            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\r\n                            className=\"fixed top-0 right-0 bottom-0 w-full md:w-[500px] lg:w-[600px] bg-zinc-950 shadow-2xl border-l border-white/10 z-50 flex flex-col\"\r\n                        >\r\n                            {/* Header */}\r\n                            <div className=\"flex items-center justify-between px-6 py-5 border-b border-white/5 bg-zinc-950/50 backdrop-blur-md\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/20\">\r\n                                        <Bot className=\"w-5 h-5 text-white\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-white font-semibold tracking-wide\">Fairplatz AI</h3>\r\n                                        <p className=\"text-xs text-zinc-500 font-medium\">Marketing Assistant</p>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => setIsOpen(false)}\r\n                                    className=\"p-2 rounded-lg hover:bg-white/5 text-zinc-400 hover:text-white transition-colors\"\r\n                                >\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Messages */}\r\n                            <div className=\"flex-1 overflow-y-auto px-6 py-6 space-y-6 scroll-smooth bg-zinc-950\" id=\"chat-container\">\r\n                                {messages.map((message) => (\r\n                                    <motion.div\r\n                                        key={message.id}\r\n                                        initial={{ opacity: 0, y: 10 }}\r\n                                        animate={{ opacity: 1, y: 0 }}\r\n                                        className={`flex gap-4 ${message.role === 'user' ? 'flex-row-reverse' : ''}`}\r\n                                    >\r\n                                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 shadow-md ${message.role === 'assistant'\r\n                                            ? 'bg-gradient-to-br from-orange-500 to-red-600'\r\n                                            : 'bg-zinc-800'\r\n                                            }`}>\r\n                                            {message.role === 'assistant' ? (\r\n                                                <Sparkles className=\"w-4 h-4 text-white\" />\r\n                                            ) : userProfileUrl ? (\r\n                                                <img src={userProfileUrl} alt={userName} className=\"w-full h-full rounded-lg object-cover\" />\r\n                                            ) : (\r\n                                                <span className=\"text-xs font-bold text-white tracking-wider\">{getInitials(userName)}</span>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className={`max-w-[85%] group`}>\r\n                                            <div className=\"flex items-center gap-2 mb-1 opacity-60\">\r\n                                                <span className={`text-[10px] font-medium uppercase tracking-wider ${message.role === 'user' ? 'ml-auto' : ''}`}>\r\n                                                    {message.role === 'assistant' ? 'Fairplatz AI' : 'You'}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div\r\n                                                className={`p-4 rounded-2xl text-sm leading-7 shadow-sm ${message.role === 'assistant'\r\n                                                    ? 'bg-zinc-900 text-zinc-100 border border-white/5 rounded-tl-sm'\r\n                                                    : 'bg-orange-600 text-white rounded-tr-sm shadow-orange-500/10'\r\n                                                    }`}\r\n                                            >\r\n                                                {message.role === 'assistant' ? (\r\n                                                    <div className=\"prose prose-invert prose-sm max-w-none prose-p:my-2 prose-headings:text-zinc-100 prose-strong:text-white prose-ul:my-2 prose-li:my-0.5\">\r\n                                                        <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n                                                            {message.content}\r\n                                                        </ReactMarkdown>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <p className=\"whitespace-pre-wrap font-medium\">{message.content}</p>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n\r\n                                {isLoading && (\r\n                                    <motion.div\r\n                                        initial={{ opacity: 0, y: 10 }}\r\n                                        animate={{ opacity: 1, y: 0 }}\r\n                                        className=\"flex gap-4\"\r\n                                    >\r\n                                        <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shrink-0 shadow-lg shadow-orange-500/20\">\r\n                                            <Sparkles className=\"w-4 h-4 text-white\" />\r\n                                        </div>\r\n                                        <div className=\"bg-zinc-900 border border-white/5 rounded-2xl rounded-tl-sm p-4 flex items-center gap-3\">\r\n                                            <Loader2 className=\"w-4 h-4 text-orange-500 animate-spin\" />\r\n                                            <span className=\"text-xs text-zinc-500 font-mono animate-pulse\">Processing...</span>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                )}\r\n                                <div ref={messagesEndRef} />\r\n                            </div>\r\n\r\n                            {/* Input Area */}\r\n                            <div className=\"shrink-0 p-5 bg-zinc-950/80 backdrop-blur-md border-t border-white/5\">\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"absolute -inset-0.5 bg-gradient-to-r from-orange-500/20 to-red-600/20 rounded-xl blur opacity-0 group-focus-within:opacity-100 transition duration-500\" />\r\n                                    <div className=\"relative flex items-end gap-2 bg-black/40 border border-white/10 rounded-xl p-2 focus-within:border-orange-500/50 focus-within:bg-black/60 transition-all shadow-xl\">\r\n                                        <textarea\r\n                                            value={input}\r\n                                            onChange={(e) => setInput(e.target.value)}\r\n                                            onKeyDown={handleKeyDown}\r\n                                            placeholder=\"Ask anything...\"\r\n                                            rows={1}\r\n                                            className=\"flex-1 bg-transparent text-white text-sm placeholder:text-zinc-600 resize-none focus:outline-none py-2.5 px-3 max-h-32 min-h-[44px]\"\r\n                                            style={{ height: 'auto' }}\r\n                                            onInput={(e) => {\r\n                                                const target = e.target as HTMLTextAreaElement;\r\n                                                target.style.height = 'auto';\r\n                                                target.style.height = `${Math.min(target.scrollHeight, 128)}px`;\r\n                                            }}\r\n                                        />\r\n                                        <button\r\n                                            onClick={handleSend}\r\n                                            disabled={!input.trim() || isLoading}\r\n                                            className=\"shrink-0 w-10 h-10 rounded-lg bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 flex items-center justify-center text-white shadow-lg shadow-orange-900/20 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none hover:scale-105 active:scale-95\"\r\n                                        >\r\n                                            <Send className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <p className=\"text-center text-[10px] text-zinc-700 mt-3 font-medium tracking-wide\">\r\n                                    Fairplatz AI may produce inaccurate information.\r\n                                </p>\r\n                            </div>\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\LeadDetailModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":2,"column":166,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":170},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[816,819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[816,819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":48,"column":13,"nodeType":"JSXOpeningElement","endLine":53,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'localLead.comments'. Either include it or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setLocalComments' needs the current value of 'localLead.comments'.","line":116,"column":8,"nodeType":"ArrayExpression","endLine":116,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [localLead.comments, localLead.id, localLead.isSaved]","fix":{"range":[4446,4481],"text":"[localLead.comments, localLead.id, localLead.isSaved]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getEmailStatusColor' is assigned a value but never used.","line":150,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":150,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":295,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13132,13135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13132,13135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":297,"column":49,"nodeType":"JSXOpeningElement","endLine":297,"endColumn":166},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13358,13361],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13358,13361],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":554,"column":77,"nodeType":"JSXOpeningElement","endLine":554,"endColumn":175},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":630,"column":101,"nodeType":"JSXOpeningElement","endLine":630,"endColumn":195},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":690,"column":65,"nodeType":"JSXOpeningElement","endLine":690,"endColumn":169}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { X, Linkedin, Mail, Phone, Building2, MapPin, Check, Shield, Copy, Send, Trash2, ChevronDown, ChevronUp, MessageSquare, Loader2, CheckCircle2, ExternalLink, User } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { formatDistanceToNow, format, isBefore, subHours } from 'date-fns';\r\nimport { databaseService, Comment, SavedPerson } from '@/services/databaseService';\r\nimport { createClient } from '@/lib/supabase';\r\nimport { getBrandColor } from '@/lib/utils';\r\n\r\ninterface LeadDetailModalProps {\r\n    lead: SavedPerson & { image?: string; isSaved?: boolean; saved_by?: string; saved_by_profile_url?: string };\r\n    onClose: () => void;\r\n    onUnlock?: (lead: SavedPerson, type: 'email' | 'phone') => Promise<any>;\r\n}\r\n\r\n// Helper for date formatting\r\nconst formatCommentDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '';\r\n\r\n    const now = new Date();\r\n    // If older than 24 hours, show absolute date\r\n    if (isBefore(date, subHours(now, 24))) {\r\n        return format(date, 'MMM d, yyyy h:mm a');\r\n    }\r\n\r\n    // Custom \"Just now\" for very recent\r\n    const diffInSeconds = (now.getTime() - date.getTime()) / 1000;\r\n    if (diffInSeconds < 60) {\r\n        return 'Just now';\r\n    }\r\n\r\n    return formatDistanceToNow(date, { addSuffix: true });\r\n};\r\n\r\nconst Avatar = ({ src, alt, name, className }: { src?: string, alt: string, name: string, className?: string }) => {\r\n    const [imageError, setImageError] = useState(false);\r\n\r\n    // Check if we have a valid image URL\r\n    const hasValidSrc = src && src.trim() !== '' && !imageError;\r\n\r\n    // Generate initials for fallback\r\n    const initials = name\r\n        ? name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase()\r\n        : 'U';\r\n\r\n    if (hasValidSrc) {\r\n        return (\r\n            <img\r\n                src={src}\r\n                alt={alt}\r\n                className={className}\r\n                onError={() => setImageError(true)}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`${className} flex items-center justify-center bg-orange-500 text-white font-bold`}>\r\n            {initials}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const LeadDetailModal: React.FC<LeadDetailModalProps> = ({ lead, onClose, onUnlock }) => {\r\n    const [localLead, setLocalLead] = useState(lead);\r\n    const [activeTab, setActiveTab] = useState<'overview' | 'comments'>('overview');\r\n    const [isUnlockingEmail, setIsUnlockingEmail] = useState(false);\r\n    const [isUnlockingPhone, setIsUnlockingPhone] = useState(false);\r\n\r\n    // Comment state\r\n    const [localComments, setLocalComments] = useState<Comment[]>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [isPostingComment, setIsPostingComment] = useState(false);\r\n    const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n    const [replyingTo, setReplyingTo] = useState<{ id: string, userName: string, text: string, userProfileUrl?: string } | null>(null);\r\n    const [expandedComments, setExpandedComments] = useState<Set<string>>(new Set());\r\n    const commentsEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    const brandColor = getBrandColor(localLead?.name || 'Lead');\r\n\r\n    useEffect(() => {\r\n        setLocalLead(lead);\r\n    }, [lead]);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const supabase = createClient();\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                setCurrentUserId(user.id);\r\n            }\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Reset comments when lead changes\r\n        setLocalComments([]);\r\n        setReplyingTo(null);\r\n        setExpandedComments(new Set());\r\n\r\n        const fetchComments = async () => {\r\n            if (localLead?.id && localLead.isSaved) {\r\n                try {\r\n                    const comments = await databaseService.getPersonComments(localLead.id);\r\n                    setLocalComments(comments);\r\n                } catch (error) {\r\n                    console.error('Failed to fetch comments:', error);\r\n                }\r\n            } else if (localLead?.comments) {\r\n                setLocalComments(localLead.comments);\r\n            }\r\n        };\r\n\r\n        fetchComments();\r\n    }, [localLead?.id, localLead?.isSaved]);\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'comments') {\r\n            setTimeout(() => {\r\n                commentsEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n            }, 100);\r\n        }\r\n    }, [activeTab, localComments.length]);\r\n\r\n    if (!localLead) return null;\r\n\r\n    const isEmailLocked = !localLead.email || localLead.email === 'email_not_unlocked@domain.com' || localLead.email.includes('email_not_unlocked');\r\n    const isPhoneLocked = !localLead.phone || localLead.phone === 'N/A';\r\n\r\n    const handleUnlockClick = async (type: 'email' | 'phone') => {\r\n        if (!onUnlock) return;\r\n\r\n        if (type === 'email') setIsUnlockingEmail(true);\r\n        else setIsUnlockingPhone(true);\r\n\r\n        try {\r\n            const unlockedLead = await onUnlock(localLead, type);\r\n            if (unlockedLead) {\r\n                setLocalLead(unlockedLead);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to unlock:\", error);\r\n        } finally {\r\n            setIsUnlockingEmail(false);\r\n            setIsUnlockingPhone(false);\r\n        }\r\n    };\r\n\r\n    const getEmailStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'verified': return 'text-green-400 bg-green-500/10 border-green-500/20';\r\n            case 'likely_valid': return 'text-blue-400 bg-blue-500/10 border-blue-500/20';\r\n            default: return 'text-zinc-400 bg-zinc-500/10 border-zinc-500/20';\r\n        }\r\n    };\r\n\r\n    const getSocialLink = (url: string) => {\r\n        if (!url) return null;\r\n        return url.startsWith('http') ? url : `https://${url}`;\r\n    };\r\n\r\n    const copyToClipboard = (text: string) => {\r\n        navigator.clipboard.writeText(text);\r\n    };\r\n\r\n    // Comment Handlers\r\n    const handlePostComment = async () => {\r\n        if (!newComment.trim()) return;\r\n\r\n        setIsPostingComment(true);\r\n        try {\r\n            let updatedComments;\r\n            if (replyingTo) {\r\n                updatedComments = await databaseService.addPersonReply(localLead.id, replyingTo.id, newComment.trim());\r\n                setExpandedComments(prev => new Set(prev).add(replyingTo.id));\r\n                setReplyingTo(null);\r\n            } else {\r\n                updatedComments = await databaseService.addPersonComment(localLead.id, newComment.trim());\r\n                setTimeout(() => {\r\n                    commentsEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n                }, 100);\r\n            }\r\n            setLocalComments(updatedComments);\r\n            setNewComment('');\r\n        } catch (error) {\r\n            console.error('Failed to post comment/reply:', error);\r\n            alert('Failed to post. Please try again.');\r\n        } finally {\r\n            setIsPostingComment(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId: string) => {\r\n        if (!confirm('Are you sure you want to delete this comment?')) return;\r\n        try {\r\n            const updatedComments = await databaseService.deletePersonComment(localLead.id, commentId);\r\n            setLocalComments(updatedComments);\r\n        } catch (error) {\r\n            console.error('Failed to delete comment:', error);\r\n            alert('Failed to delete comment. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handleDeleteReply = async (commentId: string, replyId: string) => {\r\n        if (!confirm('Are you sure you want to delete this reply?')) return;\r\n        try {\r\n            const updatedComments = await databaseService.deletePersonReply(localLead.id, commentId, replyId);\r\n            setLocalComments(updatedComments);\r\n        } catch (error) {\r\n            console.error('Failed to delete reply:', error);\r\n            alert('Failed to delete reply. Please try again.');\r\n        }\r\n    };\r\n\r\n    const toggleReplies = (commentId: string) => {\r\n        setExpandedComments(prev => {\r\n            const next = new Set(prev);\r\n            if (next.has(commentId)) {\r\n                next.delete(commentId);\r\n            } else {\r\n                next.add(commentId);\r\n            }\r\n            return next;\r\n        });\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                onClick={onClose}\r\n                className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[150]\"\r\n            />\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                className=\"fixed inset-0 m-auto w-full max-w-4xl h-[90vh] bg-[#09090b] border border-white/10 rounded-3xl shadow-2xl z-[150] overflow-hidden flex flex-col\"\r\n            >\r\n                {/* Hero Header */}\r\n                <div\r\n                    className=\"relative h-64 border-b border-white/5 shrink-0 transition-colors duration-700\"\r\n                    style={{ background: `linear-gradient(135deg, #09090b 0%, #000000 40%, ${brandColor}40 100%)` }}\r\n                >\r\n                    <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20\" />\r\n\r\n                    {/* Close Button */}\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"absolute top-6 right-6 p-2 bg-black/50 hover:bg-white/10 rounded-full text-white/70 hover:text-white transition-colors border border-white/5 backdrop-blur-md z-20\"\r\n                    >\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n\r\n                    {/* Content Container */}\r\n                    <div className=\"absolute bottom-0 left-0 w-full p-8 flex items-end gap-8 bg-gradient-to-t from-[#09090b] to-transparent\">\r\n                        <div className=\"w-32 h-32 rounded-2xl bg-white p-1 border-4 border-[#09090b] shadow-2xl flex items-center justify-center overflow-hidden shrink-0 relative z-10\">\r\n                            <Avatar\r\n                                src={localLead.photo_url || localLead.image}\r\n                                name={localLead.name || ''}\r\n                                className=\"w-full h-full object-cover rounded-xl text-4xl\"\r\n                                alt={localLead.name || ''}\r\n                            />\r\n                            {localLead.email_status === 'verified' && (\r\n                                <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-[#09090b]\">\r\n                                    <Check className=\"w-3.5 h-3.5 text-white\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"mb-2 flex-1\">\r\n                            <div className=\"flex items-center gap-4 mb-2\">\r\n                                <h2 className=\"text-4xl font-bold text-white tracking-tight\">{localLead.name}</h2>\r\n                                {localLead.isSaved && (\r\n                                    <span className=\"bg-green-500/10 border border-green-500/20 text-green-500 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1.5\">\r\n                                        <CheckCircle2 className=\"w-3.5 h-3.5\" /> Saved\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <p className=\"text-orange-500 text-lg font-bold truncate mb-2\">{localLead.title}</p>\r\n                            <div className=\"flex flex-wrap items-center gap-4 text-sm\">\r\n                                <span className=\"flex items-center gap-1.5 text-zinc-400\">\r\n                                    <Building2 className=\"w-4 h-4 text-zinc-500\" />\r\n                                    {localLead.company || localLead.organization_name || 'Unknown Company'}\r\n                                </span>\r\n                                {localLead.location && (\r\n                                    <span className=\"flex items-center gap-1.5 text-zinc-400\">\r\n                                        <MapPin className=\"w-4 h-4 text-zinc-500\" /> {localLead.location}\r\n                                    </span>\r\n                                )}\r\n                                {localLead.saved_by && (\r\n                                    <span className=\"flex items-center gap-1.5 text-zinc-500\">\r\n                                        {(localLead as any).saved_by_profile_url ? (\r\n                                            <div className=\"w-4 h-4 rounded-full overflow-hidden border border-zinc-700\">\r\n                                                <img src={(localLead as any).saved_by_profile_url} alt={localLead.saved_by} className=\"w-full h-full object-cover\" />\r\n                                            </div>\r\n                                        ) : (\r\n                                            <span className=\"w-1 h-1 rounded-full bg-zinc-600\" />\r\n                                        )}\r\n                                        Saved by {localLead.saved_by}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Quick Actions */}\r\n                        <div className=\"flex gap-2 mb-2\">\r\n                            {localLead.linkedin && (\r\n                                <a\r\n                                    href={getSocialLink(localLead.linkedin) || '#'}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                    className=\"p-3 bg-white/5 border border-white/5 rounded-xl text-zinc-400 hover:text-white hover:bg-white/10 transition-all\"\r\n                                >\r\n                                    <Linkedin className=\"w-5 h-5\" />\r\n                                </a>\r\n                            )}\r\n                            {!isEmailLocked && localLead.email && (\r\n                                <a\r\n                                    href={`mailto:${localLead.email}`}\r\n                                    className=\"p-3 bg-white/5 border border-white/5 rounded-xl text-zinc-400 hover:text-white hover:bg-white/10 transition-all\"\r\n                                >\r\n                                    <Mail className=\"w-5 h-5\" />\r\n                                </a>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Tab Navigation */}\r\n                <div className=\"px-8 pt-6 bg-[#09090b]\">\r\n                    <div className=\"flex items-center gap-6 border-b border-white/5\">\r\n                        <button\r\n                            onClick={() => setActiveTab('overview')}\r\n                            className={`pb-4 text-sm font-bold transition-all relative ${activeTab === 'overview' ? 'text-white' : 'text-zinc-500 hover:text-zinc-300'}`}\r\n                        >\r\n                            Overview\r\n                            {activeTab === 'overview' && (\r\n                                <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-white rounded-full\" />\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('comments')}\r\n                            className={`pb-4 text-sm font-bold transition-all relative ${activeTab === 'comments' ? 'text-white' : 'text-zinc-500 hover:text-zinc-300'}`}\r\n                        >\r\n                            Comments\r\n                            {localComments.length > 0 && (\r\n                                <span className=\"ml-2 px-1.5 py-0.5 rounded-full bg-white/10 text-[10px] text-zinc-400\">\r\n                                    {localComments.length}\r\n                                </span>\r\n                            )}\r\n                            {activeTab === 'comments' && (\r\n                                <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-white rounded-full\" />\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content Area */}\r\n                <div className=\"flex-1 min-h-0 bg-[#09090b] flex flex-col relative\">\r\n                    <AnimatePresence mode=\"wait\">\r\n                        {activeTab === 'overview' ? (\r\n                            <motion.div\r\n                                key=\"overview\"\r\n                                initial={{ opacity: 0, x: -20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: 20 }}\r\n                                transition={{ duration: 0.2 }}\r\n                                className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\"\r\n                            >\r\n                                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                                    {/* Main Info Column */}\r\n                                    <div className=\"lg:col-span-2 space-y-10\">\r\n                                        <section>\r\n                                            <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4 flex items-center gap-2\">\r\n                                                <span className=\"w-8 h-[1px] bg-zinc-800\"></span> About\r\n                                            </h3>\r\n                                            <p className=\"text-zinc-300 leading-relaxed text-base\">\r\n                                                {localLead.headline || localLead.description || 'No description available for this person.'}\r\n                                            </p>\r\n                                        </section>\r\n\r\n                                        {/* Work Info */}\r\n                                        <section>\r\n                                            <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4 flex items-center gap-2\">\r\n                                                <span className=\"w-8 h-[1px] bg-zinc-800\"></span> Work\r\n                                            </h3>\r\n                                            <div className=\"bg-zinc-900/50 border border-white/5 rounded-xl p-6 space-y-6\">\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <div className=\"w-12 h-12 rounded-xl bg-orange-500/10 border border-orange-500/20 flex items-center justify-center shrink-0\">\r\n                                                        <Building2 className=\"w-6 h-6 text-orange-500\" />\r\n                                                    </div>\r\n                                                    <div className=\"min-w-0\">\r\n                                                        <p className=\"text-lg font-bold text-white truncate\">{localLead.company || localLead.organization_name}</p>\r\n                                                        {(localLead.website || localLead.company_website || localLead.organization_domain) && (\r\n                                                            <a\r\n                                                                href={getSocialLink(localLead.website || localLead.company_website || localLead.organization_domain || '') || '#'}\r\n                                                                target=\"_blank\"\r\n                                                                rel=\"noreferrer\"\r\n                                                                className=\"text-sm text-zinc-500 hover:text-orange-400 flex items-center gap-1 mt-0.5 transition-colors\"\r\n                                                            >\r\n                                                                {localLead.website || localLead.company_website || localLead.organization_domain}\r\n                                                                <ExternalLink className=\"w-3 h-3\" />\r\n                                                            </a>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex flex-wrap gap-2\">\r\n                                                    {localLead.seniority && (\r\n                                                        <span className=\"text-xs font-bold px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg border border-blue-500/20 uppercase tracking-wide\">\r\n                                                            {localLead.seniority}\r\n                                                        </span>\r\n                                                    )}\r\n                                                    {localLead.departments?.map((dept: string, i: number) => (\r\n                                                        <span key={i} className=\"text-xs font-bold px-3 py-1.5 bg-purple-500/10 text-purple-400 rounded-lg border border-purple-500/20 uppercase tracking-wide\">\r\n                                                            {dept}\r\n                                                        </span>\r\n                                                    ))}\r\n                                                    {localLead.company_industry && (\r\n                                                        <span className=\"text-xs font-bold px-3 py-1.5 bg-zinc-800 text-zinc-400 rounded-lg border border-white/5 uppercase tracking-wide\">\r\n                                                            {localLead.company_industry}\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </section>\r\n                                    </div>\r\n\r\n                                    {/* Sidebar Info Column */}\r\n                                    <div className=\"space-y-6\">\r\n                                        <div className=\"bg-zinc-900/50 rounded-2xl p-6 border border-white/5 space-y-5\">\r\n                                            <h3 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Contact Details</h3>\r\n\r\n                                            {isEmailLocked && onUnlock && (\r\n                                                <div className=\"bg-zinc-900 border border-white/5 rounded-xl p-4 flex flex-col gap-3\">\r\n                                                    <div className=\"flex items-center gap-2 opacity-50\">\r\n                                                        <Mail className=\"w-4 h-4 text-zinc-500\" />\r\n                                                        <span className=\"text-xs text-zinc-400 italic\">Email Locked</span>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => handleUnlockClick('email')}\r\n                                                        disabled={isUnlockingEmail}\r\n                                                        className=\"w-full py-2 bg-orange-500 hover:bg-orange-600 text-white text-xs font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-orange-500/20\"\r\n                                                    >\r\n                                                        {isUnlockingEmail ? (\r\n                                                            <>\r\n                                                                <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                                                Unlocking Email...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <>\r\n                                                                <Shield className=\"w-3.5 h-3.5\" />\r\n                                                                Access Email\r\n                                                            </>\r\n                                                        )}\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {isPhoneLocked && onUnlock && (\r\n                                                <div className=\"bg-zinc-900 border border-white/5 rounded-xl p-4 flex flex-col gap-3\">\r\n                                                    <div className=\"flex items-center gap-2 opacity-50\">\r\n                                                        <Phone className=\"w-4 h-4 text-zinc-500\" />\r\n                                                        <span className=\"text-xs text-zinc-400 italic\">Phone Locked</span>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => handleUnlockClick('phone')}\r\n                                                        disabled={isUnlockingPhone}\r\n                                                        className=\"w-full py-2 bg-blue-500 hover:bg-blue-600 text-white text-xs font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-500/20\"\r\n                                                    >\r\n                                                        {isUnlockingPhone ? (\r\n                                                            <>\r\n                                                                <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                                                Unlocking Phone...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <>\r\n                                                                <Shield className=\"w-3.5 h-3.5\" />\r\n                                                                Access Phone\r\n                                                            </>\r\n                                                        )}\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {!isEmailLocked && localLead.email && (\r\n                                                <div className=\"group flex items-center justify-between p-2 -mx-2 hover:bg-white/5 rounded-lg transition-colors\">\r\n                                                    <div className=\"flex items-center gap-3 min-w-0\">\r\n                                                        <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                                            <Mail className=\"w-4 h-4 text-zinc-500\" />\r\n                                                        </div>\r\n                                                        <div className=\"flex flex-col min-w-0\">\r\n                                                            <span className=\"text-sm text-zinc-300 truncate font-medium\">{localLead.email}</span>\r\n                                                            {localLead.email_status && (\r\n                                                                <span className={`text-[10px] font-bold uppercase tracking-wide ${localLead.email_status === 'verified' ? 'text-green-400' : 'text-zinc-500'}`}>\r\n                                                                    {localLead.email_status === 'verified' ? 'Verified' : localLead.email_status}\r\n                                                                </span>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => copyToClipboard(localLead.email || '')}\r\n                                                        className=\"text-zinc-600 hover:text-white opacity-0 group-hover:opacity-100 transition-all p-2\"\r\n                                                    >\r\n                                                        <Copy className=\"w-3.5 h-3.5\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            {!isPhoneLocked && localLead.phone && (\r\n                                                <div className=\"group flex items-center justify-between p-2 -mx-2 hover:bg-white/5 rounded-lg transition-colors\">\r\n                                                    <div className=\"flex items-center gap-3 min-w-0\">\r\n                                                        <div className=\"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5\">\r\n                                                            <Phone className=\"w-4 h-4 text-zinc-500\" />\r\n                                                        </div>\r\n                                                        <span className=\"text-sm text-zinc-300 font-medium\">{localLead.phone}</span>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => copyToClipboard(localLead.phone)}\r\n                                                        className=\"text-zinc-600 hover:text-white opacity-0 group-hover:opacity-100 transition-all p-2\"\r\n                                                    >\r\n                                                        <Copy className=\"w-3.5 h-3.5\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ) : (\r\n                            <motion.div\r\n                                key=\"comments\"\r\n                                initial={{ opacity: 0, x: 20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                exit={{ opacity: 0, x: -20 }}\r\n                                transition={{ duration: 0.2 }}\r\n                                className=\"flex-1 flex flex-col min-h-0\"\r\n                            >\r\n                                {/* Comments List */}\r\n                                <div className=\"flex-1 overflow-y-auto p-8 custom-scrollbar\">\r\n                                    <div className=\"max-w-3xl mx-auto space-y-8\">\r\n                                        {localComments.length > 0 ? (\r\n                                            <>\r\n                                                {localComments.map((comment) => (\r\n                                                    <div key={comment.id} className=\"group relative\">\r\n                                                        <div className=\"pl-4 border-l-2 border-white/5 hover:border-white/10 transition-colors\">\r\n                                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                                <div className=\"flex items-center gap-3\">\r\n                                                                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center text-xs font-bold text-white shadow-inner overflow-hidden\">\r\n                                                                        {comment.userProfileUrl ? (\r\n                                                                            <img src={comment.userProfileUrl} alt={comment.userName} className=\"w-full h-full object-cover\" />\r\n                                                                        ) : (\r\n                                                                            comment.userName.substring(0, 2).toUpperCase()\r\n                                                                        )}\r\n                                                                    </div>\r\n                                                                    <div>\r\n                                                                        <span className=\"block text-sm font-bold text-white leading-none mb-1\">{comment.userName}</span>\r\n                                                                        <span className=\"text-[10px] text-zinc-500 font-medium\">\r\n                                                                            {formatCommentDate(comment.createdAt)}\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                </div>\r\n\r\n                                                                <div className=\"flex items-center gap-2\">\r\n                                                                    <button\r\n                                                                        onClick={() => setReplyingTo({ id: comment.id, userName: comment.userName, text: comment.text, userProfileUrl: comment.userProfileUrl })}\r\n                                                                        className=\"text-xs text-zinc-500 hover:text-white transition-colors opacity-0 group-hover:opacity-100\"\r\n                                                                    >\r\n                                                                        Reply\r\n                                                                    </button>\r\n                                                                    {(currentUserId === comment.uid) && (\r\n                                                                        <button\r\n                                                                            onClick={(e) => {\r\n                                                                                e.stopPropagation();\r\n                                                                                handleDeleteComment(comment.id);\r\n                                                                            }}\r\n                                                                            className=\"p-1.5 rounded-lg text-zinc-600 hover:text-red-400 hover:bg-red-400/10 transition-all\"\r\n                                                                            title=\"Delete comment\"\r\n                                                                        >\r\n                                                                            <Trash2 className=\"w-3.5 h-3.5\" />\r\n                                                                        </button>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <p className=\"text-sm text-zinc-300 leading-relaxed pl-11\">\r\n                                                                {comment.text}\r\n                                                            </p>\r\n                                                        </div>\r\n\r\n                                                        {/* Replies Section */}\r\n                                                        {comment.replies && comment.replies.length > 0 && (\r\n                                                            <div className=\"mt-2 ml-11\">\r\n                                                                {/* Toggle Button */}\r\n                                                                <button\r\n                                                                    onClick={() => toggleReplies(comment.id)}\r\n                                                                    className=\"flex items-center gap-2 text-xs font-bold text-zinc-500 hover:text-white transition-colors mb-2\"\r\n                                                                >\r\n                                                                    <div className=\"w-6 h-[1px] bg-zinc-800\"></div>\r\n                                                                    {expandedComments.has(comment.id) ? (\r\n                                                                        <>\r\n                                                                            <ChevronUp className=\"w-3 h-3\" />\r\n                                                                            Hide {comment.replies.length} replies\r\n                                                                        </>\r\n                                                                    ) : (\r\n                                                                        <>\r\n                                                                            <ChevronDown className=\"w-3 h-3\" />\r\n                                                                            View {comment.replies.length} replies\r\n                                                                        </>\r\n                                                                    )}\r\n                                                                </button>\r\n\r\n                                                                {/* Replies List */}\r\n                                                                <AnimatePresence>\r\n                                                                    {expandedComments.has(comment.id) && (\r\n                                                                        <motion.div\r\n                                                                            initial={{ opacity: 0, height: 0 }}\r\n                                                                            animate={{ opacity: 1, height: 'auto' }}\r\n                                                                            exit={{ opacity: 0, height: 0 }}\r\n                                                                            className=\"space-y-4 overflow-hidden\"\r\n                                                                        >\r\n                                                                            {comment.replies.map((reply) => (\r\n                                                                                <div key={reply.id} className=\"relative pl-4 border-l-2 border-white/5 hover:border-white/10 transition-colors group/reply\">\r\n                                                                                    <div className=\"flex justify-between items-start mb-2\">\r\n                                                                                        <div className=\"flex items-center gap-3\">\r\n                                                                                            <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center text-[10px] font-bold text-white shadow-inner overflow-hidden\">\r\n                                                                                                {reply.userProfileUrl ? (\r\n                                                                                                    <img src={reply.userProfileUrl} alt={reply.userName} className=\"w-full h-full object-cover\" />\r\n                                                                                                ) : (\r\n                                                                                                    reply.userName.substring(0, 2).toUpperCase()\r\n                                                                                                )}\r\n                                                                                            </div>\r\n                                                                                            <div>\r\n                                                                                                <span className=\"block text-xs font-bold text-white leading-none mb-1\">{reply.userName}</span>\r\n                                                                                                <span className=\"text-[10px] text-zinc-500 font-medium\">\r\n                                                                                                    {formatCommentDate(reply.createdAt)}\r\n                                                                                                </span>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n\r\n                                                                                        {(currentUserId === reply.uid) && (\r\n                                                                                            <button\r\n                                                                                                onClick={(e) => {\r\n                                                                                                    e.stopPropagation();\r\n                                                                                                    handleDeleteReply(comment.id, reply.id);\r\n                                                                                                }}\r\n                                                                                                className=\"p-1.5 rounded-lg text-zinc-600 hover:text-red-400 hover:bg-red-400/10 transition-all\"\r\n                                                                                                title=\"Delete reply\"\r\n                                                                                            >\r\n                                                                                                <Trash2 className=\"w-3 h-3\" />\r\n                                                                                            </button>\r\n                                                                                        )}\r\n                                                                                    </div>\r\n                                                                                    <p className=\"text-sm text-zinc-300 leading-relaxed pl-9\">\r\n                                                                                        {reply.text}\r\n                                                                                    </p>\r\n                                                                                </div>\r\n                                                                            ))}\r\n                                                                        </motion.div>\r\n                                                                    )}\r\n                                                                </AnimatePresence>\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                ))}\r\n                                                <div ref={commentsEndRef} />\r\n                                            </>\r\n                                        ) : (\r\n                                            <div className=\"text-center py-12\">\r\n                                                <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-3\">\r\n                                                    <MessageSquare className=\"w-5 h-5 text-zinc-600\" />\r\n                                                </div>\r\n                                                <p className=\"text-sm text-zinc-500\">No comments yet. Start the conversation!</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Fixed Input Area */}\r\n                                {localLead.isSaved && (\r\n                                    <div className=\"p-4 border-t border-white/5 bg-[#09090b] z-10\">\r\n                                        <div className=\"max-w-3xl mx-auto flex flex-col gap-3\">\r\n                                            {replyingTo && (\r\n                                                <div className=\"flex items-center justify-between bg-zinc-900/50 border border-white/5 rounded-xl p-2 px-3 mb-1\">\r\n                                                    <div className=\"flex items-center gap-3 overflow-hidden\">\r\n                                                        <div className=\"w-6 h-6 rounded-full bg-white/5 flex items-center justify-center shrink-0 overflow-hidden\">\r\n                                                            {replyingTo.userProfileUrl ? (\r\n                                                                <img src={replyingTo.userProfileUrl} alt={replyingTo.userName} className=\"w-full h-full object-cover\" />\r\n                                                            ) : (\r\n                                                                <span className=\"text-[10px] font-bold text-zinc-400\">{replyingTo.userName.substring(0, 2).toUpperCase()}</span>\r\n                                                            )}\r\n                                                        </div>\r\n                                                        <div className=\"flex flex-col min-w-0\">\r\n                                                            <span className=\"text-[10px] font-bold text-zinc-400\">Replying to {replyingTo.userName}</span>\r\n                                                            <span className=\"text-[10px] text-zinc-600 truncate max-w-[300px]\">{replyingTo.text}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => setReplyingTo(null)}\r\n                                                        className=\"p-1 rounded-lg hover:bg-white/10 text-zinc-500 hover:text-white transition-colors\"\r\n                                                    >\r\n                                                        <X className=\"w-3 h-3\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <div\r\n                                                className=\"flex items-end gap-2 bg-zinc-900/50 border border-white/10 rounded-xl p-2 focus-within:border-[var(--brand-color)]/50 focus-within:ring-1 focus-within:ring-[var(--brand-color)]/50 transition-all\"\r\n                                                style={{ '--brand-color': brandColor } as React.CSSProperties}\r\n                                            >\r\n                                                <textarea\r\n                                                    placeholder={replyingTo ? `Reply to ${replyingTo.userName}...` : \"Add a note...\"}\r\n                                                    value={newComment}\r\n                                                    onChange={(e) => setNewComment(e.target.value)}\r\n                                                    className=\"flex-1 bg-transparent border-none focus:ring-0 p-2 text-sm text-white placeholder:text-zinc-600 resize-none min-h-[24px] max-h-[120px] leading-relaxed custom-scrollbar\"\r\n                                                    rows={1}\r\n                                                    style={{ minHeight: '24px' }}\r\n                                                    onInput={(e) => {\r\n                                                        const target = e.target as HTMLTextAreaElement;\r\n                                                        target.style.height = 'auto';\r\n                                                        target.style.height = `${Math.min(target.scrollHeight, 120)}px`;\r\n                                                    }}\r\n                                                    onKeyDown={(e) => {\r\n                                                        if (e.key === 'Enter' && !e.shiftKey) {\r\n                                                            e.preventDefault();\r\n                                                            handlePostComment();\r\n                                                        }\r\n                                                    }}\r\n                                                />\r\n                                                <button\r\n                                                    onClick={handlePostComment}\r\n                                                    disabled={!newComment.trim() || isPostingComment}\r\n                                                    className=\"shrink-0 bg-white hover:bg-zinc-200 text-black px-4 py-2 rounded-lg text-xs font-bold transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-white/5 h-[36px]\"\r\n                                                >\r\n                                                    {isPostingComment ? (\r\n                                                        <Loader2 className=\"w-3 h-3 animate-spin\" />\r\n                                                    ) : (\r\n                                                        <Send className=\"w-3 h-3\" />\r\n                                                    )}\r\n                                                    Post\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\MainSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Menu' is defined but never used.","line":2,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarChart2' is defined but never used.","line":2,"column":101,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":110},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":2,"column":112,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":120},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":136,"column":37,"nodeType":"JSXOpeningElement","endLine":136,"endColumn":119}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Search, Database, LayoutDashboard, CloudLightning, LogOut, Settings, X, Menu, CheckSquare, BarChart2, Sparkles } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { cn } from './ui/Button';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase';\r\n\r\ninterface SidebarProps {\r\n    isOpen?: boolean;\r\n    onClose?: () => void;\r\n}\r\n\r\nexport const MainSidebar: React.FC<SidebarProps> = ({ isOpen = false, onClose = () => { } }) => {\r\n    const pathname = usePathname();\r\n    const router = useRouter();\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const [userEmail, setUserEmail] = useState('');\r\n    const [userProfileUrl, setUserProfileUrl] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const supabase = createClient();\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                setUserEmail(user.email || '');\r\n\r\n                const { data: userData } = await supabase\r\n                    .from('users')\r\n                    .select('name, profile_url')\r\n                    .eq('uid', user.id)\r\n                    .single();\r\n\r\n                if (userData) {\r\n                    setUserName(userData.name || 'User');\r\n                    setUserProfileUrl(userData.profile_url || null);\r\n                }\r\n            }\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    const navItems = [\r\n        { id: 'dashboard', icon: LayoutDashboard, label: 'Dashboard', href: '/dashboard' },\r\n        { id: 'search', icon: Search, label: 'Search', href: '/search' },\r\n        { id: 'database', icon: Database, label: 'Database', href: '/database' },\r\n        { id: 'tasks', icon: CheckSquare, label: 'Tasks', href: '/tasks' },\r\n        // { id: 'ai', icon: Sparkles, label: 'Fairplatz AI', href: '/ai' }, // Removed\r\n        { id: 'zoho', icon: CloudLightning, label: 'Zoho (Legacy)', href: '/zoho' },\r\n    ];\r\n\r\n    const bottomItems = [\r\n        { id: 'settings', icon: Settings, label: 'Settings', href: '/settings' },\r\n        { id: 'logout', icon: LogOut, label: 'Logout', href: '/login' },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            {/* Mobile Backdrop */}\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden\"\r\n                    />\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Desktop Sidebar (Mini -> Expanded) */}\r\n            <div\r\n                className=\"hidden lg:block fixed inset-y-0 left-0 z-50 h-full transition-all duration-300 ease-in-out group\"\r\n                onMouseEnter={() => setIsHovered(true)}\r\n                onMouseLeave={() => setIsHovered(false)}\r\n                style={{ width: isHovered ? '18rem' : '5rem' }} // w-72 vs w-20\r\n            >\r\n                {/* Sidebar Container */}\r\n                <div\r\n                    className={cn(\r\n                        \"h-full flex flex-col bg-zinc-900/90 backdrop-blur-2xl border-r border-white/10 shadow-2xl transition-all duration-300 ease-in-out overflow-hidden\",\r\n                        \"w-full\"\r\n                    )}\r\n                >\r\n                    {/* Header */}\r\n                    <div className={cn(\"p-6 flex items-center gap-3 transition-all duration-300\", isHovered ? \"justify-start\" : \"justify-center px-2\")}>\r\n                        <div className=\"w-10 h-10 rounded-md bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/20 shrink-0\">\r\n                            <CloudLightning className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                        <div className={cn(\"transition-opacity duration-300 overflow-hidden whitespace-nowrap\", isHovered ? \"opacity-100 w-auto\" : \"opacity-0 w-0 hidden\")}>\r\n                            <h1 className=\"font-bold text-lg text-white leading-tight\">Fairplatz</h1>\r\n                            <p className=\"text-xs text-zinc-400\">Marketing Tool</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Navigation */}\r\n                    <div className=\"flex-1 flex flex-col gap-2 overflow-y-auto custom-scrollbar px-4 py-2\">\r\n                        <p className={cn(\"text-xs font-semibold text-zinc-500 mb-2 uppercase tracking-wider transition-all duration-300\", isHovered ? \"px-4 opacity-100\" : \"px-0 text-center opacity-0 hidden\")}>Menu</p>\r\n                        {navItems.map((item) => {\r\n                            const isActive = pathname.startsWith(item.href);\r\n                            return (\r\n                                <Link\r\n                                    key={item.id}\r\n                                    href={item.href}\r\n                                    className={cn(\r\n                                        \"relative w-full flex items-center gap-3 p-3 rounded-md transition-all duration-300 group/item\",\r\n                                        isActive\r\n                                            ? \"bg-gradient-to-r from-orange-600 to-orange-500 text-white shadow-lg shadow-orange-500/20\"\r\n                                            : \"text-zinc-400 hover:bg-white/5 hover:text-zinc-100\",\r\n                                        isHovered ? \"justify-start px-4\" : \"justify-center\"\r\n                                    )}\r\n                                >\r\n                                    <item.icon className={cn(\"w-5 h-5 shrink-0\", isActive ? \"text-white\" : \"text-zinc-500 group-hover/item:text-zinc-300\")} />\r\n                                    <span className={cn(\"font-medium text-sm whitespace-nowrap transition-all duration-300\", isHovered ? \"opacity-100 w-auto\" : \"opacity-0 w-0 hidden\")}>{item.label}</span>\r\n                                    {isActive && isHovered && (\r\n                                        <motion.div\r\n                                            layoutId=\"activeSidebarIndicator\"\r\n                                            className=\"absolute right-3 w-1.5 h-1.5 rounded-full bg-white\"\r\n                                        />\r\n                                    )}\r\n                                </Link>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* User Profile */}\r\n                    <div className=\"mt-auto p-4 border-t border-white/5\">\r\n                        <div className={cn(\r\n                            \"flex items-center gap-3 p-3 rounded-md bg-white/5 border border-white/5 transition-all duration-300 group/profile cursor-pointer hover:bg-white/10\",\r\n                            isHovered ? \"justify-start px-3\" : \"justify-center px-0 w-10 h-10 mx-auto\"\r\n                        )}>\r\n                            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shrink-0 shadow-lg shadow-indigo-500/20 text-white font-bold text-xs overflow-hidden\">\r\n                                {userProfileUrl ? (\r\n                                    <img src={userProfileUrl} alt={userName} className=\"w-full h-full object-cover\" />\r\n                                ) : (\r\n                                    userName.substring(0, 2).toUpperCase() || 'US'\r\n                                )}\r\n                            </div>\r\n                            <div className={cn(\"overflow-hidden transition-all duration-300\", isHovered ? \"opacity-100 w-auto\" : \"opacity-0 w-0 hidden\")}>\r\n                                <p className=\"text-sm font-semibold text-white truncate\">{userName || 'Loading...'}</p>\r\n                                <p className=\"text-xs text-zinc-400 truncate\">{userEmail || 'Loading...'}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Bottom Actions */}\r\n                    <div className=\"p-4 pt-2 flex flex-col gap-2\">\r\n                        <p className={cn(\"text-xs font-semibold text-zinc-500 mb-2 uppercase tracking-wider transition-all duration-300\", isHovered ? \"px-4 opacity-100\" : \"px-0 text-center opacity-0 hidden\")}>General</p>\r\n                        {bottomItems.map((item) => {\r\n                            if (item.id === 'logout') {\r\n                                return (\r\n                                    <button\r\n                                        key={item.id}\r\n                                        onClick={async () => {\r\n                                            const supabase = createClient();\r\n                                            await supabase.auth.signOut();\r\n                                            router.push('/login');\r\n                                            router.refresh();\r\n                                        }}\r\n                                        className={cn(\r\n                                            \"w-full flex items-center gap-3 p-3 rounded-md text-zinc-400 hover:bg-white/5 hover:text-zinc-100 transition-all duration-300\",\r\n                                            isHovered ? \"justify-start px-4\" : \"justify-center\"\r\n                                        )}\r\n                                    >\r\n                                        <item.icon className=\"w-5 h-5 shrink-0 text-zinc-500 group-hover:text-zinc-300\" />\r\n                                        <span className={cn(\"font-medium text-sm whitespace-nowrap transition-all duration-300\", isHovered ? \"opacity-100 w-auto\" : \"opacity-0 w-0 hidden\")}>{item.label}</span>\r\n                                    </button>\r\n                                );\r\n                            }\r\n                            return (\r\n                                <Link\r\n                                    key={item.id}\r\n                                    href={item.href}\r\n                                    className={cn(\r\n                                        \"w-full flex items-center gap-3 p-3 rounded-md text-zinc-400 hover:bg-white/5 hover:text-zinc-100 transition-all duration-300\",\r\n                                        isHovered ? \"justify-start px-4\" : \"justify-center\"\r\n                                    )}\r\n                                >\r\n                                    <item.icon className=\"w-5 h-5 shrink-0 text-zinc-500 group-hover:text-zinc-300\" />\r\n                                    <span className={cn(\"font-medium text-sm whitespace-nowrap transition-all duration-300\", isHovered ? \"opacity-100 w-auto\" : \"opacity-0 w-0 hidden\")}>{item.label}</span>\r\n                                </Link>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Mobile Sidebar (Drawer) */}\r\n            <div\r\n                className={cn(\r\n                    \"fixed inset-y-0 left-0 z-50 w-72 h-full flex flex-col bg-zinc-900/95 backdrop-blur-2xl border-r border-white/10 shadow-2xl transition-transform duration-300 ease-in-out lg:hidden\",\r\n                    isOpen ? \"translate-x-0\" : \"-translate-x-full\"\r\n                )}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"p-6 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-md bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/20\">\r\n                            <CloudLightning className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"font-bold text-lg text-white leading-tight\">Fairplatz</h1>\r\n                            <p className=\"text-xs text-zinc-400\">Marketing Tool</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-lg text-zinc-400\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <div className=\"flex-1 flex flex-col gap-2 overflow-y-auto custom-scrollbar px-4 py-2\">\r\n                    <p className=\"text-xs font-semibold text-zinc-500 px-4 mb-2 uppercase tracking-wider\">Menu</p>\r\n                    {navItems.map((item) => {\r\n                        const isActive = pathname.startsWith(item.href);\r\n                        return (\r\n                            <Link\r\n                                key={item.id}\r\n                                href={item.href}\r\n                                onClick={onClose}\r\n                                className={cn(\r\n                                    \"relative w-full flex items-center gap-3 px-4 py-3.5 rounded-md transition-all duration-300 group text-left\",\r\n                                    isActive\r\n                                        ? \"bg-gradient-to-r from-orange-600 to-orange-500 text-white shadow-lg shadow-orange-500/20\"\r\n                                        : \"text-zinc-400 hover:bg-white/5 hover:text-zinc-100\"\r\n                                )}\r\n                            >\r\n                                <item.icon className={cn(\"w-5 h-5\", isActive ? \"text-white\" : \"text-zinc-500 group-hover:text-zinc-300\")} />\r\n                                <span className=\"font-medium text-sm\">{item.label}</span>\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                {/* User Profile */}\r\n                <div className=\"mt-auto p-4 border-t border-white/5\">\r\n                    <div className=\"flex items-center gap-3 p-3 rounded-md bg-white/5 border border-white/5\">\r\n                        <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shrink-0 shadow-lg shadow-indigo-500/20 text-white font-bold text-sm\">\r\n                            HR\r\n                        </div>\r\n                        <div className=\"overflow-hidden\">\r\n                            <p className=\"text-sm font-semibold text-white truncate\">Hadi Rasal</p>\r\n                            <p className=\"text-xs text-zinc-400 truncate\">hadi@fairplatz.com</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Bottom Actions */}\r\n                <div className=\"p-4 pt-2 flex flex-col gap-2\">\r\n                    <p className=\"text-xs font-semibold text-zinc-500 px-4 mb-2 uppercase tracking-wider\">General</p>\r\n                    {bottomItems.map((item) => (\r\n                        <button key={item.id} className=\"w-full flex items-center gap-3 px-4 py-3.5 rounded-md text-zinc-400 hover:bg-white/5 hover:text-zinc-100 transition-colors text-left\">\r\n                            <item.icon className=\"w-5 h-5\" />\r\n                            <span className=\"font-medium text-sm\">{item.label}</span>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Onboarding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ProfileCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":45,"column":13,"nodeType":"JSXOpeningElement","endLine":50,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Building2, MapPin, Mail, Phone, Check, Linkedin } from 'lucide-react';\r\n\r\ninterface Lead {\r\n    id: string;\r\n    name: string;\r\n    title?: string;\r\n    company?: string;\r\n    organization_name?: string;\r\n    website?: string;\r\n    location?: string;\r\n    email?: string;\r\n    phone?: string;\r\n    linkedin?: string;\r\n    image?: string;\r\n    photo_url?: string;\r\n    status?: string;\r\n    email_status?: string;\r\n    group_name?: string;\r\n    score?: number;\r\n    isSaved?: boolean;\r\n}\r\n\r\ninterface ProfileCardProps {\r\n    lead: Lead;\r\n    onAction?: (lead: Lead) => void;\r\n    actionIcon?: React.ElementType;\r\n    onClick?: () => void;\r\n    isSaved?: boolean;\r\n}\r\n\r\nconst Avatar = ({ src, alt, name, className }: { src?: string, alt: string, name: string, className?: string }) => {\r\n    const [imageError, setImageError] = useState(false);\r\n\r\n    // Check if we have a valid image URL (not empty, not null, not a placeholder)\r\n    const hasValidSrc = src && src.trim() !== '' && !imageError;\r\n\r\n    // Generate initials for fallback\r\n    const initials = name\r\n        ? name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase()\r\n        : 'U';\r\n\r\n    if (hasValidSrc) {\r\n        return (\r\n            <img\r\n                src={src}\r\n                alt={alt}\r\n                className={className}\r\n                onError={() => setImageError(true)}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`${className} flex items-center justify-center bg-orange-500 text-white font-bold text-sm`}>\r\n            {initials}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const ProfileCard: React.FC<ProfileCardProps> = ({ lead, onAction, actionIcon: ActionIcon, onClick, isSaved }) => {\r\n    // Normalize data\r\n    const name = lead.name || 'Unknown';\r\n    const title = lead.title || 'No Title';\r\n    const company = lead.company || lead.organization_name || 'Unknown Company';\r\n    const location = lead.location || '';\r\n    const email = lead.email || 'N/A';\r\n    const phone = lead.phone || 'N/A';\r\n    const image = lead.photo_url || lead.image;\r\n    const linkedin = lead.linkedin;\r\n    const isVerified = lead.status === 'Verified' || lead.email_status === 'verified';\r\n    const saved = isSaved || lead.isSaved;\r\n\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"group relative bg-[#0c0c0d] border border-white/5 rounded-xl overflow-hidden cursor-pointer hover:border-white/10 transition-all duration-300 flex flex-col h-[280px]\"\r\n        >\r\n            {/* Header */}\r\n            <div className=\"p-4 flex items-start gap-3\">\r\n                <div className=\"relative shrink-0\">\r\n                    <Avatar\r\n                        key={image || 'default'}\r\n                        src={image}\r\n                        name={name}\r\n                        className=\"w-12 h-12 rounded-xl object-cover border border-white/10\"\r\n                        alt={name}\r\n                    />\r\n                    {isVerified && (\r\n                        <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center border-2 border-[#0c0c0d]\">\r\n                            <Check className=\"w-2.5 h-2.5 text-white\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"text-white font-semibold text-sm truncate group-hover:text-orange-400 transition-colors\">{name}</h3>\r\n                    <p className=\"text-zinc-500 text-xs truncate mt-0.5\">{title}</p>\r\n                </div>\r\n                {onAction && ActionIcon && (\r\n                    <button\r\n                        onClick={(e) => { e.stopPropagation(); if (!saved) onAction(lead); }}\r\n                        disabled={saved}\r\n                        className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all shrink-0 ${saved\r\n                            ? 'bg-green-500/20 text-green-400'\r\n                            : 'bg-white/5 text-zinc-500 hover:text-white hover:bg-orange-500'\r\n                            }`}\r\n                    >\r\n                        {saved ? <Check className=\"w-4 h-4\" /> : <ActionIcon className=\"w-4 h-4\" />}\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Tags */}\r\n            <div className=\"px-4 flex flex-wrap gap-1.5\">\r\n                <span className=\"inline-flex items-center gap-1.5 bg-white/5 text-zinc-400 text-[10px] px-2.5 py-1 rounded-md font-medium\">\r\n                    <Building2 className=\"w-3 h-3 text-orange-500\" />\r\n                    <span className=\"truncate max-w-[100px]\">{company}</span>\r\n                </span>\r\n                {location && (\r\n                    <span className=\"inline-flex items-center gap-1.5 bg-white/5 text-zinc-400 text-[10px] px-2.5 py-1 rounded-md font-medium\">\r\n                        <MapPin className=\"w-3 h-3 text-blue-500\" />\r\n                        <span className=\"truncate max-w-[120px]\">{location}</span>\r\n                    </span>\r\n                )}\r\n            </div>\r\n\r\n            {/* Contact Info */}\r\n            <div className=\"mt-auto p-4 space-y-2 bg-black/20 border-t border-white/5\">\r\n                <div className=\"flex items-center gap-2.5\">\r\n                    <div className=\"w-6 h-6 rounded-md bg-white/5 flex items-center justify-center shrink-0\">\r\n                        <Mail className=\"w-3 h-3 text-zinc-500\" />\r\n                    </div>\r\n                    <span className=\"text-xs text-zinc-400 truncate flex-1\">{email}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2.5\">\r\n                    <div className=\"w-6 h-6 rounded-md bg-white/5 flex items-center justify-center shrink-0\">\r\n                        <Phone className=\"w-3 h-3 text-zinc-500\" />\r\n                    </div>\r\n                    <span className=\"text-xs text-zinc-400\">{phone}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"px-4 py-2.5 border-t border-white/5 flex items-center justify-between bg-black/30\">\r\n                <span className=\"text-[9px] text-zinc-600 font-mono truncate max-w-[140px]\">\r\n                    ID: {lead.id?.substring(0, 20)}\r\n                </span>\r\n                {linkedin && (\r\n                    <a\r\n                        href={linkedin.startsWith('http') ? linkedin : `https://${linkedin}`}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        className=\"text-[10px] font-semibold text-blue-500 hover:text-blue-400 flex items-center gap-1\"\r\n                    >\r\n                        <Linkedin className=\"w-3 h-3\" />\r\n                        LinkedIn Profile\r\n                    </a>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\SearchPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LayoutGrid' is defined but never used.","line":3,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":3,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":79},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":3,"column":99,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":107},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2148,2151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2148,2151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onSave' is defined but never used.","line":45,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2738,2741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2738,2741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2903,2906],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2903,2906],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSaveModalOpen' is assigned a value but never used.","line":58,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsSaveModalOpen' is assigned a value but never used.","line":58,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3236,3239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3236,3239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4530,4533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4530,4533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5138,5141],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5138,5141],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":118,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6095,6098],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6095,6098],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7316,7319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7316,7319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7940,7943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7940,7943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8203,8206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8203,8206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":193,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8883,8886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8883,8886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'file' is defined but never used.","line":210,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":210,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10036,10039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10036,10039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":256,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11367,11370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11367,11370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":287,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12538,12541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12538,12541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":131,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":134,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16153,16156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16153,16156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":133,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":136,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16350,16353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16350,16353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":133,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":136,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16745,16748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16745,16748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":354,"column":128,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":354,"endColumn":131,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17014,17017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17014,17017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":355,"column":140,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":355,"endColumn":143,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17219,17222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17219,17222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":396,"column":92,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21782,21810],"text":"CSV with &apos;Company', 'Domain'"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21782,21810],"text":"CSV with &lsquo;Company', 'Domain'"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21782,21810],"text":"CSV with &#39;Company', 'Domain'"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21782,21810],"text":"CSV with &rsquo;Company', 'Domain'"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":396,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company&apos;, 'Domain'"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company&lsquo;, 'Domain'"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company&#39;, 'Domain'"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company&rsquo;, 'Domain'"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":396,"column":103,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', &apos;Domain'"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', &lsquo;Domain'"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', &#39;Domain'"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', &rsquo;Domain'"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":396,"column":110,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', 'Domain&apos;"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', 'Domain&lsquo;"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', 'Domain&#39;"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21782,21810],"text":"CSV with 'Company', 'Domain&rsquo;"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":399,"column":113,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":116,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22149,22152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22149,22152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":447,"column":147,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[25766,25825],"text":" using Apollo&apos;s database.\r\n                                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[25766,25825],"text":" using Apollo&lsquo;s database.\r\n                                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[25766,25825],"text":" using Apollo&#39;s database.\r\n                                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[25766,25825],"text":" using Apollo&rsquo;s database.\r\n                                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n    User, Sliders, Loader2, Zap, UploadCloud, Save, LayoutGrid, Search, Filter, Building2, Users, Download\r\n} from 'lucide-react';\r\nimport { SoftInput } from './ui/Input';\r\nimport { ProfileCard } from './ProfileCard';\r\nimport { CompanyCard } from './CompanyCard';\r\nimport { CompanyDetailsModal } from './CompanyDetailsModal';\r\nimport { LeadDetailModal } from './LeadDetailModal';\r\nimport { motion } from 'framer-motion';\r\nimport { databaseService } from '@/services/databaseService';\r\n\r\n// Mock Data Services (Moved from page.tsx)\r\nconst enrichCompanyData = async (inputName: string, inputDomain: string, quantity: number) => {\r\n    const cleanDomain = inputDomain ? inputDomain.replace(/^https?:\\/\\//, '').split('/')[0] : 'company.com';\r\n    await new Promise(resolve => setTimeout(resolve, 200));\r\n\r\n    return Array.from({ length: quantity }).map((_, i) => {\r\n        const gender = Math.random() > 0.5 ? 'men' : 'women';\r\n        const name = ['Alice', 'Bob', 'Charlie', 'David', 'Emma', 'Frank', 'Grace', 'Henry'][Math.floor(Math.random() * 8)] +\r\n            ' ' + ['Johnson', 'Smith', 'Lee', 'Chen', 'Wilson', 'Bond'][Math.floor(Math.random() * 6)];\r\n\r\n        return {\r\n            id: `lead_${Date.now().toString(36)}_${Math.random().toString(36).substr(2, 5)}`,\r\n            name: name,\r\n            title: ['CEO', 'CTO', 'Marketing Director', 'Sales Manager', 'Developer'][i % 5],\r\n            company: inputName || 'Unknown Corp',\r\n            website: cleanDomain,\r\n            location: ['New York, NY', 'San Francisco, CA', 'London, UK', 'Austin, TX'][i % 4],\r\n            email: `${name.split(' ')[0].toLowerCase()}@${cleanDomain}`,\r\n            phone: `+1 555.01${Math.floor(Math.random() * 90) + 10}`,\r\n            linkedin: `linkedin.com/in/${name.replace(' ', '').toLowerCase()}`,\r\n            image: `https://randomuser.me/api/portraits/${gender}/${Math.floor(Math.random() * 50)}.jpg`,\r\n            status: 'Enriched',\r\n            score: Math.floor(Math.random() * 60) + 40, // Mock Score 40-100\r\n        };\r\n    });\r\n};\r\n\r\ninterface SearchPageProps {\r\n    onSave: (leads: any[]) => void;\r\n    notify: (msg: string, type?: string) => void;\r\n}\r\n\r\nexport const SearchPage: React.FC<SearchPageProps> = ({ onSave, notify }) => {\r\n    const [mode, setMode] = useState<'search' | 'import'>('search');\r\n    const [searchType, setSearchType] = useState<'people' | 'companies'>('people');\r\n    const [filters, setFilters] = useState({ company: '', website: '', title: '', location: '', keywords: '', quantity: 9 });\r\n    const [loading, setLoading] = useState(false);\r\n    const [loadingMore, setLoadingMore] = useState(false);\r\n    const [results, setResults] = useState<any[]>([]);\r\n    const [page, setPage] = useState(1);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [selectedCompany, setSelectedCompany] = useState<any>(null);\r\n    const [isCompanyModalOpen, setIsCompanyModalOpen] = useState(false);\r\n    const [dragActive, setDragActive] = useState(false);\r\n    const [processingStatus, setProcessingStatus] = useState('');\r\n    const [isSaveModalOpen, setIsSaveModalOpen] = useState(false);\r\n    const [selectedLead, setSelectedLead] = useState<any>(null);\r\n\r\n    const handleSearch = async () => {\r\n        if (searchType === 'people' && (!filters.company && !filters.website && !filters.keywords)) return notify('Company, Website or Keywords required', 'error');\r\n        if (searchType === 'companies' && (!filters.company && !filters.website && !filters.keywords)) return notify('Company Name, Website or Keywords required', 'error');\r\n\r\n        setLoading(true);\r\n        setResults([]);\r\n        setPage(1); // Reset page\r\n        setHasMore(true); // Reset hasMore\r\n\r\n        try {\r\n            const endpoint = searchType === 'people' ? '/api/apollo/search' : '/api/apollo/companies';\r\n            const response = await fetch(endpoint, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ ...filters, page: 1 }), // Send page 1\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Search failed');\r\n            }\r\n\r\n            if (searchType === 'people') {\r\n                // Check if people are already saved\r\n                const leads = data.leads || [];\r\n                const leadsWithStatus = await Promise.all(leads.map(async (lead: any) => {\r\n                    const isSaved = await databaseService.checkPersonSaved(lead.id);\r\n                    return { ...lead, isSaved };\r\n                }));\r\n                setResults(leadsWithStatus);\r\n                if (leads.length === 0) notify('No people found matching criteria', 'error');\r\n                else notify(`Found ${leads.length} people`, 'success');\r\n            } else {\r\n                // Check if companies are already saved\r\n                const companies = data.companies || [];\r\n                const companiesWithStatus = await Promise.all(companies.map(async (comp: any) => {\r\n                    const isSaved = await databaseService.checkCompanySaved(comp.id);\r\n                    return { ...comp, isSaved };\r\n                }));\r\n\r\n                setResults(companiesWithStatus);\r\n\r\n                // Use pagination data if available, otherwise fallback to length check\r\n                if (data.pagination) {\r\n                    setHasMore(data.pagination.page < data.pagination.total_pages);\r\n                } else {\r\n                    // Fallback logic: if we got fewer results than requested, there are no more\r\n                    setHasMore(companies.length >= filters.quantity);\r\n                }\r\n\r\n                if (companies.length === 0) {\r\n                    notify('No companies found matching criteria', 'error');\r\n                    setHasMore(false);\r\n                }\r\n                else notify(`Found ${companies.length} companies`, 'success');\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Search failed:', error);\r\n            notify(error.message || 'Failed to fetch data', 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleLoadMore = async () => {\r\n        if (!hasMore || loadingMore) return;\r\n\r\n        setLoadingMore(true);\r\n        const nextPage = page + 1;\r\n\r\n        try {\r\n            const endpoint = '/api/apollo/companies'; // Only companies support pagination for now based on this context\r\n            const response = await fetch(endpoint, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ ...filters, page: nextPage }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Load more failed');\r\n            }\r\n\r\n            const companies = data.companies || [];\r\n\r\n            if (companies.length === 0) {\r\n                setHasMore(false);\r\n                notify('No more companies to load', 'info');\r\n            } else {\r\n                const companiesWithStatus = await Promise.all(companies.map(async (comp: any) => {\r\n                    const isSaved = await databaseService.checkCompanySaved(comp.id);\r\n                    return { ...comp, isSaved };\r\n                }));\r\n\r\n                setResults(prev => [...prev, ...companiesWithStatus]);\r\n                setPage(nextPage);\r\n\r\n                // Update hasMore based on pagination data\r\n                if (data.pagination) {\r\n                    setHasMore(data.pagination.page < data.pagination.total_pages);\r\n                } else {\r\n                    setHasMore(companies.length >= filters.quantity);\r\n                }\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('Load more failed:', error);\r\n            notify(error.message || 'Failed to load more data', 'error');\r\n        } finally {\r\n            setLoadingMore(false);\r\n        }\r\n    };\r\n\r\n    const handleSaveCompany = async (company: any) => {\r\n        try {\r\n            await databaseService.saveCompany(company);\r\n\r\n            // Update local state to reflect saved status\r\n            setResults(prev => prev.map(c => c.id === company.id ? { ...c, isSaved: true } : c));\r\n            if (selectedCompany && selectedCompany.id === company.id) {\r\n                setSelectedCompany({ ...selectedCompany, isSaved: true });\r\n            }\r\n\r\n            notify('Company saved to database', 'success');\r\n        } catch (error) {\r\n            console.error('Failed to save company:', error);\r\n            notify('Failed to save company', 'error');\r\n        }\r\n    };\r\n\r\n    const handleSavePerson = async (person: any) => {\r\n        try {\r\n            await databaseService.savePerson(person);\r\n\r\n            // Update local state to reflect saved status\r\n            setResults(prev => prev.map(p => p.id === person.id ? { ...p, isSaved: true } : p));\r\n            if (selectedLead && selectedLead.id === person.id) {\r\n                setSelectedLead({ ...selectedLead, isSaved: true });\r\n            }\r\n\r\n            notify('Person saved to database', 'success');\r\n        } catch (error) {\r\n            console.error('Failed to save person:', error);\r\n            notify('Failed to save person', 'error');\r\n        }\r\n    };\r\n\r\n    const processFile = async (file: File) => {\r\n        setLoading(true);\r\n        setProcessingStatus('Parsing file...');\r\n        setTimeout(async () => {\r\n            const mockRows = [\r\n                { Company: 'Google', Domain: 'google.com' },\r\n                { Company: 'Microsoft', Domain: 'microsoft.com' },\r\n                { Company: 'Apple', Domain: 'apple.com' },\r\n            ];\r\n            setProcessingStatus(`Fetching ${filters.quantity} people from ${mockRows.length} companies...`);\r\n            let allEnriched: any[] = [];\r\n            for (const row of mockRows) {\r\n                const enriched = await enrichCompanyData(row.Company, row.Domain, filters.quantity);\r\n                allEnriched = [...allEnriched, ...enriched];\r\n            }\r\n            setResults(allEnriched);\r\n            setLoading(false);\r\n            setProcessingStatus('');\r\n            notify(`Bulk Search complete: Found ${allEnriched.length} total leads`, 'success');\r\n        }, 1500);\r\n    };\r\n\r\n    const handleSaveAll = async () => {\r\n        if (results.length === 0) return;\r\n\r\n        let savedCount = 0;\r\n        notify(`Saving ${results.length} people...`, 'loading');\r\n\r\n        for (const person of results) {\r\n            if (person.isSaved) continue;\r\n            try {\r\n                await databaseService.savePerson(person);\r\n                savedCount++;\r\n                setResults(prev => prev.map(p => p.id === person.id ? { ...p, isSaved: true } : p));\r\n            } catch (error) {\r\n                console.error(`Failed to save ${person.name}:`, error);\r\n            }\r\n        }\r\n\r\n        if (savedCount > 0) {\r\n            notify(`Successfully saved ${savedCount} people`, 'success');\r\n        } else {\r\n            notify('All visible people are already saved', 'info');\r\n        }\r\n    };\r\n\r\n    const handleUnlock = async (lead: any, type: 'email' | 'phone') => {\r\n        try {\r\n            const response = await fetch('/api/apollo/enrich', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    id: lead.id,\r\n                    reveal_email: type === 'email',\r\n                    reveal_phone: type === 'phone'\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to unlock contact info');\r\n            }\r\n\r\n            const unlockedLead = { ...data.lead, isSaved: true };\r\n\r\n            // Save to database automatically\r\n            await databaseService.savePerson(unlockedLead);\r\n\r\n            // Update local state\r\n            setResults(prev => prev.map(p => p.id === lead.id ? unlockedLead : p));\r\n            if (selectedLead && selectedLead.id === lead.id) {\r\n                setSelectedLead(unlockedLead);\r\n            }\r\n\r\n            notify('Contact info unlocked and saved!', 'success');\r\n            return unlockedLead;\r\n        } catch (error: any) {\r\n            console.error('Unlock failed:', error);\r\n            notify(error.message || 'Failed to unlock contact info', 'error');\r\n            return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col lg:flex-row h-full gap-6\">\r\n            {selectedLead && (\r\n                <LeadDetailModal\r\n                    lead={selectedLead}\r\n                    onClose={() => setSelectedLead(null)}\r\n                    onUnlock={handleUnlock}\r\n                />\r\n            )}\r\n\r\n            {/* Search Sidebar / Panel */}\r\n            <div className=\"w-full lg:w-80 flex-shrink-0 flex flex-col gap-6\">\r\n                <div className=\"bg-[#09090b] border border-white/5 rounded-md p-6\">\r\n                    <div className=\"flex gap-2 bg-zinc-900/50 p-1 rounded-md border border-white/5 mb-6\">\r\n                        <button\r\n                            onClick={() => setMode('search')}\r\n                            className={`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-300 ${mode === 'search' ? 'bg-orange-500 text-white shadow-lg shadow-orange-500/20' : 'text-zinc-400 hover:text-white hover:bg-white/5'}`}\r\n                        >\r\n                            Manual Search\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setMode('import')}\r\n                            className={`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-300 ${mode === 'import' ? 'bg-orange-500 text-white shadow-lg shadow-orange-500/20' : 'text-zinc-400 hover:text-white hover:bg-white/5'}`}\r\n                        >\r\n                            Bulk Import\r\n                        </button>\r\n                    </div>\r\n\r\n                    {mode === 'search' ? (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex gap-2 mb-6\">\r\n                                <button\r\n                                    onClick={() => { setSearchType('people'); setResults([]); }}\r\n                                    className={`flex-1 py-2 px-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all border ${searchType === 'people' ? 'bg-zinc-800 border-orange-500 text-orange-500' : 'bg-transparent border-white/10 text-zinc-500 hover:border-white/20'}`}\r\n                                >\r\n                                    <div className=\"flex items-center justify-center gap-2\">\r\n                                        <Users className=\"w-3 h-3\" /> People\r\n                                    </div>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => { setSearchType('companies'); setResults([]); }}\r\n                                    className={`flex-1 py-2 px-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all border ${searchType === 'companies' ? 'bg-zinc-800 border-blue-500 text-blue-500' : 'bg-transparent border-white/10 text-zinc-500 hover:border-white/20'}`}\r\n                                >\r\n                                    <div className=\"flex items-center justify-center gap-2\">\r\n                                        <Building2 className=\"w-3 h-3\" /> Companies\r\n                                    </div>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <SoftInput label=\"Company Name\" placeholder=\"e.g. Acme Inc\" value={filters.company} onChange={(e: any) => setFilters({ ...filters, company: e.target.value })} />\r\n                                <SoftInput label=\"Website Domain\" placeholder=\"e.g. acme.com\" value={filters.website} onChange={(e: any) => setFilters({ ...filters, website: e.target.value })} />\r\n\r\n                                {searchType === 'people' && (\r\n                                    <>\r\n                                        <div className=\"w-full h-px bg-white/5 my-2\"></div>\r\n                                        <SoftInput label=\"Job Title\" placeholder=\"e.g. Founder\" value={filters.title} onChange={(e: any) => setFilters({ ...filters, title: e.target.value })} />\r\n                                    </>\r\n                                )}\r\n\r\n                                <SoftInput label=\"Location\" placeholder=\"e.g. New York\" value={filters.location} onChange={(e: any) => setFilters({ ...filters, location: e.target.value })} />\r\n                                <SoftInput label=\"Keywords\" placeholder=\"e.g. SaaS, B2B, Marketing\" value={filters.keywords} onChange={(e: any) => setFilters({ ...filters, keywords: e.target.value })} />\r\n\r\n                                {searchType === 'people' && (\r\n                                    <div className=\"space-y-3 pt-2 bg-zinc-950/30 p-4 rounded-md border border-white/5\">\r\n                                        <div className=\"flex justify-between items-center\">\r\n                                            <span className=\"text-xs font-semibold text-zinc-400 flex items-center gap-2\"><User className=\"w-3 h-3\" /> Max People</span>\r\n                                            <span className=\"bg-orange-500/10 text-orange-500 px-2 py-0.5 rounded-full text-[10px] font-bold\">{filters.quantity}</span>\r\n                                        </div>\r\n                                        <input type=\"range\" min=\"1\" max=\"20\" value={filters.quantity} onChange={(e) => setFilters({ ...filters, quantity: parseInt(e.target.value) })} className=\"w-full h-1.5 bg-zinc-800 rounded-full appearance-none cursor-pointer accent-orange-500\" />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"pt-4\">\r\n                                <button onClick={handleSearch} disabled={loading} className=\"w-full py-3.5 rounded-md bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold text-sm shadow-lg shadow-orange-500/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                                    {loading ? <Loader2 className=\"animate-spin w-5 h-5\" /> : <Zap className=\"w-5 h-5 fill-white\" />}\r\n                                    {loading ? 'Searching...' : 'Find Prospects'}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex flex-col gap-6\">\r\n                            <div className=\"space-y-3 pt-2 bg-zinc-950/30 p-4 rounded-md border border-white/5\">\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <span className=\"text-xs font-semibold text-zinc-400 flex items-center gap-2\"><Sliders className=\"w-3 h-3\" /> People Per Company</span>\r\n                                    <span className=\"bg-orange-500/10 text-orange-500 px-2 py-0.5 rounded-full text-[10px] font-bold\">{filters.quantity}</span>\r\n                                </div>\r\n                                <p className=\"text-[10px] text-zinc-500\">If you upload 10 companies, we will fetch {filters.quantity * 10} leads total.</p>\r\n                                <input type=\"range\" min=\"1\" max=\"20\" value={filters.quantity} onChange={(e) => setFilters({ ...filters, quantity: parseInt(e.target.value) })} className=\"w-full h-1.5 bg-zinc-800 rounded-full appearance-none cursor-pointer accent-orange-500\" />\r\n                            </div>\r\n                            {loading ? (\r\n                                <div className=\"flex flex-col items-center justify-center text-center space-y-4 py-8\">\r\n                                    <div className=\"w-12 h-12 rounded-full border-4 border-zinc-800 border-t-orange-500 animate-spin\"></div>\r\n                                    <div>\r\n                                        <p className=\"text-white font-bold text-sm\">{processingStatus}</p>\r\n                                        <p className=\"text-zinc-500 text-xs mt-1\">Simulating API lookup...</p>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className={`border-2 border-dashed rounded-2xl flex flex-col items-center justify-center text-center p-8 transition-all cursor-pointer ${dragActive ? 'border-orange-500 bg-orange-500/10' : 'border-zinc-700 bg-zinc-900/30 hover:border-zinc-600 hover:bg-zinc-800/50'}`} onDragOver={(e) => { e.preventDefault(); setDragActive(true) }} onDragLeave={() => setDragActive(false)} onDrop={(e) => { e.preventDefault(); setDragActive(false); if (e.dataTransfer.files[0]) processFile(e.dataTransfer.files[0]); }}>\r\n                                    <UploadCloud className={`w-10 h-10 mb-3 ${dragActive ? 'text-orange-500' : 'text-zinc-500'}`} />\r\n                                    <p className=\"text-white font-bold text-sm mb-1\">Drop Company List</p>\r\n                                    <p className=\"text-zinc-500 text-[10px] mb-4\">CSV with 'Company', 'Domain'</p>\r\n                                    <label className=\"bg-white text-black px-4 py-2 rounded-lg font-bold text-xs cursor-pointer hover:bg-zinc-200 transition-colors\">\r\n                                        Browse Files\r\n                                        <input type=\"file\" className=\"hidden\" accept=\".csv,.xlsx\" onChange={(e: any) => e.target.files[0] && processFile(e.target.files[0])} />\r\n                                    </label>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Results Area */}\r\n            <div className=\"flex-1 bg-[#09090b] border border-white/5 rounded-md p-6 lg:p-8 overflow-hidden flex flex-col relative\">\r\n                <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl lg:text-3xl font-bold text-white tracking-tight\">Live Results</h1>\r\n                        <p className=\"text-zinc-400 text-sm mt-1\">{results.length > 0 ? `Found ${results.length} ${searchType === 'people' ? 'enriched profiles' : 'companies'}` : 'Start a search to see results'}</p>\r\n                    </div>\r\n                    {results.length > 0 && searchType === 'people' && (\r\n                        <button onClick={handleSaveAll} className=\"bg-white hover:bg-zinc-200 text-black px-6 py-3 rounded-md font-bold text-sm flex items-center gap-2 transition-all shadow-lg shadow-white/10 active:scale-95\">\r\n                            <Save className=\"w-4 h-4\" /> Save All Results\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar\">\r\n                    {loading && results.length === 0 ? (\r\n                        <div className=\"h-full flex flex-col items-center justify-center gap-8\">\r\n                            <div className=\"relative\">\r\n                                <div className=\"absolute inset-0 bg-orange-500/20 blur-3xl rounded-full animate-pulse\" />\r\n                                <div className=\"w-20 h-20 rounded-2xl bg-zinc-900 border border-white/10 flex items-center justify-center relative z-10 shadow-2xl\">\r\n                                    <Loader2 className=\"w-8 h-8 text-orange-500 animate-spin\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-center space-y-2\">\r\n                                <p className=\"text-white font-bold text-lg\">Searching Apollo Database...</p>\r\n                                <p className=\"text-zinc-500 text-sm\">Finding the best contacts for you</p>\r\n                            </div>\r\n                        </div>\r\n                    ) : results.length === 0 ? (\r\n                        <div className=\"h-full flex flex-col items-center justify-center gap-6 text-zinc-600\">\r\n                            <div className=\"relative\">\r\n                                <div className=\"absolute inset-0 bg-orange-500/20 blur-3xl rounded-full opacity-20 animate-pulse\" />\r\n                                <div className=\"w-32 h-32 rounded-3xl bg-zinc-900/50 flex items-center justify-center border border-white/5 shadow-2xl backdrop-blur-sm relative z-10\">\r\n                                    <Search className=\"w-12 h-12 text-zinc-700\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-center max-w-md\">\r\n                                <h3 className=\"font-bold text-xl text-white mb-2\">Ready to Search</h3>\r\n                                <p className=\"text-sm text-zinc-500 leading-relaxed\">\r\n                                    Enter criteria to find verified {searchType === 'people' ? 'professional contacts' : 'companies'} using Apollo's database.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"pb-20\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 mb-8\">\r\n                                {searchType === 'people' ? (\r\n                                    results.map((lead, idx) => (\r\n                                        <motion.div\r\n                                            key={lead.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: idx * 0.05 }}\r\n                                        >\r\n                                            <ProfileCard\r\n                                                lead={lead}\r\n                                                actionIcon={Save}\r\n                                                onAction={() => handleSavePerson(lead)}\r\n                                                onClick={() => setSelectedLead(lead)}\r\n                                                isSaved={lead.isSaved}\r\n                                            />\r\n                                        </motion.div>\r\n                                    ))\r\n                                ) : (\r\n                                    results.map((company, idx) => (\r\n                                        <motion.div\r\n                                            key={company.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: idx * 0.05 }}\r\n                                        >\r\n                                            <CompanyCard\r\n                                                company={company}\r\n                                                onClick={() => {\r\n                                                    setSelectedCompany(company);\r\n                                                    setIsCompanyModalOpen(true);\r\n                                                }}\r\n                                            />\r\n                                        </motion.div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Load More Button */}\r\n                            {searchType === 'companies' && results.length > 0 && (\r\n                                <div className=\"flex justify-center\">\r\n                                    {hasMore ? (\r\n                                        <button\r\n                                            onClick={handleLoadMore}\r\n                                            disabled={loadingMore}\r\n                                            className=\"px-6 py-3 rounded-md bg-zinc-800 hover:bg-zinc-700 text-white font-bold text-sm transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        >\r\n                                            {loadingMore ? <Loader2 className=\"animate-spin w-4 h-4\" /> : null}\r\n                                            {loadingMore ? 'Loading more...' : 'Load More Companies'}\r\n                                        </button>\r\n                                    ) : (\r\n                                        <p className=\"text-zinc-500 text-sm font-medium\">No more companies found.</p>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <CompanyDetailsModal\r\n                company={selectedCompany}\r\n                isOpen={isCompanyModalOpen}\r\n                onClose={() => setIsCompanyModalOpen(false)}\r\n                onSave={handleSaveCompany}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\SettingsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":14,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { createClient } from '@/lib/supabase';\r\nimport { User, Monitor, LogOut, Moon, Sun, Laptop, Mail } from 'lucide-react';\r\nimport { ProfileUpload } from './Settings/ProfileUpload';\r\nimport { cn } from './ui/Button';\r\n\r\nexport const SettingsPage = () => {\r\n    const [theme, setTheme] = useState('dark');\r\n    const [notifications, setNotifications] = useState(true);\r\n    const [userName, setUserName] = useState('');\r\n    const [userEmail, setUserEmail] = useState('');\r\n    const [profileUrl, setProfileUrl] = useState<string | null>(null);\r\n    const [uid, setUid] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const supabase = createClient();\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n            if (user) {\r\n                setUserEmail(user.email || '');\r\n\r\n                const { data: userData } = await supabase\r\n                    .from('users')\r\n                    .select('name, profile_url')\r\n                    .eq('uid', user.id)\r\n                    .single();\r\n\r\n                if (userData) {\r\n                    setUserName(userData.name || 'User');\r\n                    setProfileUrl(userData.profile_url || null);\r\n                }\r\n                setUid(user.id);\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"h-full max-w-3xl mx-auto pb-20 pt-8 px-6\">\r\n            <div className=\"mb-8\">\r\n                <h1 className=\"text-2xl font-bold text-white mb-1\">Settings</h1>\r\n                <p className=\"text-zinc-400 text-sm\">Manage your profile and preferences.</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n                {/* Profile Section */}\r\n                <section className=\"bg-zinc-900/30 border border-white/5 rounded-xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"p-2 rounded-lg bg-zinc-800/50 text-white border border-white/5\">\r\n                            <User className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <h2 className=\"text-base font-bold text-white\">Profile</h2>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col md:flex-row gap-8\">\r\n                        <div className=\"flex-shrink-0\">\r\n                            {uid ? (\r\n                                <ProfileUpload\r\n                                    currentImageUrl={profileUrl}\r\n                                    onUpdate={setProfileUrl}\r\n                                    uid={uid}\r\n                                />\r\n                            ) : (\r\n                                <div className=\"h-24 w-24 bg-zinc-800/50 animate-pulse rounded-full\" />\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 space-y-4\">\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Full Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={userName}\r\n                                    onChange={(e) => setUserName(e.target.value)}\r\n                                    className=\"w-full bg-zinc-900 border border-white/10 rounded-lg px-4 py-2.5 text-white text-sm focus:outline-none focus:border-white/20 transition-colors placeholder:text-zinc-600\"\r\n                                    placeholder=\"Your name\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-1.5\">\r\n                                <label className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Email Address</label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className=\"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-600\" />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={userEmail}\r\n                                        disabled\r\n                                        className=\"w-full bg-zinc-900/50 border border-white/5 rounded-lg pl-10 pr-4 py-2.5 text-zinc-500 text-sm cursor-not-allowed\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Preferences Section */}\r\n                <section className=\"bg-zinc-900/30 border border-white/5 rounded-xl p-6\">\r\n                    <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"p-2 rounded-lg bg-zinc-800/50 text-white border border-white/5\">\r\n                            <Monitor className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <h2 className=\"text-base font-bold text-white\">Preferences</h2>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"flex items-center justify-between p-4 bg-zinc-900/30 rounded-lg border border-white/5\">\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-white\">Appearance</p>\r\n                                <p className=\"text-xs text-zinc-500\">Interface theme</p>\r\n                            </div>\r\n                            <div className=\"flex bg-black/20 p-1 rounded-lg border border-white/5\">\r\n                                {['light', 'dark', 'system'].map((t) => (\r\n                                    <button\r\n                                        key={t}\r\n                                        onClick={() => setTheme(t)}\r\n                                        className={cn(\r\n                                            \"p-1.5 rounded-md transition-all\",\r\n                                            theme === t ? \"bg-zinc-800 text-white shadow-sm\" : \"text-zinc-500 hover:text-zinc-300\"\r\n                                        )}\r\n                                    >\r\n                                        {t === 'light' && <Sun className=\"w-3.5 h-3.5\" />}\r\n                                        {t === 'dark' && <Moon className=\"w-3.5 h-3.5\" />}\r\n                                        {t === 'system' && <Laptop className=\"w-3.5 h-3.5\" />}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between p-4 bg-zinc-900/30 rounded-lg border border-white/5\">\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-white\">Notifications</p>\r\n                                <p className=\"text-xs text-zinc-500\">Alert preferences</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setNotifications(!notifications)}\r\n                                className={cn(\r\n                                    \"w-10 h-5 rounded-full transition-colors relative\",\r\n                                    notifications ? \"bg-white\" : \"bg-zinc-800\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"absolute top-1 left-1 w-3 h-3 rounded-full transition-transform duration-200\",\r\n                                    notifications ? \"translate-x-5 bg-black\" : \"translate-x-0 bg-zinc-500\"\r\n                                )} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Sign Out */}\r\n                <div className=\"flex justify-start pt-4\">\r\n                    <button className=\"text-zinc-500 hover:text-red-400 text-sm font-medium flex items-center gap-2 transition-colors px-4 py-2 rounded-lg hover:bg-red-500/5\">\r\n                        <LogOut className=\"w-4 h-4\" /> Sign Out\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Settings\\ProfileUpload.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":186,"column":29,"nodeType":"JSXOpeningElement","endLine":190,"endColumn":31},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":343,"column":29,"nodeType":"JSXOpeningElement","endLine":347,"endColumn":31}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[856,859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[856,859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1198,1201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1198,1201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1222,1225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1222,1225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2486,2489],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2486,2489],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5036,5039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5036,5039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, { useState, useRef, useCallback } from 'react';\r\nimport Cropper from 'react-easy-crop';\r\nimport { createClient } from '@/lib/supabase';\r\nimport { Camera, X, Upload, Trash2, ZoomIn, ZoomOut, Loader2, Eye } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface ProfileUploadProps {\r\n    currentImageUrl?: string | null;\r\n    onUpdate: (url: string | null) => void;\r\n    uid: string;\r\n}\r\n\r\nexport const ProfileUpload = ({ currentImageUrl, onUpdate, uid }: ProfileUploadProps) => {\r\n    const [imageSrc, setImageSrc] = useState<string | null>(null);\r\n    const [crop, setCrop] = useState({ x: 0, y: 0 });\r\n    const [zoom, setZoom] = useState(1);\r\n    const [croppedAreaPixels, setCroppedAreaPixels] = useState<any>(null);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isLightboxOpen, setIsLightboxOpen] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const supabase = createClient();\r\n\r\n    const onCropComplete = useCallback((croppedArea: any, croppedAreaPixels: any) => {\r\n        setCroppedAreaPixels(croppedAreaPixels);\r\n    }, []);\r\n\r\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const file = e.target.files[0];\r\n            const imageDataUrl = await readFile(file);\r\n            setImageSrc(imageDataUrl as string);\r\n            setIsModalOpen(true);\r\n            // Reset input value so same file can be selected again\r\n            e.target.value = '';\r\n        }\r\n    };\r\n\r\n    const readFile = (file: File) => {\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.addEventListener('load', () => resolve(reader.result), false);\r\n            reader.readAsDataURL(file);\r\n        });\r\n    };\r\n\r\n    const createImage = (url: string): Promise<HTMLImageElement> =>\r\n        new Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.addEventListener('load', () => resolve(image));\r\n            image.addEventListener('error', (error) => reject(error));\r\n            image.setAttribute('crossOrigin', 'anonymous');\r\n            image.src = url;\r\n        });\r\n\r\n    const getCroppedImg = async (imageSrc: string, pixelCrop: any): Promise<Blob> => {\r\n        const image = await createImage(imageSrc);\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        if (!ctx) {\r\n            throw new Error('No 2d context');\r\n        }\r\n\r\n        canvas.width = pixelCrop.width;\r\n        canvas.height = pixelCrop.height;\r\n\r\n        ctx.drawImage(\r\n            image,\r\n            pixelCrop.x,\r\n            pixelCrop.y,\r\n            pixelCrop.width,\r\n            pixelCrop.height,\r\n            0,\r\n            0,\r\n            pixelCrop.width,\r\n            pixelCrop.height\r\n        );\r\n\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob((blob) => {\r\n                if (!blob) {\r\n                    reject(new Error('Canvas is empty'));\r\n                    return;\r\n                }\r\n                resolve(blob);\r\n            }, 'image/jpeg');\r\n        });\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!imageSrc || !croppedAreaPixels) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const croppedImageBlob = await getCroppedImg(imageSrc, croppedAreaPixels);\r\n            const fileName = `${uid}/${Date.now()}.jpg`;\r\n\r\n            // Upload to Supabase Storage\r\n            const { error: uploadError } = await supabase.storage\r\n                .from('profile')\r\n                .upload(fileName, croppedImageBlob, {\r\n                    contentType: 'image/jpeg',\r\n                    upsert: true\r\n                });\r\n\r\n            if (uploadError) throw uploadError;\r\n\r\n            // Get Public URL\r\n            const { data: { publicUrl } } = supabase.storage\r\n                .from('profile')\r\n                .getPublicUrl(fileName);\r\n\r\n            // Update User Profile\r\n            const { error: updateError } = await supabase\r\n                .from('users')\r\n                .update({ profile_url: publicUrl })\r\n                .eq('uid', uid);\r\n\r\n            if (updateError) throw updateError;\r\n\r\n            // Log Activity\r\n            await supabase.from('activities').insert({\r\n                uid,\r\n                label: 'Profile Updated',\r\n                status: 'updated their profile picture',\r\n                created_at: new Date().toISOString()\r\n            });\r\n\r\n            onUpdate(publicUrl);\r\n            setIsModalOpen(false);\r\n            setImageSrc(null);\r\n        } catch (error) {\r\n            console.error('Error uploading profile picture:', error);\r\n            alert(`Failed to upload profile picture: ${(error as any).message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleRemove = async () => {\r\n        if (!confirm('Are you sure you want to remove your profile picture?')) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            // Update User Profile to null\r\n            const { error: updateError } = await supabase\r\n                .from('users')\r\n                .update({ profile_url: null })\r\n                .eq('uid', uid);\r\n\r\n            if (updateError) throw updateError;\r\n\r\n            // Log Activity\r\n            await supabase.from('activities').insert({\r\n                uid,\r\n                label: 'Profile Removed',\r\n                status: 'removed their profile picture',\r\n                created_at: new Date().toISOString()\r\n            });\r\n\r\n            // Optional: Delete from storage if you want to clean up\r\n            // But we might want to keep history or it might be complex to find the exact file without storing the path\r\n            // For now, just unlinking is safer/easier.\r\n\r\n            onUpdate(null);\r\n        } catch (error) {\r\n            console.error('Error removing profile picture:', error);\r\n            alert('Failed to remove profile picture.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex items-center gap-6\">\r\n                <div className=\"relative group\">\r\n                    <div\r\n                        className={`w-20 h-20 rounded-full overflow-hidden bg-zinc-800 border-2 border-zinc-700 ring-4 ring-zinc-900 shadow-xl ${currentImageUrl ? 'cursor-pointer' : ''}`}\r\n                        onClick={() => currentImageUrl && setIsLightboxOpen(true)}\r\n                    >\r\n                        {currentImageUrl ? (\r\n                            <img\r\n                                src={currentImageUrl}\r\n                                alt=\"Profile\"\r\n                                className=\"w-full h-full object-cover\"\r\n                            />\r\n                        ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center bg-zinc-800 text-zinc-500\">\r\n                                <Camera className=\"w-8 h-8\" />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Hover Overlay */}\r\n                    {currentImageUrl && (\r\n                        <button\r\n                            onClick={() => setIsLightboxOpen(true)}\r\n                            className=\"absolute inset-0 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white cursor-pointer\"\r\n                        >\r\n                            <Eye className=\"w-6 h-6\" />\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-2\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Button\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            variant=\"secondary\"\r\n                            className=\"bg-zinc-800 border-zinc-700 hover:bg-zinc-700 hover:text-white text-zinc-300 h-9 px-4 text-xs\"\r\n                        >\r\n                            <Upload className=\"w-3.5 h-3.5 mr-2\" />\r\n                            Upload New\r\n                        </Button>\r\n                        {currentImageUrl && (\r\n                            <Button\r\n                                onClick={handleRemove}\r\n                                variant=\"secondary\"\r\n                                className=\"bg-red-500/10 border-red-500/20 hover:bg-red-500/20 text-red-400 h-9 px-4 text-xs\"\r\n                            >\r\n                                <Trash2 className=\"w-3.5 h-3.5 mr-2\" />\r\n                                Remove\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                    <p className=\"text-xs text-zinc-500\">\r\n                        Recommended: Square JPG, PNG. Max 5MB.\r\n                    </p>\r\n                </div>\r\n\r\n                <input\r\n                    type=\"file\"\r\n                    ref={fileInputRef}\r\n                    onChange={handleFileChange}\r\n                    accept=\"image/*\"\r\n                    className=\"hidden\"\r\n                />\r\n            </div>\r\n\r\n            {/* Crop Modal */}\r\n            <AnimatePresence>\r\n                {isModalOpen && imageSrc && (\r\n                    <>\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60]\"\r\n                            onClick={() => setIsModalOpen(false)}\r\n                        />\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-[#09090b] border border-zinc-800 rounded-md shadow-2xl z-[70] overflow-hidden flex flex-col\"\r\n                        >\r\n                            <div className=\"p-4 border-b border-zinc-800 flex items-center justify-between bg-zinc-900/50\">\r\n                                <h3 className=\"text-sm font-bold text-white uppercase tracking-wider\">Adjust Profile Picture</h3>\r\n                                <button onClick={() => setIsModalOpen(false)} className=\"text-zinc-500 hover:text-white transition-colors\">\r\n                                    <X className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"relative h-80 bg-black\">\r\n                                <Cropper\r\n                                    image={imageSrc}\r\n                                    crop={crop}\r\n                                    zoom={zoom}\r\n                                    aspect={1}\r\n                                    onCropChange={setCrop}\r\n                                    onCropComplete={onCropComplete}\r\n                                    onZoomChange={setZoom}\r\n                                    cropShape=\"round\"\r\n                                    showGrid={false}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"p-6 space-y-6 bg-[#09090b]\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <ZoomOut className=\"w-4 h-4 text-zinc-500\" />\r\n                                    <input\r\n                                        type=\"range\"\r\n                                        value={zoom}\r\n                                        min={1}\r\n                                        max={3}\r\n                                        step={0.1}\r\n                                        aria-labelledby=\"Zoom\"\r\n                                        onChange={(e) => setZoom(Number(e.target.value))}\r\n                                        className=\"flex-1 h-1 bg-zinc-800 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full\"\r\n                                    />\r\n                                    <ZoomIn className=\"w-4 h-4 text-zinc-500\" />\r\n                                </div>\r\n\r\n                                <div className=\"flex justify-end gap-3\">\r\n                                    <Button\r\n                                        variant=\"secondary\"\r\n                                        onClick={() => setIsModalOpen(false)}\r\n                                        className=\"bg-zinc-800 border-zinc-700 hover:bg-zinc-700 text-zinc-300\"\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button\r\n                                        onClick={handleSave}\r\n                                        disabled={loading}\r\n                                        className=\"bg-white text-black hover:bg-zinc-200 min-w-[100px]\"\r\n                                    >\r\n                                        {loading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : 'Save & Apply'}\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Lightbox Modal */}\r\n            <AnimatePresence>\r\n                {isLightboxOpen && currentImageUrl && (\r\n                    <>\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[80]\"\r\n                            onClick={() => setIsLightboxOpen(false)}\r\n                        />\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            exit={{ opacity: 0, scale: 0.9 }}\r\n                            className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[90] max-w-4xl max-h-[90vh] p-4 outline-none\"\r\n                        >\r\n                            <button\r\n                                onClick={() => setIsLightboxOpen(false)}\r\n                                className=\"absolute -top-12 right-0 p-2 text-zinc-400 hover:text-white transition-colors\"\r\n                            >\r\n                                <X className=\"w-8 h-8\" />\r\n                            </button>\r\n                            <img\r\n                                src={currentImageUrl}\r\n                                alt=\"Profile Full Size\"\r\n                                className=\"w-full h-full object-contain rounded-lg shadow-2xl border border-white/10\"\r\n                            />\r\n                        </motion.div>\r\n                    </>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\SplashIntro.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onComplete'. Either include it or remove the dependency array.","line":13,"column":8,"nodeType":"ArrayExpression","endLine":13,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [onComplete]","fix":{"range":[482,484],"text":"[onComplete]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\n\r\ninterface SplashIntroProps {\r\n    onComplete: () => void;\r\n}\r\n\r\nexport const SplashIntro: React.FC<SplashIntroProps> = ({ onComplete }) => {\r\n    const [visible, setVisible] = useState(true);\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => setVisible(false), 2500);\r\n        const completeTimer = setTimeout(onComplete, 3000);\r\n        return () => { clearTimeout(timer); clearTimeout(completeTimer); };\r\n    }, []);\r\n    return (\r\n        <div className={`fixed inset-0 z-[100] bg-[#09090b] flex flex-col items-center justify-center transition-opacity duration-1000 ${visible ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>\r\n            <div className=\"absolute inset-0 overflow-hidden\">\r\n                <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-orange-500/20 blur-[100px] rounded-full animate-pulse\"></div>\r\n            </div>\r\n            <div className=\"text-center space-y-6 animate-in slide-in-from-bottom-10 duration-1000 fade-in relative z-10\">\r\n                <div className=\"relative inline-block\">\r\n                    <h1 className=\"text-5xl md:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-zinc-500 tracking-tighter\">Fairplatz Design LLC</h1>\r\n                </div>\r\n                <p className=\"text-orange-500 text-sm md:text-base uppercase tracking-[0.5em] font-bold\">Marketing Intelligence Tool</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Tasks\\TaskDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Flag' is defined but never used.","line":2,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":2,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":2,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":75},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":127,"column":53,"nodeType":"JSXOpeningElement","endLine":127,"endColumn":144}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { X, Calendar, Flag, Globe, Lock, Layout, User, Clock, CheckCircle2, AlertCircle, ArrowUpCircle, ArrowDownCircle, MinusCircle } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task } from '@/types/task';\r\nimport { format } from 'date-fns';\r\n\r\ninterface TaskDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    task: Task | null;\r\n}\r\n\r\nexport const TaskDetailsModal = ({ isOpen, onClose, task }: TaskDetailsModalProps) => {\r\n    if (!task) return null;\r\n\r\n    const getPriorityIcon = (priority: string) => {\r\n        switch (priority.toLowerCase()) {\r\n            case 'high': return <ArrowUpCircle className=\"w-3.5 h-3.5\" />;\r\n            case 'medium': return <AlertCircle className=\"w-3.5 h-3.5\" />;\r\n            case 'low': return <ArrowDownCircle className=\"w-3.5 h-3.5\" />;\r\n            default: return <MinusCircle className=\"w-3.5 h-3.5\" />;\r\n        }\r\n    };\r\n\r\n    const getPriorityStyles = (priority: string) => {\r\n        switch (priority.toLowerCase()) {\r\n            case 'high': return 'bg-red-500/10 text-red-400 border-red-500/20';\r\n            case 'medium': return 'bg-amber-500/10 text-amber-400 border-amber-500/20';\r\n            case 'low': return 'bg-blue-500/10 text-blue-400 border-blue-500/20';\r\n            default: return 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20';\r\n        }\r\n    };\r\n\r\n    const getStatusStyles = (status: string) => {\r\n        switch (status.toLowerCase()) {\r\n            case 'completed': return 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20';\r\n            case 'in progress': return 'bg-amber-500/10 text-amber-400 border-amber-500/20';\r\n            default: return 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                        transition={{ type: \"spring\", duration: 0.5, bounce: 0.3 }}\r\n                        className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-[#09090b] border border-white/10 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col max-h-[90vh]\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-white/5 flex items-start justify-between bg-zinc-900/30\">\r\n                            <div className=\"space-y-1 pr-8\">\r\n                                <h2 className=\"text-xl font-bold text-white leading-tight\">{task.title}</h2>\r\n                                <div className=\"flex items-center gap-2 mt-3\">\r\n                                    <div className={`px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border flex items-center gap-1.5 ${getPriorityStyles(task.priority)}`}>\r\n                                        {getPriorityIcon(task.priority)}\r\n                                        {task.priority}\r\n                                    </div>\r\n                                    <div className={`px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${getStatusStyles(task.status)}`}>\r\n                                        {task.status}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 rounded-xl hover:bg-white/5 text-zinc-400 hover:text-white transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Scrollable Content */}\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-6\">\r\n                            <div className=\"space-y-8\">\r\n                                {/* Description */}\r\n                                <div className=\"space-y-3\">\r\n                                    <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                        Description\r\n                                    </label>\r\n                                    <div className=\"bg-zinc-900/50 rounded-xl p-4 border border-white/5\">\r\n                                        <p className=\"text-zinc-300 text-sm leading-relaxed whitespace-pre-wrap\">\r\n                                            {task.description || \"No description provided.\"}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Meta Grid */}\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <div className=\"bg-zinc-900/30 rounded-xl p-4 border border-white/5 space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-1.5 mb-2\">\r\n                                            <Calendar className=\"w-3.5 h-3.5\" />\r\n                                            Due Date\r\n                                        </label>\r\n                                        <p className=\"text-white font-medium text-sm\">\r\n                                            {task.due_date ? format(new Date(task.due_date), 'MMMM d, yyyy') : 'No due date'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"bg-zinc-900/30 rounded-xl p-4 border border-white/5 space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-1.5 mb-2\">\r\n                                            <Layout className=\"w-3.5 h-3.5\" />\r\n                                            Related To\r\n                                        </label>\r\n                                        <p className=\"text-white font-medium text-sm\">\r\n                                            {task.related_to || 'Not specified'}\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"bg-zinc-900/30 rounded-xl p-4 border border-white/5 space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-1.5 mb-2\">\r\n                                            <User className=\"w-3.5 h-3.5\" />\r\n                                            Created By\r\n                                        </label>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center text-xs font-bold text-zinc-400 overflow-hidden ring-2 ring-black\">\r\n                                                {task.profile_url ? (\r\n                                                    <img src={task.profile_url} alt={task.created_by} className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    (task.created_by || 'U').charAt(0).toUpperCase()\r\n                                                )}\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"text-white font-medium text-sm\">{task.created_by}</p>\r\n                                                {task.created_at && (\r\n                                                    <p className=\"text-[10px] text-zinc-500\">\r\n                                                        {format(new Date(task.created_at), 'MMM d, yyyy')}\r\n                                                    </p>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"bg-zinc-900/30 rounded-xl p-4 border border-white/5 space-y-1\">\r\n                                        <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-1.5 mb-2\">\r\n                                            {task.visibility === 'Public' ? <Globe className=\"w-3.5 h-3.5\" /> : <Lock className=\"w-3.5 h-3.5\" />}\r\n                                            Visibility\r\n                                        </label>\r\n                                        <p className=\"text-white font-medium text-sm\">\r\n                                            {task.visibility}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 border-t border-white/5 bg-zinc-900/30 flex justify-end\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"px-6 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-bold transition-colors border border-white/5\"\r\n                            >\r\n                                Close\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Tasks\\TaskModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":2,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":2,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { X, Calendar, Flag, Globe, Lock, AlertCircle, Check, Layout, Type, AlignLeft } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task } from '@/types/task';\r\nimport { Button } from '../ui/Button';\r\n\r\ninterface TaskModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSave: (task: Partial<Task>) => Promise<void>;\r\n    initialData?: Task | null;\r\n}\r\n\r\nexport const TaskModal = ({ isOpen, onClose, onSave, initialData }: TaskModalProps) => {\r\n    const [formData, setFormData] = useState<Partial<Task>>({\r\n        title: '',\r\n        description: '',\r\n        due_date: '',\r\n        priority: 'Medium',\r\n        status: 'Pending',\r\n        visibility: 'Private',\r\n        related_to: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setFormData(initialData);\r\n        } else {\r\n            setFormData({\r\n                title: '',\r\n                description: '',\r\n                due_date: '',\r\n                priority: 'Medium',\r\n                status: 'Pending',\r\n                visibility: 'Private',\r\n                related_to: ''\r\n            });\r\n        }\r\n    }, [initialData, isOpen]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            await onSave(formData);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error('Failed to save task', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={onClose}\r\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-md z-50\"\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                        transition={{ type: \"spring\", duration: 0.5, bounce: 0.3 }}\r\n                        className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl bg-[#09090b] border border-white/10 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col max-h-[90vh]\"\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"p-6 border-b border-white/5 flex items-center justify-between bg-zinc-900/30\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-white mb-1\">\r\n                                    {initialData ? 'Edit Task' : 'New Task'}\r\n                                </h2>\r\n                                <p className=\"text-sm text-zinc-400\">\r\n                                    {initialData ? 'Update the details of your task below.' : 'Create a new task to track your progress.'}\r\n                                </p>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 rounded-xl hover:bg-white/5 text-zinc-400 hover:text-white transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Scrollable Content */}\r\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-6\">\r\n                            <form id=\"task-form\" onSubmit={handleSubmit} className=\"space-y-8\">\r\n                                {/* Main Info Section */}\r\n                                <div className=\"space-y-6\">\r\n                                    {/* Title */}\r\n                                    <div className=\"space-y-3\">\r\n                                        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                            <Type className=\"w-3.5 h-3.5\" />\r\n                                            Task Title\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            required\r\n                                            value={formData.title}\r\n                                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                                            className=\"w-full bg-zinc-900/50 border border-white/5 rounded-xl px-5 py-4 text-lg text-white focus:outline-none focus:border-white/10 focus:ring-1 focus:ring-white/10 transition-all placeholder:text-zinc-600\"\r\n                                            placeholder=\"What needs to be done?\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {/* Description */}\r\n                                    <div className=\"space-y-3\">\r\n                                        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                            <AlignLeft className=\"w-3.5 h-3.5\" />\r\n                                            Description\r\n                                        </label>\r\n                                        <textarea\r\n                                            value={formData.description}\r\n                                            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                                            className=\"w-full bg-zinc-900/50 border border-white/5 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-white/10 focus:ring-1 focus:ring-white/10 transition-all placeholder:text-zinc-600 min-h-[120px] resize-none leading-relaxed\"\r\n                                            placeholder=\"Add more details about this task...\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"h-px bg-white/5\" />\r\n\r\n                                {/* Details Grid */}\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                                    {/* Left Column */}\r\n                                    <div className=\"space-y-6\">\r\n                                        {/* Due Date */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                                <Calendar className=\"w-3.5 h-3.5\" />\r\n                                                Due Date\r\n                                            </label>\r\n                                            <div className=\"relative group\">\r\n                                                <input\r\n                                                    type=\"date\"\r\n                                                    value={formData.due_date}\r\n                                                    onChange={(e) => setFormData({ ...formData, due_date: e.target.value })}\r\n                                                    className=\"w-full bg-zinc-900/50 border border-white/5 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/10 focus:ring-1 focus:ring-white/10 transition-all [color-scheme:dark]\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Related To */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                                <Layout className=\"w-3.5 h-3.5\" />\r\n                                                Related To\r\n                                            </label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.related_to}\r\n                                                onChange={(e) => setFormData({ ...formData, related_to: e.target.value })}\r\n                                                className=\"w-full bg-zinc-900/50 border border-white/5 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-white/10 focus:ring-1 focus:ring-white/10 transition-all placeholder:text-zinc-600\"\r\n                                                placeholder=\"e.g., Project X\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Right Column */}\r\n                                    <div className=\"space-y-6\">\r\n                                        {/* Priority */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                                <Flag className=\"w-3.5 h-3.5\" />\r\n                                                Priority\r\n                                            </label>\r\n                                            <div className=\"grid grid-cols-3 gap-2\">\r\n                                                {(['Low', 'Medium', 'High'] as const).map((p) => (\r\n                                                    <button\r\n                                                        key={p}\r\n                                                        type=\"button\"\r\n                                                        onClick={() => setFormData({ ...formData, priority: p })}\r\n                                                        className={`relative py-2.5 rounded-xl text-xs font-bold border transition-all duration-300 overflow-hidden group ${formData.priority === p\r\n                                                            ? p === 'High' ? 'bg-red-500/10 border-red-500/20 text-red-400'\r\n                                                                : p === 'Medium' ? 'bg-amber-500/10 border-amber-500/20 text-amber-400'\r\n                                                                    : 'bg-blue-500/10 border-blue-500/20 text-blue-400'\r\n                                                            : 'bg-zinc-900/30 border-white/5 text-zinc-500 hover:bg-white/5 hover:text-zinc-300'\r\n                                                            }`}\r\n                                                    >\r\n                                                        <span className=\"relative z-10\">{p}</span>\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* Visibility */}\r\n                                        <div className=\"space-y-3\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\r\n                                                <Globe className=\"w-3.5 h-3.5\" />\r\n                                                Visibility\r\n                                            </label>\r\n                                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => setFormData({ ...formData, visibility: 'Private' })}\r\n                                                    className={`relative py-2.5 rounded-xl text-xs font-bold border flex items-center justify-center gap-2 transition-all duration-300 ${formData.visibility === 'Private'\r\n                                                        ? 'bg-zinc-800 border-zinc-600 text-white shadow-lg shadow-black/20'\r\n                                                        : 'bg-zinc-900/30 border-white/5 text-zinc-500 hover:bg-white/5 hover:text-zinc-300'\r\n                                                        }`}\r\n                                                >\r\n                                                    <Lock className=\"w-3.5 h-3.5\" /> Private\r\n                                                </button>\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => setFormData({ ...formData, visibility: 'Public' })}\r\n                                                    className={`relative py-2.5 rounded-xl text-xs font-bold border flex items-center justify-center gap-2 transition-all duration-300 ${formData.visibility === 'Public'\r\n                                                        ? 'bg-emerald-500/10 border-emerald-500/20 text-emerald-400'\r\n                                                        : 'bg-zinc-900/30 border-white/5 text-zinc-500 hover:bg-white/5 hover:text-zinc-300'\r\n                                                        }`}\r\n                                                >\r\n                                                    <Globe className=\"w-3.5 h-3.5\" /> Public\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-6 border-t border-white/5 bg-zinc-900/30 flex justify-end gap-3\">\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                onClick={onClose}\r\n                                type=\"button\"\r\n                                className=\"glass-button border-white/10 hover:border-white/20 text-zinc-400 hover:text-white px-6 rounded-xl\"\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => document.getElementById('task-form')?.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }))}\r\n                                isLoading={loading}\r\n                                className=\"bg-white text-black hover:bg-zinc-200 border-0 shadow-lg shadow-white/10 px-8 rounded-xl font-bold\"\r\n                            >\r\n                                {initialData ? 'Save Changes' : 'Create Task'}\r\n                            </Button>\r\n                        </div>\r\n                    </motion.div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ZohoPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\DatabaseDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[413,416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[413,416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[438,441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[438,441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[515,518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[515,518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[620,623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[620,623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { Hash, Trash2, Edit2, Plus, Building2, MapPin, Calendar, Layers, User, Clock, Globe, Info, FileText, Link as LinkIcon, Briefcase, Flag } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface DatabaseDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    data: any;\r\n    onEdit: (item: any) => void;\r\n    onDelete: (id: string) => void;\r\n    onAddToLeads: (item: any) => void;\r\n}\r\n\r\nconst DetailItem = ({ label, value, icon: Icon, isLink = false, fullWidth = false }: any) => {\r\n    if (!value) return null;\r\n    return (\r\n        <div className={`group relative overflow-hidden bg-white/5 hover:bg-white/10 p-3 rounded-xl border border-white/5 hover:border-white/10 transition-all duration-300 ${fullWidth ? 'md:col-span-2 lg:col-span-3' : ''}`}>\r\n            <div className=\"flex items-start gap-3\">\r\n                <div className=\"mt-0.5 min-w-[16px]\">\r\n                    {Icon && <Icon className=\"w-4 h-4 text-zinc-500 group-hover:text-purple-400 transition-colors\" />}\r\n                </div>\r\n                <div className=\"flex-1 overflow-hidden\">\r\n                    <div className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-1\">{label}</div>\r\n                    <div className=\"text-zinc-200 font-medium break-words text-sm leading-relaxed\">\r\n                        {isLink ? (\r\n                            <a href={value} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-purple-400 hover:text-purple-300 hover:underline flex items-center gap-1.5 transition-colors truncate\">\r\n                                {value} <LinkIcon className=\"w-3 h-3\" />\r\n                            </a>\r\n                        ) : (\r\n                            value\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DatabaseDetailsModal: React.FC<DatabaseDetailsModalProps> = ({ isOpen, onClose, data, onEdit, onDelete, onAddToLeads }) => {\r\n    if (!data) return null;\r\n\r\n    // Helper to format date\r\n    const formatDate = (dateStr: string) => {\r\n        if (!dateStr) return null;\r\n        return new Date(dateStr).toLocaleString(undefined, {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    // Fields configuration based on user request\r\n    // ID, City, Country, Event, Event_logo, Event_Type, Exhibition_Size, Exhibitor_List_FILE, Exhibitor_List_Link, Floorplan, Floorplan_Link, Frequency, Industry, Last_edition_n_Exhibitors, Level, Modified_Time, Modified_User, Note1, Organiser, Starting_Date, Website, World_Area\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Record Details\" maxWidth=\"max-w-4xl\">\r\n            <div className=\"flex flex-col h-[80vh]\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-white/5 bg-zinc-900/50\">\r\n                    <h2 className=\"text-2xl font-bold text-white tracking-tight mb-2\">\r\n                        {data.Event || data.Show || 'Unknown Event'}\r\n                    </h2>\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        <span className=\"text-zinc-400 text-xs font-medium flex items-center gap-1.5 bg-white/5 px-2.5 py-1 rounded-full border border-white/5\">\r\n                            <Hash className=\"w-3 h-3\" /> {data.ID}\r\n                        </span>\r\n                        {data.City && (\r\n                            <span className=\"text-zinc-400 text-xs font-medium flex items-center gap-1.5 bg-white/5 px-2.5 py-1 rounded-full border border-white/5\">\r\n                                <MapPin className=\"w-3 h-3\" /> {data.City}, {data.Country}\r\n                            </span>\r\n                        )}\r\n                        {data.Starting_Date && (\r\n                            <span className=\"text-zinc-400 text-xs font-medium flex items-center gap-1.5 bg-white/5 px-2.5 py-1 rounded-full border border-white/5\">\r\n                                <Calendar className=\"w-3 h-3\" /> {data.Starting_Date}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar p-6 bg-black/20\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                        {/* Primary Info */}\r\n                        <DetailItem label=\"Event Type\" value={data.Event_Type} icon={Layers} />\r\n                        <DetailItem label=\"Exhibition Size\" value={data.Exhibition_Size} icon={Building2} />\r\n                        <DetailItem label=\"Industry\" value={data.Industry} icon={Briefcase} />\r\n                        <DetailItem label=\"Frequency\" value={data.Frequency} icon={Clock} />\r\n                        <DetailItem label=\"Level\" value={data.Level} icon={Flag} />\r\n                        <DetailItem label=\"World Area\" value={data.World_Area} icon={Globe} />\r\n                        <DetailItem label=\"Organiser\" value={data.Organiser} icon={User} />\r\n                        <DetailItem label=\"Last Edition Exhibitors\" value={data.Last_edition_n_Exhibitors} icon={User} />\r\n\r\n                        {/* Links & Files */}\r\n                        <DetailItem label=\"Website\" value={data.Website} icon={Globe} isLink fullWidth />\r\n                        <DetailItem label=\"Exhibitor List Link\" value={data.Exhibitor_List_Link} icon={LinkIcon} isLink fullWidth />\r\n                        <DetailItem label=\"Floorplan Link\" value={data.Floorplan_Link} icon={LinkIcon} isLink fullWidth />\r\n                        <DetailItem label=\"Exhibitor List File\" value={data.Exhibitor_List_FILE} icon={FileText} fullWidth />\r\n                        <DetailItem label=\"Floorplan File\" value={data.Floorplan} icon={FileText} fullWidth />\r\n                        <DetailItem label=\"Event Logo\" value={data.Event_logo} icon={FileText} fullWidth />\r\n\r\n                        {/* Metadata */}\r\n                        <DetailItem label=\"Note\" value={data.Note1} icon={Info} fullWidth />\r\n                        <DetailItem label=\"Modified User\" value={data.Modified_User} icon={User} />\r\n                        <DetailItem label=\"Modified Time\" value={formatDate(data.Modified_Time)} icon={Clock} />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-4 border-t border-white/5 bg-zinc-900/80 backdrop-blur-xl flex gap-3 justify-end\">\r\n                    <Button\r\n                        onClick={() => {\r\n                            if (confirm('Are you sure you want to delete this record?')) {\r\n                                onDelete(data.ID);\r\n                                onClose();\r\n                            }\r\n                        }}\r\n                        className=\"h-10 px-4 text-sm font-medium bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 hover:border-red-500/30\"\r\n                        leftIcon={<Trash2 className=\"w-4 h-4\" />}\r\n                    >\r\n                        Delete\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => onEdit(data)}\r\n                        variant=\"secondary\"\r\n                        className=\"h-10 px-4 text-sm font-medium glass-button\"\r\n                        leftIcon={<Edit2 className=\"w-4 h-4\" />}\r\n                    >\r\n                        Edit\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => onAddToLeads(data)}\r\n                        className=\"h-10 px-6 text-sm font-medium bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-900/20\"\r\n                        leftIcon={<Plus className=\"w-4 h-4\" />}\r\n                    >\r\n                        Add to Leads\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\DatabaseFormModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[408,411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[408,411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Save, Database, Hash, Calendar } from 'lucide-react';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { zohoApi } from '@/lib/zoho';\r\n\r\ninterface DatabaseFormModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    initialData?: any;\r\n}\r\n\r\nexport const DatabaseFormModal: React.FC<DatabaseFormModalProps> = ({ isOpen, onClose, onSuccess, initialData }) => {\r\n    const [formData, setFormData] = useState({\r\n        Show: '',\r\n        Booth_No: '',\r\n        Booth_Sqm: '',\r\n        Attended_Year: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setFormData(initialData);\r\n        } else {\r\n            setFormData({\r\n                Show: '',\r\n                Booth_No: '',\r\n                Booth_Sqm: '',\r\n                Attended_Year: ''\r\n            });\r\n        }\r\n    }, [initialData, isOpen]);\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (initialData?.ID) {\r\n                await zohoApi.updateRecord('Database_Report', initialData.ID, formData);\r\n            } else {\r\n                await zohoApi.addRecord('Database_Form', formData);\r\n            }\r\n            onSuccess();\r\n            onClose();\r\n        } catch (error) {\r\n            alert('Failed to save record');\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={initialData ? 'Edit Record' : 'Add New Record'}\r\n            maxWidth=\"max-w-md\"\r\n        >\r\n            <div className=\"p-6 space-y-6\">\r\n                <SoftInput label=\"Show Name\" value={formData.Show} onChange={(e) => setFormData({ ...formData, Show: e.target.value })} placeholder=\"e.g. Gitex\" icon={<Database className=\"w-4 h-4\" />} />\r\n                <div className=\"grid grid-cols-2 gap-6\">\r\n                    <SoftInput label=\"Booth No\" value={formData.Booth_No} onChange={(e) => setFormData({ ...formData, Booth_No: e.target.value })} placeholder=\"e.g. A-123\" icon={<Hash className=\"w-4 h-4\" />} />\r\n                    <SoftInput label=\"Booth Sqm\" value={formData.Booth_Sqm} onChange={(e) => setFormData({ ...formData, Booth_Sqm: e.target.value })} placeholder=\"e.g. 24\" />\r\n                </div>\r\n                <SoftInput label=\"Attended Year\" value={formData.Attended_Year} onChange={(e) => setFormData({ ...formData, Attended_Year: e.target.value })} placeholder=\"e.g. 2024\" icon={<Calendar className=\"w-4 h-4\" />} />\r\n\r\n                <div className=\"flex justify-end gap-3 pt-4 border-t border-white/5\">\r\n                    <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\r\n                    <Button onClick={handleSubmit} isLoading={loading} leftIcon={<Save className=\"w-4 h-4\" />}>\r\n                        Save Record\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\DatabaseTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SoftInput' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[601,604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[601,604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[824,827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[824,827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2029,2032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2029,2032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'criteriaParts' is never reassigned. Use 'const' instead.","line":78,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":78,"endColumn":30,"fix":{"range":[3012,3035],"text":"const criteriaParts = [];"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4274,4277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4274,4277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'selectedCountries'. Either include it or remove the dependency array.","line":116,"column":8,"nodeType":"ArrayExpression","endLine":116,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [page, selectedCountries]","fix":{"range":[4445,4451],"text":"[page, selectedCountries]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":121,"column":8,"nodeType":"ArrayExpression","endLine":121,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [debouncedSearch, fetchData, selectedCountries]","fix":{"range":[4572,4608],"text":"[debouncedSearch, fetchData, selectedCountries]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'continents' is defined but never used.","line":123,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":64},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5233,5236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5233,5236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5325,5328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5325,5328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5547,5550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5547,5550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'i' is defined but never used.","line":280,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":280,"endColumn":50}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { zohoApi } from '@/lib/zoho';\r\nimport { RefreshCw, Trash2, Edit2, Plus, Search, Filter } from 'lucide-react';\r\nimport { FilterPopover } from './FilterPopover';\r\nimport { DatabaseFormModal } from './DatabaseFormModal';\r\nimport { DatabaseDetailsModal } from './DatabaseDetailsModal';\r\nimport { Button } from '../ui/Button';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Skeleton } from '../ui/Skeleton';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const DatabaseTable = () => {\r\n    const [data, setData] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [selectedItem, setSelectedItem] = useState<any>(null);\r\n    const [search, setSearch] = useState('');\r\n    const [debouncedSearch, setDebouncedSearch] = useState('');\r\n\r\n    // Pagination\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [page, setPage] = useState(0);\r\n    const LIMIT = 100;\r\n    const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n\r\n    // Filters\r\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\r\n    const [availableCountries, setAvailableCountries] = useState<string[]>([]);\r\n    const [selectedCountries, setSelectedCountries] = useState<string[]>([]);\r\n\r\n    // Fetch unique values for filters\r\n    useEffect(() => {\r\n        const fetchFilters = async () => {\r\n            try {\r\n                const countries = new Set<string>();\r\n\r\n                // Fetch up to 5 pages (1000 records) to get a good sample of countries\r\n                const MAX_PAGES = 5;\r\n                const BATCH_SIZE = 100;\r\n\r\n                for (let i = 0; i < MAX_PAGES; i++) {\r\n                    const res = await zohoApi.getRecords('Database_Report', undefined, i * BATCH_SIZE, BATCH_SIZE);\r\n                    if (res.data && Array.isArray(res.data)) {\r\n                        res.data.forEach((item: any) => {\r\n                            if (item.Country) countries.add(item.Country);\r\n                        });\r\n\r\n                        if (res.data.length < BATCH_SIZE) break;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                setAvailableCountries(Array.from(countries).sort());\r\n            } catch (err) {\r\n                console.error('Failed to fetch filter values', err);\r\n            }\r\n        };\r\n        fetchFilters();\r\n    }, []);\r\n\r\n    // Manual debounce\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedSearch(search);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n    }, [search]);\r\n\r\n    const fetchData = useCallback(async (reset = false, searchTerm = '') => {\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            const from = reset ? 0 : page * LIMIT;\r\n\r\n            // Construct criteria\r\n            let criteriaParts = [];\r\n\r\n            // Search\r\n            if (searchTerm) {\r\n                criteriaParts.push(`(Show.contains(\"${searchTerm}\"))`);\r\n            }\r\n\r\n            // Filters\r\n            if (selectedCountries.length > 0) {\r\n                const countryCriteria = selectedCountries.map(c => `Country == \"${c}\"`).join(' || ');\r\n                criteriaParts.push(`(${countryCriteria})`);\r\n            }\r\n\r\n            const criteria = criteriaParts.length > 0 ? criteriaParts.join(' && ') : undefined;\r\n\r\n            const res = await zohoApi.getRecords('Database_Report', criteria, from, LIMIT);\r\n\r\n            if (res.code === 3000) {\r\n                if (reset) {\r\n                    setData(res.data);\r\n                    setPage(1);\r\n                } else {\r\n                    setData(prev => [...prev, ...res.data]);\r\n                    setPage(prev => prev + 1);\r\n                }\r\n                setHasMore(res.data.length === LIMIT);\r\n            } else if (res.code === 3001 || res.message?.includes('No data')) {\r\n                if (reset) setData([]);\r\n                setHasMore(false);\r\n            } else {\r\n                setError('Failed to fetch data. Check API connection.');\r\n            }\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            setError(err.message || 'An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        fetchData(true, debouncedSearch);\r\n        if (debouncedSearch) setPage(0);\r\n    }, [debouncedSearch, selectedCountries]);\r\n\r\n    const handleApplyFilters = (countries: string[], continents: string[]) => {\r\n        setSelectedCountries(countries);\r\n    };\r\n\r\n    const handleClearFilters = () => {\r\n        setSelectedCountries([]);\r\n    };\r\n\r\n    const loadMore = () => {\r\n        if (!loading && hasMore) {\r\n            fetchData(false, debouncedSearch);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure?')) return;\r\n        try {\r\n            await zohoApi.deleteRecord('Database_Report', id);\r\n            setData(prev => prev.filter(item => item.ID !== id));\r\n        } catch (err: any) {\r\n            alert(err.message);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleAdd = () => {\r\n        setSelectedItem(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleRowClick = (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsDetailsOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col gap-6\">\r\n            <DatabaseFormModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSuccess={() => fetchData(true, debouncedSearch)}\r\n                initialData={selectedItem}\r\n            />\r\n\r\n            <DatabaseDetailsModal\r\n                isOpen={isDetailsOpen}\r\n                onClose={() => setIsDetailsOpen(false)}\r\n                data={selectedItem}\r\n                onEdit={(item) => {\r\n                    setIsDetailsOpen(false);\r\n                    handleEdit(item);\r\n                }}\r\n                onDelete={handleDelete}\r\n                onAddToLeads={(item) => alert(`Added ${item.Company} to leads (Simulation)`)}\r\n            />\r\n\r\n            {/* Controls Toolbar */}\r\n            <div className=\"relative z-30 flex flex-col lg:flex-row gap-4 p-4 bg-zinc-900/50 border border-white/5 rounded-2xl backdrop-blur-xl shadow-xl\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1 group\">\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500/10 to-purple-500/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                    <div className=\"relative flex items-center\">\r\n                        <Search className=\"absolute left-4 w-4 h-4 text-zinc-400 group-hover:text-orange-400 transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search database...\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                            className=\"w-full bg-black/20 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-sm text-white focus:outline-none focus:border-orange-500/50 focus:ring-1 focus:ring-orange-500/50 transition-all placeholder:text-zinc-600 hover:border-white/20\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions Group */}\r\n                <div className=\"flex items-center gap-3\">\r\n                    {/* Filter */}\r\n                    <div className=\"relative\">\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            onClick={() => setIsFilterOpen(!isFilterOpen)}\r\n                            className={`glass-button h-11 px-5 border-white/10 hover:border-white/20 ${selectedCountries.length > 0 ? 'border-orange-500/50 text-orange-500 bg-orange-500/10 hover:bg-orange-500/20' : 'text-zinc-400 hover:text-white'}`}\r\n                            leftIcon={<Filter className=\"w-4 h-4\" />}\r\n                        >\r\n                            Filters {selectedCountries.length > 0 && `(${selectedCountries.length})`}\r\n                        </Button>\r\n\r\n                        <FilterPopover\r\n                            isOpen={isFilterOpen}\r\n                            onClose={() => setIsFilterOpen(false)}\r\n                            availableCountries={availableCountries}\r\n                            availableContinents={[]}\r\n                            selectedCountries={selectedCountries}\r\n                            selectedContinents={[]}\r\n                            onApply={handleApplyFilters}\r\n                            onClear={handleClearFilters}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"w-px h-8 bg-white/10 mx-1 hidden md:block\" />\r\n\r\n                    {/* Refresh */}\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        onClick={() => fetchData(true, debouncedSearch)}\r\n                        isLoading={loading}\r\n                        className=\"glass-button h-11 w-11 p-0 flex items-center justify-center border-white/10 hover:border-white/20 text-zinc-400 hover:text-white\"\r\n                    >\r\n                        <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    </Button>\r\n\r\n                    {/* Add Button */}\r\n                    <Button\r\n                        onClick={handleAdd}\r\n                        leftIcon={<Plus className=\"w-4 h-4\" />}\r\n                        className=\"h-11 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white border-0 shadow-lg shadow-orange-500/20 px-6 font-medium\"\r\n                    >\r\n                        Add Record\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl text-sm flex items-center gap-2 animate-fade-in\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\" />\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex-1 glass-panel rounded-2xl overflow-hidden flex flex-col border border-white/5 bg-black/40\">\r\n                <div className=\"overflow-x-auto custom-scrollbar flex-1\">\r\n                    <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                        <thead className=\"bg-zinc-900/80 text-zinc-400 uppercase text-[10px] font-bold sticky top-0 z-10 backdrop-blur-md border-b border-white/5 tracking-wider\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3\">Show</th>\r\n                                <th className=\"px-6 py-3\">Exhibition Size</th>\r\n                                <th className=\"px-6 py-3 hidden md:table-cell\">Starting Date</th>\r\n                                <th className=\"px-6 py-3 hidden lg:table-cell\">City</th>\r\n                                <th className=\"px-6 py-3 hidden xl:table-cell\">Country</th>\r\n                                <th className=\"px-6 py-3 text-right\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-white/5\">\r\n                            {loading && data.length === 0 ? (\r\n                                Array.from({ length: 10 }).map((_, i) => (\r\n                                    <tr key={i}>\r\n                                        <td className=\"px-6 py-4\"><Skeleton className=\"h-5 w-40\" /></td>\r\n                                        <td className=\"px-6 py-4\"><Skeleton className=\"h-5 w-16\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden md:table-cell\"><Skeleton className=\"h-5 w-16\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden lg:table-cell\"><Skeleton className=\"h-5 w-16\" /></td>\r\n                                        <td className=\"px-6 py-4 text-right\"><Skeleton className=\"h-8 w-24 ml-auto\" /></td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                data.map((item, i) => (\r\n                                    <tr\r\n                                        key={item.ID}\r\n                                        onClick={() => handleRowClick(item)}\r\n                                        className=\"hover:bg-white/[0.02] transition-colors group cursor-pointer border-b border-white/[0.02] last:border-0\"\r\n                                    >\r\n                                        <td className=\"px-6 py-3 font-medium text-zinc-200 text-sm\">{item.Show || item.Event}</td>\r\n                                        <td className=\"px-6 py-3 text-sm text-zinc-400\">{item.Exhibition_Size || item.Booth_Sqm}</td>\r\n                                        <td className=\"px-6 py-3 hidden md:table-cell text-sm text-zinc-400\">{item.Starting_Date}</td>\r\n                                        <td className=\"px-6 py-3 hidden lg:table-cell text-sm text-zinc-400\">{item.City}</td>\r\n                                        <td className=\"px-6 py-3 hidden xl:table-cell text-sm text-zinc-400\">{item.Country}</td>\r\n                                        <td className=\"px-6 py-3 text-right flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\" onClick={(e) => e.stopPropagation()}>\r\n                                            <button onClick={() => handleEdit(item)} className=\"p-1.5 hover:bg-white/10 rounded-lg text-zinc-400 hover:text-white transition-colors\"><Edit2 className=\"w-3.5 h-3.5\" /></button>\r\n                                            <button onClick={() => handleDelete(item.ID)} className=\"p-1.5 hover:bg-red-500/20 rounded-lg text-zinc-400 hover:text-red-500 transition-colors\"><Trash2 className=\"w-3.5 h-3.5\" /></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    {loading && data.length > 0 && (\r\n                        <div className=\"p-4 space-y-2\">\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    {hasMore && !loading && data.length > 0 && (\r\n                        <div className=\"p-4 flex justify-center border-t border-white/5\">\r\n                            <Button variant=\"secondary\" onClick={loadMore} className=\"glass-button w-full md:w-auto\">\r\n                                Load More Records\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {!loading && data.length === 0 && (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-zinc-500 gap-4 min-h-[300px]\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center\">\r\n                            <Search className=\"w-8 h-8 opacity-40\" />\r\n                        </div>\r\n                        <p className=\"text-lg font-medium\">No records found</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ExhibitorDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":4,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":4,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":4,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":4,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":77},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":4,"column":79,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Building2' is defined but never used.","line":4,"column":85,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":94},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":4,"column":96,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":101},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[372,375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[372,375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[397,400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[397,400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[474,477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[474,477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[573,576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[573,576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1722,1725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1722,1725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onDelete' is defined but never used.","line":74,"column":110,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":118},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3951,3954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3951,3954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { Globe, MapPin, Hash, ExternalLink, Trash2, Edit2, Plus, User, Clock, Info, Building2, Phone } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface ExhibitorDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    data: any;\r\n    onEdit: (item: any) => void;\r\n    onDelete: (id: string) => void;\r\n    onAddToLeads: (item: any) => void;\r\n}\r\n\r\nconst Field = ({ label, value, isLink = false, href }: { label: string, value: any, isLink?: boolean, href?: string }) => {\r\n    if (!value) return null;\r\n    return (\r\n        <div className=\"flex flex-col gap-1\">\r\n            <span className=\"text-[10px] uppercase tracking-wider font-bold text-zinc-500\">{label}</span>\r\n            {isLink ? (\r\n                <a href={href || value} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-sm font-medium text-blue-400 hover:text-blue-300 hover:underline flex items-center gap-1 w-fit\">\r\n                    {value} <ExternalLink className=\"w-3 h-3 opacity-50\" />\r\n                </a>\r\n            ) : (\r\n                <span className=\"text-sm font-medium text-zinc-200\">{value}</span>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Section = ({ title, children }: { title: string, children: React.ReactNode }) => (\r\n    <div className=\"space-y-3\">\r\n        <h3 className=\"text-xs font-bold text-zinc-600 uppercase tracking-widest border-b border-white/5 pb-2\">{title}</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-4\">\r\n            {children}\r\n        </div>\r\n    </div>\r\n);\r\n\r\nconst SubformTable = ({ data }: { data: any[] }) => {\r\n    if (!data || !Array.isArray(data) || data.length === 0) return null;\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            <h3 className=\"text-xs font-bold text-zinc-600 uppercase tracking-widest border-b border-white/5 pb-2\">People</h3>\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                    <thead className=\"text-zinc-500 font-bold text-[10px] uppercase tracking-wider\">\r\n                        <tr>\r\n                            <th className=\"pb-2 pr-4\">Name</th>\r\n                            <th className=\"pb-2 pr-4\">Role</th>\r\n                            <th className=\"pb-2 pr-4\">Email</th>\r\n                            <th className=\"pb-2 pr-4\">Mobile</th>\r\n                            <th className=\"pb-2\">Website</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-white/5\">\r\n                        {data.map((item, i) => (\r\n                            <tr key={i} className=\"group\">\r\n                                <td className=\"py-2 pr-4 text-zinc-300 font-medium group-hover:text-white transition-colors\">{item.Name}</td>\r\n                                <td className=\"py-2 pr-4\">{item.Role}</td>\r\n                                <td className=\"py-2 pr-4\">{item.Mail}</td>\r\n                                <td className=\"py-2 pr-4\">{item.Mobile}</td>\r\n                                <td className=\"py-2\">{item.website || item.Website}</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const ExhibitorDetailsModal: React.FC<ExhibitorDetailsModalProps> = ({ isOpen, onClose, data, onEdit, onDelete, onAddToLeads }) => {\r\n    if (!data) return null;\r\n\r\n    const formatDate = (dateStr: string) => {\r\n        if (!dateStr) return null;\r\n        return new Date(dateStr).toLocaleString(undefined, {\r\n            year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    // Helper to extract URL/Value from object\r\n    const extract = (val: any) => {\r\n        if (!val) return '';\r\n        if (typeof val === 'string') return val;\r\n        if (typeof val === 'object') return val.value || val.url || JSON.stringify(val);\r\n        return String(val);\r\n    };\r\n\r\n    const website = extract(data.Website || data.website || data.Company_Website);\r\n    const linkedin = extract(data.Company_Linkedin);\r\n    const eventsUrl = data.View_Company_Events_Url || data.View_Company_Events;\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Exhibitor Details\" maxWidth=\"max-w-4xl\">\r\n            <div className=\"flex flex-col h-[80vh] md:h-auto\">\r\n                {/* Minimal Header */}\r\n                <div className=\"px-8 pt-8 pb-4\">\r\n                    <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                        <div>\r\n                            <h2 className=\"text-2xl md:text-3xl font-bold text-white tracking-tight\">{data.Company}</h2>\r\n                            <div className=\"flex items-center gap-3 mt-2 text-sm text-zinc-500\">\r\n                                <span className=\"flex items-center gap-1\"><Hash className=\"w-3 h-3\" /> {data.ID}</span>\r\n                                {data.FP_Level && (\r\n                                    <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide border ${data.FP_Level === '1' ? 'bg-red-500/10 text-red-500 border-red-500/20' :\r\n                                        data.FP_Level === '2' ? 'bg-orange-500/10 text-orange-500 border-orange-500/20' :\r\n                                            data.FP_Level === '3' ? 'bg-yellow-500/10 text-yellow-500 border-yellow-500/20' :\r\n                                                'bg-zinc-500/10 text-zinc-400 border-zinc-500/20'\r\n                                        }`}>\r\n                                        Level {data.FP_Level}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        {eventsUrl && (\r\n                            <a href={eventsUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-xs font-medium text-zinc-400 hover:text-white flex items-center gap-1 transition-colors border border-white/10 px-3 py-1.5 rounded-lg hover:bg-white/5\">\r\n                                View Events <ExternalLink className=\"w-3 h-3\" />\r\n                            </a>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Scrollable Content */}\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar px-8 py-4 space-y-8\">\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 gap-x-4\">\r\n                        <Field label=\"Type\" value={data.Company_Type || data.Type} />\r\n                        <Field label=\"Events\" value={Array.isArray(data.Events) ? data.Events.join(', ') : data.Events} />\r\n                    </div>\r\n\r\n                    {(website || linkedin || data.Contact_Details) && (\r\n                        <Section title=\"Contact & Web\">\r\n                            <Field label=\"Website\" value={website} isLink href={website} />\r\n                            <Field label=\"LinkedIn\" value={linkedin} isLink href={linkedin} />\r\n                            <Field label=\"Contact\" value={data.Contact_Details} />\r\n                        </Section>\r\n                    )}\r\n\r\n                    {(data.City || data.Country || data.Area || data.World_Area) && (\r\n                        <Section title=\"Location\">\r\n                            <Field label=\"City\" value={data.City} />\r\n                            <Field label=\"Country\" value={data.Country} />\r\n                            <Field label=\"Area\" value={data.Area || data.World_Area} />\r\n                        </Section>\r\n                    )}\r\n\r\n                    {data.People && (\r\n                        <SubformTable data={data.People} />\r\n                    )}\r\n\r\n                    {data.Notes && (\r\n                        <div className=\"space-y-2\">\r\n                            <h3 className=\"text-xs font-bold text-zinc-600 uppercase tracking-widest border-b border-white/5 pb-2\">Notes</h3>\r\n                            <p className=\"text-sm text-zinc-300 leading-relaxed whitespace-pre-wrap\">{data.Notes}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"pt-4 border-t border-white/5\">\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            <Field label=\"Added By\" value={data.Added_User} />\r\n                            <Field label=\"Added Time\" value={formatDate(data.Added_Time)} />\r\n                            <Field label=\"Modified By\" value={data.Modified_User} />\r\n                            <Field label=\"Modified Time\" value={formatDate(data.Modified_Time)} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Minimal Footer */}\r\n                <div className=\"p-6 border-t border-white/5 bg-zinc-900/50 backdrop-blur-sm flex justify-end gap-3\">\r\n                    <Button variant=\"ghost\" onClick={onClose} className=\"text-zinc-400 hover:text-white\">Close</Button>\r\n                    <Button onClick={() => onEdit(data)} variant=\"secondary\" className=\"glass-button\" leftIcon={<Edit2 className=\"w-4 h-4\" />}>Edit</Button>\r\n                    <Button onClick={() => onAddToLeads(data)} className=\"bg-green-600 hover:bg-green-500 text-white border-0\" leftIcon={<Plus className=\"w-4 h-4\" />}>Add to Leads</Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ExhibitorFormModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[941,944],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[941,944],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'extractValue'. Either include it or remove the dependency array.","line":70,"column":8,"nodeType":"ArrayExpression","endLine":70,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [extractValue, initialData, isOpen]","fix":{"range":[2540,2561],"text":"[extractValue, initialData, isOpen]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Save, Globe, MapPin, Phone, Linkedin, Building2, Hash } from 'lucide-react';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { zohoApi } from '@/lib/zoho';\r\n\r\ninterface ExhibitorFormModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    initialData?: any;\r\n}\r\n\r\nexport const ExhibitorFormModal: React.FC<ExhibitorFormModalProps> = ({ isOpen, onClose, onSuccess, initialData }) => {\r\n    const [formData, setFormData] = useState({\r\n        Company: '',\r\n        Company_Type: '',\r\n        Website: '',\r\n        City: '',\r\n        Country: '',\r\n        Area: '',\r\n        Contact_Details: '',\r\n        Company_Linkedin: '',\r\n        FP_Level: '',\r\n        Events: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const extractValue = (val: any): string => {\r\n        if (!val) return '';\r\n        if (typeof val === 'string') return val;\r\n        if (Array.isArray(val)) {\r\n            return val.length > 0 ? extractValue(val[0]) : '';\r\n        }\r\n        if (typeof val === 'object') {\r\n            return val.url || val.value || '';\r\n        }\r\n        return '';\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setFormData({\r\n                Company: initialData.Company || '',\r\n                Company_Type: initialData.Company_Type || initialData.Type || '',\r\n                Website: extractValue(initialData.Website || initialData.Company_Website || initialData.website),\r\n                City: initialData.City || '',\r\n                Country: initialData.Country || '',\r\n                Area: initialData.Area || initialData.World_Area || '',\r\n                Contact_Details: initialData.Contact_Details || '',\r\n                Company_Linkedin: extractValue(initialData.Company_Linkedin || initialData.Linkedin),\r\n                FP_Level: initialData.FP_Level || '',\r\n                Events: Array.isArray(initialData.Events) ? initialData.Events.join(', ') : (initialData.Events || '')\r\n            });\r\n        } else {\r\n            setFormData({\r\n                Company: '',\r\n                Company_Type: '',\r\n                Website: '',\r\n                City: '',\r\n                Country: '',\r\n                Area: '',\r\n                Contact_Details: '',\r\n                Company_Linkedin: '',\r\n                FP_Level: '',\r\n                Events: ''\r\n            });\r\n        }\r\n    }, [initialData, isOpen]);\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (initialData?.ID) {\r\n                await zohoApi.updateRecord('Exhibitor_List', initialData.ID, formData);\r\n            } else {\r\n                await zohoApi.addRecord('Exhibitor', formData);\r\n            }\r\n            onSuccess();\r\n            onClose();\r\n        } catch (error) {\r\n            alert('Failed to save record');\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={initialData ? 'Edit Exhibitor' : 'Add New Exhibitor'}\r\n        >\r\n            <div className=\"p-6 space-y-6\">\r\n                <SoftInput\r\n                    label=\"Company Name\"\r\n                    value={formData.Company}\r\n                    onChange={(e) => setFormData({ ...formData, Company: e.target.value })}\r\n                    placeholder=\"e.g. Acme Corp\"\r\n                    icon={<Building2 className=\"w-4 h-4\" />}\r\n                />\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <SoftInput label=\"Type\" value={formData.Company_Type} onChange={(e) => setFormData({ ...formData, Company_Type: e.target.value })} placeholder=\"e.g. Technology\" />\r\n                    <SoftInput label=\"Website\" value={formData.Website} onChange={(e) => setFormData({ ...formData, Website: e.target.value })} placeholder=\"e.g. acme.com\" icon={<Globe className=\"w-4 h-4\" />} />\r\n\r\n                    <SoftInput label=\"City\" value={formData.City} onChange={(e) => setFormData({ ...formData, City: e.target.value })} placeholder=\"e.g. London\" icon={<MapPin className=\"w-4 h-4\" />} />\r\n                    <SoftInput label=\"Country\" value={formData.Country} onChange={(e) => setFormData({ ...formData, Country: e.target.value })} placeholder=\"e.g. UK\" />\r\n\r\n                    <SoftInput label=\"World Area\" value={formData.Area} onChange={(e) => setFormData({ ...formData, Area: e.target.value })} placeholder=\"e.g. Europe\" />\r\n                    <SoftInput label=\"FP Level\" value={formData.FP_Level} onChange={(e) => setFormData({ ...formData, FP_Level: e.target.value })} placeholder=\"1, 2, 3, 4\" icon={<Hash className=\"w-4 h-4\" />} />\r\n                </div>\r\n\r\n                <SoftInput label=\"Contact Details\" value={formData.Contact_Details} onChange={(e) => setFormData({ ...formData, Contact_Details: e.target.value })} placeholder=\"Phone or Email\" icon={<Phone className=\"w-4 h-4\" />} />\r\n                <SoftInput label=\"LinkedIn\" value={formData.Company_Linkedin} onChange={(e) => setFormData({ ...formData, Company_Linkedin: e.target.value })} placeholder=\"LinkedIn URL\" icon={<Linkedin className=\"w-4 h-4\" />} />\r\n                <SoftInput label=\"Events\" value={formData.Events} onChange={(e) => setFormData({ ...formData, Events: e.target.value })} placeholder=\"Associated Events\" />\r\n\r\n                <div className=\"flex justify-end gap-3 pt-4 border-t border-white/5\">\r\n                    <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\r\n                    <Button onClick={handleSubmit} isLoading={loading} leftIcon={<Save className=\"w-4 h-4\" />}>\r\n                        Save Exhibitor\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ExhibitorTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used.","line":3,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SoftInput' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[578,581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[578,581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[801,804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[801,804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [debouncedSearch, fetchData]","fix":{"range":[1578,1595],"text":"[debouncedSearch, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2053,2056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2053,2056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2151,2154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2151,2154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2371,2374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2371,2374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3739,3742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3739,3742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'criteriaParts' is never reassigned. Use 'const' instead.","line":128,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":128,"endColumn":30,"fix":{"range":[4750,4773],"text":"const criteriaParts = [];"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6307,6310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6307,6310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'debouncedSearch' and 'fetchData'. Either include them or remove the dependency array.","line":177,"column":8,"nodeType":"ArrayExpression","endLine":177,"endColumn":47,"suggestions":[{"desc":"Update the dependencies array to be: [selectedCountries, selectedContinents, fetchData, debouncedSearch]","fix":{"range":[6639,6678],"text":"[selectedCountries, selectedContinents, fetchData, debouncedSearch]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadingDetails' is assigned a value but never used.","line":190,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":190,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7138,7141],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7138,7141],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7565,7568],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7565,7568],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'i' is defined but never used.","line":332,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":332,"endColumn":50}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { zohoApi } from '@/lib/zoho';\r\nimport { RefreshCw, Trash2, Edit2, Plus, Search, ChevronDown, Filter } from 'lucide-react';\r\nimport { ExhibitorFormModal } from './ExhibitorFormModal';\r\nimport { ExhibitorDetailsModal } from './ExhibitorDetailsModal';\r\nimport { FilterPopover } from './FilterPopover';\r\nimport { Button } from '../ui/Button';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Skeleton } from '../ui/Skeleton';\r\n\r\nexport const ExhibitorTable = () => {\r\n    const [data, setData] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [selectedItem, setSelectedItem] = useState<any>(null);\r\n    const [search, setSearch] = useState('');\r\n    const [debouncedSearch, setDebouncedSearch] = useState('');\r\n\r\n    // Pagination\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [page, setPage] = useState(0);\r\n    const LIMIT = 200;\r\n    const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n\r\n\r\n    // Debounce search manually since hook might not exist\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedSearch(search);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n    }, [search]);\r\n\r\n\r\n\r\n    // Initial load and search change\r\n    useEffect(() => {\r\n        fetchData(true, debouncedSearch);\r\n        // Reset page on search change\r\n        if (debouncedSearch) setPage(0);\r\n    }, [debouncedSearch]);\r\n\r\n    const loadMore = () => {\r\n        if (!loading && hasMore) {\r\n            fetchData(false, debouncedSearch);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure?')) return;\r\n        try {\r\n            await zohoApi.deleteRecord('Exhibitor_List', id);\r\n            // Remove locally to avoid refetch\r\n            setData(prev => prev.filter(item => item.ID !== id));\r\n        } catch (err: any) {\r\n            alert(err.message);\r\n        }\r\n    };\r\n\r\n    const handleAddToLeads = (item: any) => {\r\n        // Placeholder for adding to leads functionality\r\n        console.log('Adding to leads:', item);\r\n        alert(`Added ${item.Company} to leads (Simulation)`);\r\n    };\r\n\r\n    const handleEdit = (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleAdd = () => {\r\n        setSelectedItem(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\r\n    const [availableCountries, setAvailableCountries] = useState<string[]>([]);\r\n    const [availableContinents, setAvailableContinents] = useState<string[]>([]);\r\n    const [selectedCountries, setSelectedCountries] = useState<string[]>([]);\r\n    const [selectedContinents, setSelectedContinents] = useState<string[]>([]);\r\n\r\n    // Fetch unique values for filters\r\n    useEffect(() => {\r\n        const fetchFilters = async () => {\r\n            try {\r\n                const countries = new Set<string>();\r\n                const continents = new Set<string>();\r\n\r\n                // Fetch up to 5 pages (1000 records) to get a good sample of countries\r\n                // In a real production app, you'd want a dedicated \"get unique values\" API endpoint\r\n                const MAX_PAGES = 5;\r\n                const BATCH_SIZE = 200;\r\n\r\n                for (let i = 0; i < MAX_PAGES; i++) {\r\n                    const res = await zohoApi.getRecords('Exhibitor_List', undefined, i * BATCH_SIZE, BATCH_SIZE);\r\n                    if (res.data && Array.isArray(res.data)) {\r\n                        res.data.forEach((item: any) => {\r\n                            if (item.Country) countries.add(item.Country);\r\n                            if (item.World_Area) continents.add(item.World_Area);\r\n                        });\r\n\r\n                        // Stop if we got less than full batch, meaning end of data\r\n                        if (res.data.length < BATCH_SIZE) break;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                setAvailableCountries(Array.from(countries).sort());\r\n                setAvailableContinents(Array.from(continents).sort());\r\n            } catch (err) {\r\n                console.error('Failed to fetch filter values', err);\r\n            }\r\n        };\r\n        fetchFilters();\r\n    }, []);\r\n\r\n    const fetchData = useCallback(async (reset = false, searchTerm = '') => {\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            const from = reset ? 0 : page * LIMIT;\r\n\r\n            // Construct criteria\r\n            let criteriaParts = [];\r\n\r\n            // Search\r\n            if (searchTerm) {\r\n                criteriaParts.push(`(Company.contains(\"${searchTerm}\"))`);\r\n            }\r\n\r\n            // Filters\r\n            if (selectedCountries.length > 0) {\r\n                const countryCriteria = selectedCountries.map(c => `Country == \"${c}\"`).join(' || ');\r\n                criteriaParts.push(`(${countryCriteria})`);\r\n            }\r\n\r\n            if (selectedContinents.length > 0) {\r\n                const continentCriteria = selectedContinents.map(c => `World_Area == \"${c}\"`).join(' || ');\r\n                criteriaParts.push(`(${continentCriteria})`);\r\n            }\r\n\r\n            const criteria = criteriaParts.length > 0 ? criteriaParts.join(' && ') : undefined;\r\n\r\n            const res = await zohoApi.getRecords('Exhibitor_List', criteria, from, LIMIT);\r\n            console.log('Exhibitor Response:', res);\r\n\r\n            if (res.code === 3000) {\r\n                if (reset) {\r\n                    setData(res.data);\r\n                    setPage(1);\r\n                } else {\r\n                    setData(prev => [...prev, ...res.data]);\r\n                    setPage(prev => prev + 1);\r\n                }\r\n                setHasMore(res.data.length === LIMIT);\r\n            } else if (res.code === 3001 || res.message?.includes('No data')) {\r\n                if (reset) setData([]);\r\n                setHasMore(false);\r\n            } else {\r\n                setError('Failed to fetch data. Check API connection.');\r\n            }\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            setError(err.message || 'An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [page, selectedCountries, selectedContinents]);\r\n\r\n    // Re-fetch when filters change\r\n    useEffect(() => {\r\n        fetchData(true, debouncedSearch);\r\n    }, [selectedCountries, selectedContinents]);\r\n\r\n    const handleApplyFilters = (countries: string[], continents: string[]) => {\r\n        setSelectedCountries(countries);\r\n        setSelectedContinents(continents);\r\n        // fetchData is triggered by useEffect\r\n    };\r\n\r\n    const handleClearFilters = () => {\r\n        setSelectedCountries([]);\r\n        setSelectedContinents([]);\r\n    };\r\n\r\n    const [loadingDetails, setLoadingDetails] = useState(false);\r\n\r\n    const handleRowClick = async (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsDetailsOpen(true);\r\n        setLoadingDetails(true);\r\n        try {\r\n            const res = await zohoApi.getRecordById('Exhibitor_List', item.ID);\r\n            console.log('Detail Fetch Response:', res);\r\n            if (res.code === 3000) {\r\n                const fetchedData = Array.isArray(res.data) ? res.data[0] : res.data;\r\n                setSelectedItem((prev: any) => ({ ...prev, ...fetchedData }));\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch details:', err);\r\n        } finally {\r\n            setLoadingDetails(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col gap-6\">\r\n            <ExhibitorFormModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSuccess={() => fetchData(true, debouncedSearch)}\r\n                initialData={selectedItem}\r\n            />\r\n\r\n            <ExhibitorDetailsModal\r\n                isOpen={isDetailsOpen}\r\n                onClose={() => setIsDetailsOpen(false)}\r\n                data={selectedItem}\r\n                onEdit={(item) => {\r\n                    setIsDetailsOpen(false);\r\n                    handleEdit(item);\r\n                }}\r\n                onDelete={handleDelete}\r\n                onAddToLeads={handleAddToLeads}\r\n            />\r\n\r\n            {/* Controls Toolbar */}\r\n            <div className=\"relative z-30 flex flex-col lg:flex-row gap-4 p-4 bg-zinc-900/50 border border-white/5 rounded-2xl backdrop-blur-xl shadow-xl\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1 group\">\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500/10 to-purple-500/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                    <div className=\"relative flex items-center\">\r\n                        <Search className=\"absolute left-4 w-4 h-4 text-zinc-400 group-hover:text-orange-400 transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search exhibitors...\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                            className=\"w-full bg-black/20 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-sm text-white focus:outline-none focus:border-orange-500/50 focus:ring-1 focus:ring-orange-500/50 transition-all placeholder:text-zinc-600 hover:border-white/20\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions Group */}\r\n                <div className=\"flex items-center gap-3\">\r\n                    {/* Filter */}\r\n                    <div className=\"relative\">\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            onClick={() => setIsFilterOpen(!isFilterOpen)}\r\n                            className={`glass-button h-11 px-5 border-white/10 hover:border-white/20 ${selectedCountries.length > 0 || selectedContinents.length > 0 ? 'border-orange-500/50 text-orange-500 bg-orange-500/10 hover:bg-orange-500/20' : 'text-zinc-400 hover:text-white'}`}\r\n                            leftIcon={<Filter className=\"w-4 h-4\" />}\r\n                        >\r\n                            Filters {(selectedCountries.length + selectedContinents.length) > 0 && `(${selectedCountries.length + selectedContinents.length})`}\r\n                        </Button>\r\n\r\n                        <FilterPopover\r\n                            isOpen={isFilterOpen}\r\n                            onClose={() => setIsFilterOpen(false)}\r\n                            availableCountries={availableCountries}\r\n                            availableContinents={availableContinents}\r\n                            selectedCountries={selectedCountries}\r\n                            selectedContinents={selectedContinents}\r\n                            onApply={handleApplyFilters}\r\n                            onClear={handleClearFilters}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"w-px h-8 bg-white/10 mx-1 hidden md:block\" />\r\n\r\n                    {/* Refresh */}\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        onClick={() => fetchData(true, debouncedSearch)}\r\n                        isLoading={loading}\r\n                        className=\"glass-button h-11 w-11 p-0 flex items-center justify-center border-white/10 hover:border-white/20 text-zinc-400 hover:text-white\"\r\n                    >\r\n                        <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    </Button>\r\n\r\n                    {/* Add Button */}\r\n                    <Button\r\n                        onClick={handleAdd}\r\n                        leftIcon={<Plus className=\"w-4 h-4\" />}\r\n                        className=\"h-11 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white border-0 shadow-lg shadow-orange-500/20 px-6 font-medium\"\r\n                    >\r\n                        Add Exhibitor\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {\r\n                error && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl text-sm flex items-center gap-2 animate-fade-in\">\r\n                        <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\" />\r\n                        {error}\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            <div className=\"flex-1 glass-panel rounded-2xl overflow-hidden flex flex-col border border-white/5 bg-black/40\">\r\n                <div className=\"overflow-x-auto custom-scrollbar flex-1\">\r\n                    <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                        <thead className=\"bg-zinc-900/80 text-zinc-400 uppercase text-[10px] font-bold sticky top-0 z-10 backdrop-blur-md border-b border-white/5 tracking-wider\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3\">Company</th>\r\n                                <th className=\"px-6 py-3 hidden xl:table-cell\">World Area</th>\r\n                                <th className=\"px-6 py-3 hidden lg:table-cell\">City</th>\r\n                                <th className=\"px-6 py-3 hidden md:table-cell\">Country</th>\r\n                                <th className=\"px-6 py-3\">FP Level</th>\r\n                                <th className=\"px-6 py-3 text-right\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-white/5\">\r\n                            {loading && data.length === 0 ? (\r\n                                // Skeleton Loading for initial load\r\n                                Array.from({ length: 10 }).map((_, i) => (\r\n                                    <tr key={i}>\r\n                                        <td className=\"px-6 py-4\"><Skeleton className=\"h-5 w-32\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden xl:table-cell\"><Skeleton className=\"h-5 w-24\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden lg:table-cell\"><Skeleton className=\"h-5 w-20\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden md:table-cell\"><Skeleton className=\"h-5 w-20\" /></td>\r\n                                        <td className=\"px-6 py-4\"><Skeleton className=\"h-6 w-16 rounded-full\" /></td>\r\n                                        <td className=\"px-6 py-4 text-right\"><Skeleton className=\"h-8 w-24 ml-auto\" /></td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                data.map((item, i) => (\r\n                                    <tr\r\n                                        key={item.ID}\r\n                                        onClick={() => handleRowClick(item)}\r\n                                        className=\"hover:bg-white/[0.02] transition-colors group cursor-pointer border-b border-white/[0.02] last:border-0\"\r\n                                    >\r\n                                        <td className=\"px-6 py-3 font-medium text-zinc-200 text-sm\">{item.Company}</td>\r\n                                        <td className=\"px-6 py-3 hidden xl:table-cell text-sm text-zinc-400\">{item.World_Area}</td>\r\n                                        <td className=\"px-6 py-3 hidden lg:table-cell text-sm text-zinc-400\">{item.City}</td>\r\n                                        <td className=\"px-6 py-3 hidden md:table-cell text-sm text-zinc-400\">{item.Country}</td>\r\n                                        <td className=\"px-6 py-3\">\r\n                                            <div className={`inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-[10px] font-bold border min-w-[70px] ${item.FP_Level === '1' ? 'bg-red-500/10 text-red-400 border-red-500/20 shadow-[0_0_10px_rgba(239,68,68,0.1)]' :\r\n                                                item.FP_Level === '2' ? 'bg-orange-500/10 text-orange-400 border-orange-500/20 shadow-[0_0_10px_rgba(249,115,22,0.1)]' :\r\n                                                    item.FP_Level === '3' ? 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20 shadow-[0_0_10px_rgba(234,179,8,0.1)]' :\r\n                                                        'bg-zinc-500/10 text-zinc-400 border-zinc-500/20'\r\n                                                }`}>\r\n                                                Level {item.FP_Level}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-3 text-right flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\" onClick={(e) => e.stopPropagation()}>\r\n                                            <button onClick={() => handleAddToLeads(item)} className=\"p-1.5 hover:bg-green-500/20 rounded-lg text-zinc-400 hover:text-green-500 transition-colors\" title=\"Add to Leads\"><Plus className=\"w-3.5 h-3.5\" /></button>\r\n                                            <button onClick={() => handleEdit(item)} className=\"p-1.5 hover:bg-white/10 rounded-lg text-zinc-400 hover:text-white transition-colors\"><Edit2 className=\"w-3.5 h-3.5\" /></button>\r\n                                            <button onClick={() => handleDelete(item.ID)} className=\"p-1.5 hover:bg-red-500/20 rounded-lg text-zinc-400 hover:text-red-500 transition-colors\"><Trash2 className=\"w-3.5 h-3.5\" /></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    {loading && data.length > 0 && (\r\n                        <div className=\"p-4 space-y-2\">\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    {hasMore && !loading && data.length > 0 && (\r\n                        <div className=\"p-4 flex justify-center border-t border-white/5\">\r\n                            <Button variant=\"secondary\" onClick={loadMore} className=\"glass-button w-full md:w-auto\">\r\n                                Load More Records\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {!loading && data.length === 0 && (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-zinc-500 gap-4 min-h-[300px]\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center\">\r\n                            <Search className=\"w-8 h-8 opacity-40\" />\r\n                        </div>\r\n                        <p className=\"text-lg font-medium\">No records found</p>\r\n                        <p className=\"text-sm opacity-60\">Try adjusting your search terms</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\FilterPopover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ShowDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":4,"column":132,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":133},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[424,427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[424,427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1236,1239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1236,1239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":87,"column":33,"nodeType":"JSXOpeningElement","endLine":87,"endColumn":141}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { Globe, MapPin, Calendar, Hash, ExternalLink, Trash2, Edit2, Link as LinkIcon, FileText, Layers, Users, Clock, User, Info, X } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface ShowDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    data: any;\r\n    onEdit: (item: any) => void;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nconst Section = ({ title, children, delay = 0 }: { title: string, children: React.ReactNode, delay?: number }) => (\r\n    <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ delay, duration: 0.4 }}\r\n        className=\"space-y-4\"\r\n    >\r\n        <h3 className=\"text-xs font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2\">\r\n            <span className=\"w-1.5 h-1.5 rounded-full bg-orange-500/50\"></span>\r\n            {title}\r\n        </h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {children}\r\n        </div>\r\n    </motion.div>\r\n);\r\n\r\nconst DetailItem = ({ label, value, icon: Icon, isLink = false, fullWidth = false }: any) => {\r\n    if (!value) return null;\r\n    return (\r\n        <div className={`group relative overflow-hidden bg-white/5 hover:bg-white/10 p-4 rounded-2xl border border-white/5 hover:border-white/10 transition-all duration-300 ${fullWidth ? 'md:col-span-2 lg:col-span-3' : ''}`}>\r\n            <div className=\"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n            <div className=\"relative z-10\">\r\n                <div className=\"flex items-center gap-2 mb-2 text-zinc-500 text-xs font-bold uppercase tracking-wider\">\r\n                    {Icon && <Icon className=\"w-3.5 h-3.5 text-zinc-600 group-hover:text-orange-500/70 transition-colors\" />}\r\n                    {label}\r\n                </div>\r\n                <div className=\"text-zinc-100 font-medium break-words text-sm leading-relaxed\">\r\n                    {isLink ? (\r\n                        <a href={value} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-orange-400 hover:text-orange-300 hover:underline flex items-center gap-1.5 transition-colors\">\r\n                            {value} <ExternalLink className=\"w-3 h-3 opacity-70\" />\r\n                        </a>\r\n                    ) : (\r\n                        value\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const ShowDetailsModal: React.FC<ShowDetailsModalProps> = ({ isOpen, onClose, data, onEdit, onDelete }) => {\r\n    if (!data) return null;\r\n\r\n    // Helper to format date\r\n    const formatDate = (dateStr: string) => {\r\n        if (!dateStr) return null;\r\n        return new Date(dateStr).toLocaleString(undefined, {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Show Details\" maxWidth=\"max-w-5xl\">\r\n            <div className=\"relative\">\r\n                {/* Hero Header */}\r\n                <div className=\"relative glass-panel border-b border-white/5 p-8 overflow-hidden rounded-t-2xl\">\r\n                    <div className=\"absolute inset-0 bg-gradient-to-br from-orange-500/10 via-transparent to-transparent opacity-50\" />\r\n                    <div className=\"absolute -top-24 -right-24 w-64 h-64 bg-orange-500/20 rounded-full blur-3xl\" />\r\n\r\n                    <div className=\"relative z-10 flex flex-col md:flex-row gap-8 items-start\">\r\n                        {data.Event_logo && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, scale: 0.9 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                className=\"w-32 h-32 bg-white rounded-2xl p-4 shrink-0 flex items-center justify-center overflow-hidden shadow-2xl shadow-black/50 border border-white/10\"\r\n                            >\r\n                                <img src={data.Event_logo} alt={data.Event || data.Name} className=\"max-w-full max-h-full object-contain\" />\r\n                            </motion.div>\r\n                        )}\r\n                        <div className=\"flex-1 space-y-4\">\r\n                            <div>\r\n                                <motion.h2\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"text-4xl md:text-5xl font-bold text-white mb-3 tracking-tight\"\r\n                                >\r\n                                    {data.Event || data.Event_Name || data.Name}\r\n                                </motion.h2>\r\n                                <div className=\"flex flex-wrap items-center gap-3\">\r\n                                    {data.Level && (\r\n                                        <span className=\"px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-blue-500/20 to-blue-600/20 text-blue-400 border border-blue-500/20 shadow-lg shadow-blue-500/5\">\r\n                                            {data.Level}\r\n                                        </span>\r\n                                    )}\r\n                                    <span className=\"text-zinc-400 text-xs font-medium flex items-center gap-1.5 bg-white/5 px-3 py-1 rounded-full border border-white/5\">\r\n                                        <Hash className=\"w-3 h-3\" /> {data.ID}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {data.Note1 && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0 }}\r\n                                    animate={{ opacity: 1 }}\r\n                                    transition={{ delay: 0.2 }}\r\n                                    className=\"p-4 bg-yellow-500/5 border border-yellow-500/10 rounded-xl text-yellow-200/80 text-sm leading-relaxed backdrop-blur-sm\"\r\n                                >\r\n                                    {data.Note1}\r\n                                </motion.div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content Scroll Area */}\r\n                <div className=\"p-8 space-y-10 max-h-[65vh] overflow-y-auto custom-scrollbar bg-black/40\">\r\n\r\n                    {/* General Info */}\r\n                    <Section title=\"General Information\" delay={0.1}>\r\n                        <DetailItem label=\"Event Type\" value={data.Event_Type} icon={Layers} />\r\n                        <DetailItem label=\"Industry\" value={data.Industry} icon={Layers} />\r\n                        <DetailItem label=\"Website\" value={data.Website} icon={Globe} isLink />\r\n                        <DetailItem label=\"Organiser\" value={data.Organiser} icon={Users} />\r\n                        <DetailItem label=\"Frequency\" value={data.Frequency} icon={Clock} />\r\n                        <DetailItem label=\"Starting Date\" value={formatDate(data.Starting_Date)} icon={Calendar} />\r\n                    </Section>\r\n\r\n                    {/* Location */}\r\n                    <Section title=\"Location\" delay={0.2}>\r\n                        <DetailItem label=\"City\" value={data.City} icon={MapPin} />\r\n                        <DetailItem label=\"Country\" value={data.Country} icon={MapPin} />\r\n                        <DetailItem label=\"World Area\" value={data.World_Area} icon={Globe} />\r\n                    </Section>\r\n\r\n                    {/* Metrics */}\r\n                    <Section title=\"Metrics\" delay={0.3}>\r\n                        <DetailItem label=\"Exhibition Size\" value={data.Exhibition_Size} icon={Layers} />\r\n                        <DetailItem label=\"Last Edition Exhibitors\" value={data.Last_edition_n_Exhibitors} icon={Users} />\r\n                    </Section>\r\n\r\n                    {/* Resources */}\r\n                    <Section title=\"Resources\" delay={0.4}>\r\n                        <DetailItem label=\"Exhibitor List (Link)\" value={data.Exhibitor_List_Link} icon={LinkIcon} isLink />\r\n                        <DetailItem label=\"Exhibitor List (File)\" value={data.Exhibitor_List_FILE} icon={FileText} />\r\n                        <DetailItem label=\"Floorplan (Link)\" value={data.Floorplan_Link} icon={LinkIcon} isLink />\r\n                        <DetailItem label=\"Floorplan (File)\" value={data.Floorplan} icon={FileText} />\r\n                    </Section>\r\n\r\n                    {/* System Info */}\r\n                    <Section title=\"System Metadata\" delay={0.5}>\r\n                        <DetailItem label=\"Added User\" value={data.Added_User} icon={User} />\r\n                        <DetailItem label=\"Added Time\" value={formatDate(data.Added_Time)} icon={Clock} />\r\n                        <DetailItem label=\"Modified User\" value={data.Modified_User} icon={User} />\r\n                        <DetailItem label=\"Modified Time\" value={formatDate(data.Modified_Time)} icon={Clock} />\r\n                        <DetailItem label=\"Added User IP\" value={data.Added_User_IP_Address} icon={Globe} />\r\n                        <DetailItem label=\"Modified User IP\" value={data.Modified_User_IP_Address} icon={Globe} />\r\n                    </Section>\r\n\r\n                    {/* Additional Data */}\r\n                    <Section title=\"Additional Data\" delay={0.6}>\r\n                        {Object.entries(data).map(([key, value]) => {\r\n                            if (['ID', 'Event', 'Event_Name', 'Name', 'Level', 'Event_logo', 'Note1', 'Event_Type', 'Industry', 'Website', 'Organiser', 'Frequency', 'Starting_Date', 'City', 'Country', 'World_Area', 'Exhibition_Size', 'Last_edition_n_Exhibitors', 'Exhibitor_List_Link', 'Exhibitor_List_FILE', 'Floorplan_Link', 'Floorplan', 'Added_User', 'Added_Time', 'Modified_User', 'Modified_Time', 'Added_User_IP_Address', 'Modified_User_IP_Address'].includes(key)) return null;\r\n                            if (typeof value === 'object' && value !== null) return null;\r\n                            return <DetailItem key={key} label={key.replace(/_/g, ' ')} value={String(value)} icon={Info} />;\r\n                        })}\r\n                    </Section>\r\n                </div>\r\n\r\n                {/* Actions Footer */}\r\n                <div className=\"p-6 border-t border-white/5 bg-zinc-900/90 backdrop-blur-xl flex gap-4 sticky bottom-0 z-20 rounded-b-2xl\">\r\n                    <Button\r\n                        onClick={() => onEdit(data)}\r\n                        variant=\"secondary\"\r\n                        className=\"flex-1 h-12 text-base font-medium glass-button\"\r\n                        leftIcon={<Edit2 className=\"w-4 h-4\" />}\r\n                    >\r\n                        Edit Record\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => {\r\n                            if (confirm('Are you sure you want to delete this record?')) {\r\n                                onDelete(data.ID);\r\n                                onClose();\r\n                            }\r\n                        }}\r\n                        className=\"flex-1 h-12 text-base font-medium bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 hover:border-red-500/30\"\r\n                        leftIcon={<Trash2 className=\"w-4 h-4\" />}\r\n                    >\r\n                        Delete\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ShowFormModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Hash' is defined but never used.","line":2,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[417,420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[417,420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Save, Calendar, Globe, MapPin, Layers, Hash } from 'lucide-react';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { zohoApi } from '@/lib/zoho';\r\n\r\ninterface ShowFormModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onSuccess: () => void;\r\n    initialData?: any;\r\n}\r\n\r\nexport const ShowFormModal: React.FC<ShowFormModalProps> = ({ isOpen, onClose, onSuccess, initialData }) => {\r\n    const [formData, setFormData] = useState({\r\n        Event_Name: '',\r\n        Event_Type: '',\r\n        Starting_Date: '',\r\n        Industry: '',\r\n        Level: '',\r\n        World_Area: '',\r\n        Country: '',\r\n        City: '',\r\n        Frequency: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setFormData(initialData);\r\n        } else {\r\n            setFormData({\r\n                Event_Name: '',\r\n                Event_Type: '',\r\n                Starting_Date: '',\r\n                Industry: '',\r\n                Level: '',\r\n                World_Area: '',\r\n                Country: '',\r\n                City: '',\r\n                Frequency: ''\r\n            });\r\n        }\r\n    }, [initialData, isOpen]);\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (initialData?.ID) {\r\n                await zohoApi.updateRecord('Event_and_Exhibitor_Admin_Only_Report', initialData.ID, formData);\r\n            } else {\r\n                await zohoApi.addRecord('Show_Details', formData);\r\n            }\r\n            onSuccess();\r\n            onClose();\r\n        } catch (error) {\r\n            alert('Failed to save record');\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={initialData ? 'Edit Show' : 'Add New Show'}\r\n        >\r\n            <div className=\"p-6 space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <SoftInput label=\"Event Name\" value={formData.Event_Name} onChange={(e) => setFormData({ ...formData, Event_Name: e.target.value })} placeholder=\"e.g. Gitex Global\" icon={<Calendar className=\"w-4 h-4\" />} />\r\n                    <SoftInput label=\"Event Type\" value={formData.Event_Type} onChange={(e) => setFormData({ ...formData, Event_Type: e.target.value })} placeholder=\"e.g. Exhibition\" icon={<Layers className=\"w-4 h-4\" />} />\r\n\r\n                    <SoftInput label=\"Starting Date\" type=\"date\" value={formData.Starting_Date} onChange={(e) => setFormData({ ...formData, Starting_Date: e.target.value })} />\r\n                    <SoftInput label=\"Industry\" value={formData.Industry} onChange={(e) => setFormData({ ...formData, Industry: e.target.value })} placeholder=\"e.g. Technology\" />\r\n\r\n                    <SoftInput label=\"Level\" value={formData.Level} onChange={(e) => setFormData({ ...formData, Level: e.target.value })} placeholder=\"e.g. Tier 1\" />\r\n                    <SoftInput label=\"World Area\" value={formData.World_Area} onChange={(e) => setFormData({ ...formData, World_Area: e.target.value })} placeholder=\"e.g. MENA\" />\r\n\r\n                    <SoftInput label=\"Country\" value={formData.Country} onChange={(e) => setFormData({ ...formData, Country: e.target.value })} placeholder=\"e.g. UAE\" icon={<Globe className=\"w-4 h-4\" />} />\r\n                    <SoftInput label=\"City\" value={formData.City} onChange={(e) => setFormData({ ...formData, City: e.target.value })} placeholder=\"e.g. Dubai\" icon={<MapPin className=\"w-4 h-4\" />} />\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    <label className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">Frequency</label>\r\n                    <div className=\"flex gap-4\">\r\n                        {['Annual', '2Y', '3Y', '4Y'].map((freq) => (\r\n                            <label key={freq} className=\"flex items-center gap-2 cursor-pointer group\">\r\n                                <div className={`w-5 h-5 rounded-full border flex items-center justify-center transition-all ${formData.Frequency === freq ? 'border-orange-500 bg-orange-500/20' : 'border-zinc-700 group-hover:border-zinc-500'}`}>\r\n                                    {formData.Frequency === freq && <div className=\"w-2.5 h-2.5 rounded-full bg-orange-500\" />}\r\n                                </div>\r\n                                <input type=\"radio\" name=\"frequency\" className=\"hidden\" checked={formData.Frequency === freq} onChange={() => setFormData({ ...formData, Frequency: freq })} />\r\n                                <span className={`text-sm font-medium ${formData.Frequency === freq ? 'text-white' : 'text-zinc-500 group-hover:text-zinc-300'}`}>{freq}</span>\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end gap-3 pt-4 border-t border-white/5\">\r\n                    <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\r\n                    <Button onClick={handleSubmit} isLoading={loading} leftIcon={<Save className=\"w-4 h-4\" />}>\r\n                        Save Show\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ShowsTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SoftInput' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[582,585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[582,585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[805,808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[805,808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2034,2037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2034,2037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'criteriaParts' is never reassigned. Use 'const' instead.","line":71,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":71,"endColumn":30,"fix":{"range":[2805,2828],"text":"const criteriaParts = [];"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4090,4093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4090,4093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":122,"column":8,"nodeType":"ArrayExpression","endLine":122,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [debouncedSearch, fetchData, selectedCountries]","fix":{"range":[4619,4655],"text":"[debouncedSearch, fetchData, selectedCountries]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'continents' is defined but never used.","line":124,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":64},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5306,5309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5306,5309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5398,5401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5398,5401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5620,5623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5620,5623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'i' is defined but never used.","line":284,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":50}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { zohoApi } from '@/lib/zoho';\r\nimport { RefreshCw, Trash2, Edit2, Plus, Search, Filter } from 'lucide-react';\r\nimport { FilterPopover } from './FilterPopover';\r\nimport { ShowFormModal } from './ShowFormModal';\r\nimport { ShowDetailsModal } from './ShowDetailsModal';\r\nimport { Button } from '../ui/Button';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Skeleton } from '../ui/Skeleton';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const ShowsTable = () => {\r\n    const [data, setData] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [selectedItem, setSelectedItem] = useState<any>(null);\r\n    const [search, setSearch] = useState('');\r\n    const [debouncedSearch, setDebouncedSearch] = useState('');\r\n\r\n    // Pagination\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [page, setPage] = useState(0);\r\n    const LIMIT = 100;\r\n\r\n    const [isDetailsOpen, setIsDetailsOpen] = useState(false);\r\n\r\n    // Filters\r\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\r\n    const [availableCountries, setAvailableCountries] = useState<string[]>([]);\r\n    const [selectedCountries, setSelectedCountries] = useState<string[]>([]);\r\n\r\n    // Fetch unique values for filters\r\n    useEffect(() => {\r\n        const fetchFilters = async () => {\r\n            try {\r\n                const countries = new Set<string>();\r\n\r\n                // Fetch up to 5 pages (1000 records) to get a good sample of countries\r\n                const MAX_PAGES = 5;\r\n                const BATCH_SIZE = 100;\r\n\r\n                for (let i = 0; i < MAX_PAGES; i++) {\r\n                    const res = await zohoApi.getRecords('Event_and_Exhibitor_Admin_Only_Report', undefined, i * BATCH_SIZE, BATCH_SIZE);\r\n                    if (res.data && Array.isArray(res.data)) {\r\n                        res.data.forEach((item: any) => {\r\n                            if (item.Country) countries.add(item.Country);\r\n                        });\r\n\r\n                        if (res.data.length < BATCH_SIZE) break;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                setAvailableCountries(Array.from(countries).sort());\r\n            } catch (err) {\r\n                console.error('Failed to fetch filter values', err);\r\n            }\r\n        };\r\n        fetchFilters();\r\n    }, []);\r\n\r\n    const fetchData = useCallback(async (reset = false, searchTerm = '') => {\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            const from = reset ? 0 : page * LIMIT;\r\n\r\n            // Construct criteria\r\n            let criteriaParts = [];\r\n\r\n            // Search\r\n            if (searchTerm) {\r\n                criteriaParts.push(`(Event.contains(\"${searchTerm}\"))`);\r\n            }\r\n\r\n            // Filters\r\n            if (selectedCountries.length > 0) {\r\n                const countryCriteria = selectedCountries.map(c => `Country == \"${c}\"`).join(' || ');\r\n                criteriaParts.push(`(${countryCriteria})`);\r\n            }\r\n\r\n            const criteria = criteriaParts.length > 0 ? criteriaParts.join(' && ') : undefined;\r\n\r\n            const res = await zohoApi.getRecords('Event_and_Exhibitor_Admin_Only_Report', criteria, from, LIMIT);\r\n\r\n            if (res.code === 3000) {\r\n                if (reset) {\r\n                    setData(res.data);\r\n                    setPage(1);\r\n                } else {\r\n                    setData(prev => [...prev, ...res.data]);\r\n                    setPage(prev => prev + 1);\r\n                }\r\n                setHasMore(res.data.length === LIMIT);\r\n            } else if (res.code === 3001 || res.message?.includes('No data')) {\r\n                if (reset) setData([]);\r\n                setHasMore(false);\r\n            } else {\r\n                setError('Failed to fetch data. Check API connection.');\r\n            }\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            setError(err.message || 'An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [page, selectedCountries]);\r\n\r\n    // Manual debounce\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedSearch(search);\r\n        }, 500);\r\n        return () => clearTimeout(timer);\r\n    }, [search]);\r\n\r\n    useEffect(() => {\r\n        fetchData(true, debouncedSearch);\r\n        if (debouncedSearch) setPage(0);\r\n    }, [debouncedSearch, selectedCountries]);\r\n\r\n    const handleApplyFilters = (countries: string[], continents: string[]) => {\r\n        setSelectedCountries(countries);\r\n    };\r\n\r\n    const handleClearFilters = () => {\r\n        setSelectedCountries([]);\r\n    };\r\n\r\n    const loadMore = () => {\r\n        if (!loading && hasMore) {\r\n            fetchData(false, debouncedSearch);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure?')) return;\r\n        try {\r\n            await zohoApi.deleteRecord('Event_and_Exhibitor_Admin_Only_Report', id);\r\n            setData(prev => prev.filter(item => item.ID !== id));\r\n        } catch (err: any) {\r\n            alert(err.message);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleAdd = () => {\r\n        setSelectedItem(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleRowClick = (item: any) => {\r\n        setSelectedItem(item);\r\n        setIsDetailsOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col gap-6\">\r\n            <ShowFormModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSuccess={() => fetchData(true, debouncedSearch)}\r\n                initialData={selectedItem}\r\n            />\r\n\r\n\r\n\r\n            <ShowDetailsModal\r\n                isOpen={isDetailsOpen}\r\n                onClose={() => setIsDetailsOpen(false)}\r\n                data={selectedItem}\r\n                onEdit={(item) => {\r\n                    setIsDetailsOpen(false);\r\n                    handleEdit(item);\r\n                }}\r\n                onDelete={handleDelete}\r\n            />\r\n\r\n            {/* Controls Toolbar */}\r\n            <div className=\"relative z-30 flex flex-col lg:flex-row gap-4 p-4 bg-zinc-900/50 border border-white/5 rounded-2xl backdrop-blur-xl shadow-xl\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1 group\">\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500/10 to-purple-500/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                    <div className=\"relative flex items-center\">\r\n                        <Search className=\"absolute left-4 w-4 h-4 text-zinc-400 group-hover:text-orange-400 transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search shows...\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                            className=\"w-full bg-black/20 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-sm text-white focus:outline-none focus:border-orange-500/50 focus:ring-1 focus:ring-orange-500/50 transition-all placeholder:text-zinc-600 hover:border-white/20\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions Group */}\r\n                <div className=\"flex items-center gap-3\">\r\n                    {/* Filter */}\r\n                    <div className=\"relative\">\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            onClick={() => setIsFilterOpen(!isFilterOpen)}\r\n                            className={`glass-button h-11 px-5 border-white/10 hover:border-white/20 ${selectedCountries.length > 0 ? 'border-orange-500/50 text-orange-500 bg-orange-500/10 hover:bg-orange-500/20' : 'text-zinc-400 hover:text-white'}`}\r\n                            leftIcon={<Filter className=\"w-4 h-4\" />}\r\n                        >\r\n                            Filters {selectedCountries.length > 0 && `(${selectedCountries.length})`}\r\n                        </Button>\r\n\r\n                        <FilterPopover\r\n                            isOpen={isFilterOpen}\r\n                            onClose={() => setIsFilterOpen(false)}\r\n                            availableCountries={availableCountries}\r\n                            availableContinents={[]}\r\n                            selectedCountries={selectedCountries}\r\n                            selectedContinents={[]}\r\n                            onApply={handleApplyFilters}\r\n                            onClear={handleClearFilters}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"w-px h-8 bg-white/10 mx-1 hidden md:block\" />\r\n\r\n                    {/* Refresh */}\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        onClick={() => fetchData(true, debouncedSearch)}\r\n                        isLoading={loading}\r\n                        className=\"glass-button h-11 w-11 p-0 flex items-center justify-center border-white/10 hover:border-white/20 text-zinc-400 hover:text-white\"\r\n                    >\r\n                        <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    </Button>\r\n\r\n                    {/* Add Button */}\r\n                    <Button\r\n                        onClick={handleAdd}\r\n                        leftIcon={<Plus className=\"w-4 h-4\" />}\r\n                        className=\"h-11 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white border-0 shadow-lg shadow-orange-500/20 px-6 font-medium\"\r\n                    >\r\n                        Add Show\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl text-sm flex items-center gap-2 animate-fade-in\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\" />\r\n                    <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\" />\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex-1 glass-panel rounded-2xl overflow-hidden flex flex-col border border-white/5 bg-black/40\">\r\n                <div className=\"overflow-x-auto custom-scrollbar flex-1\">\r\n                    <table className=\"w-full text-left text-sm text-zinc-400\">\r\n                        <thead className=\"bg-zinc-900/80 text-zinc-400 uppercase text-[10px] font-bold sticky top-0 z-10 backdrop-blur-md border-b border-white/5 tracking-wider\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3\">Name</th>\r\n                                <th className=\"px-6 py-3 hidden md:table-cell\">Event Type</th>\r\n                                <th className=\"px-6 py-3 hidden lg:table-cell\">City</th>\r\n                                <th className=\"px-6 py-3 hidden xl:table-cell\">Country</th>\r\n                                <th className=\"px-6 py-3 text-right\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-white/5\">\r\n                            {loading && data.length === 0 ? (\r\n                                Array.from({ length: 10 }).map((_, i) => (\r\n                                    <tr key={i}>\r\n                                        <td className=\"px-6 py-4\"><Skeleton className=\"h-5 w-40\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden md:table-cell\"><Skeleton className=\"h-5 w-24\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden lg:table-cell\"><Skeleton className=\"h-5 w-20\" /></td>\r\n                                        <td className=\"px-6 py-4 hidden xl:table-cell\"><Skeleton className=\"h-5 w-20\" /></td>\r\n                                        <td className=\"px-6 py-4 text-right\"><Skeleton className=\"h-8 w-24 ml-auto\" /></td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                data.map((item, i) => (\r\n                                    <tr\r\n                                        key={item.ID}\r\n                                        onClick={() => handleRowClick(item)}\r\n                                        className=\"hover:bg-white/[0.02] transition-colors group cursor-pointer border-b border-white/[0.02] last:border-0\"\r\n                                    >\r\n                                        <td className=\"px-6 py-3 font-medium text-zinc-200 text-sm\">{item.Event || item.Event_Name || item.Name}</td>\r\n                                        <td className=\"px-6 py-3 hidden md:table-cell text-sm text-zinc-400\">{item.Event_Type}</td>\r\n                                        <td className=\"px-6 py-3 hidden lg:table-cell text-sm text-zinc-400\">{item.City}</td>\r\n                                        <td className=\"px-6 py-3 hidden xl:table-cell text-sm text-zinc-400\">{item.Country}</td>\r\n                                        <td className=\"px-6 py-3 text-right flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity\" onClick={(e) => e.stopPropagation()}>\r\n                                            <button onClick={() => handleEdit(item)} className=\"p-1.5 hover:bg-white/10 rounded-lg text-zinc-400 hover:text-white transition-colors\"><Edit2 className=\"w-3.5 h-3.5\" /></button>\r\n                                            <button onClick={() => handleDelete(item.ID)} className=\"p-1.5 hover:bg-red-500/20 rounded-lg text-zinc-400 hover:text-red-500 transition-colors\"><Trash2 className=\"w-3.5 h-3.5\" /></button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    {loading && data.length > 0 && (\r\n                        <div className=\"p-4 space-y-2\">\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                        </div>\r\n                    )}\r\n\r\n                    {hasMore && !loading && data.length > 0 && (\r\n                        <div className=\"p-4 flex justify-center border-t border-white/5\">\r\n                            <Button variant=\"secondary\" onClick={loadMore} className=\"glass-button w-full md:w-auto\">\r\n                                Load More Records\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {!loading && data.length === 0 && (\r\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-zinc-500 gap-4 min-h-[300px]\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center\">\r\n                            <Search className=\"w-8 h-8 opacity-40\" />\r\n                        </div>\r\n                        <p className=\"text-lg font-medium\">No records found</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\TasksTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used.","line":3,"column":100,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":111},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":3,"column":139,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":143},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LayoutGrid' is defined but never used.","line":3,"column":203,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":213},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'List' is defined but never used.","line":3,"column":215,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":219},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDistanceToNow' is defined but never used.","line":9,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openStatusDropdownId' is assigned a value but never used.","line":22,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":32},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchTasks' and 'fetchUser'. Either include them or remove the dependency array.","line":102,"column":8,"nodeType":"ArrayExpression","endLine":102,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTasks, fetchUser]","fix":{"range":[4181,4183],"text":"[fetchTasks, fetchUser]"}}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":529,"column":53,"nodeType":"JSXOpeningElement","endLine":529,"endColumn":153}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2853,2856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2853,2856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2955,2958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2955,2958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3030,3033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3030,3033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3360,3363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3360,3363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3371,3374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3371,3374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3578,3581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3578,3581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6415,6418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6415,6418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6669,6672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6669,6672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7341,7344],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7341,7344],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8151,8154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8151,8154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8835,8838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8835,8838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":528,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":528,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26487,26490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26487,26490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":529,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":529,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26580,26583],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26580,26583],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { RefreshCw, Trash2, Edit2, Plus, Search, Filter, CheckCircle2, Circle, Clock, Globe, Lock, ChevronDown, MoreHorizontal, Calendar, User, AlertCircle, ArrowUpCircle, ArrowDownCircle, MinusCircle, LayoutGrid, List } from 'lucide-react';\r\nimport { createClient } from '@/lib/supabase';\r\nimport { Task } from '@/types/task';\r\nimport { TaskModal } from '../Tasks/TaskModal';\r\nimport { TaskDetailsModal } from '../Tasks/TaskDetailsModal';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { format, formatDistanceToNow, isPast, parseISO, isValid } from 'date-fns';\r\n\r\nexport const TasksTable = () => {\r\n    const [data, setData] = useState<Task[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [search, setSearch] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isViewModalOpen, setIsViewModalOpen] = useState(false);\r\n    const [selectedTask, setSelectedTask] = useState<Task | null>(null);\r\n    const [viewTask, setViewTask] = useState<Task | null>(null);\r\n    const [currentUserEmail, setCurrentUserEmail] = useState<string>('');\r\n    const [currentUserName, setCurrentUserName] = useState<string>('');\r\n    const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n    const [openStatusDropdownId, setOpenStatusDropdownId] = useState<string | null>(null);\r\n    const [openActionMenuId, setOpenActionMenuId] = useState<string | null>(null);\r\n    const [isFilterOpen, setIsFilterOpen] = useState(false);\r\n    const [showMyTasksOnly, setShowMyTasksOnly] = useState(false);\r\n\r\n    // Filter States\r\n    const [statusFilter, setStatusFilter] = useState<string[]>([]);\r\n    const [priorityFilter, setPriorityFilter] = useState<string[]>([]);\r\n\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const actionMenuRef = useRef<HTMLDivElement>(null);\r\n    const filterRef = useRef<HTMLDivElement>(null);\r\n    const supabase = createClient();\r\n\r\n    const fetchUser = async () => {\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        if (user) {\r\n            setCurrentUserEmail(user.email || '');\r\n            setCurrentUserId(user.id);\r\n\r\n            const { data: userData } = await supabase\r\n                .from('users')\r\n                .select('name')\r\n                .eq('uid', user.id)\r\n                .single();\r\n\r\n            if (userData) {\r\n                setCurrentUserName(userData.name || '');\r\n            }\r\n        }\r\n    };\r\n\r\n    const fetchTasks = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data: tasks, error } = await supabase\r\n                .from('tasks')\r\n                .select('*')\r\n                .order('created_at', { ascending: false }) as any;\r\n\r\n            if (error) throw error;\r\n\r\n            const userIds = [...new Set(tasks?.map((t: any) => t.uid).filter(Boolean))];\r\n            let userMap: Record<string, any> = {};\r\n\r\n            if (userIds.length > 0) {\r\n                const { data: users } = await supabase\r\n                    .from('users')\r\n                    .select('uid, name, email, profile_url')\r\n                    .in('uid', userIds);\r\n\r\n                if (users) {\r\n                    userMap = users.reduce((acc: any, user: any) => {\r\n                        acc[user.uid] = user;\r\n                        return acc;\r\n                    }, {});\r\n                }\r\n            }\r\n\r\n            const mappedTasks = tasks?.map((t: any) => {\r\n                const user = userMap[t.uid];\r\n                return {\r\n                    ...t,\r\n                    created_by: user?.name || user?.email || 'Unknown',\r\n                    profile_url: user?.profile_url,\r\n                    status: t.status || 'Pending'\r\n                };\r\n            }) || [];\r\n\r\n            setData(mappedTasks);\r\n        } catch (error) {\r\n            console.error('Error fetching tasks:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchUser();\r\n        fetchTasks();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setOpenStatusDropdownId(null);\r\n            }\r\n            if (actionMenuRef.current && !actionMenuRef.current.contains(event.target as Node)) {\r\n                setOpenActionMenuId(null);\r\n            }\r\n            if (filterRef.current && !filterRef.current.contains(event.target as Node)) {\r\n                setIsFilterOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const logActivity = async (label: string, actionDescription: string) => {\r\n        if (!currentUserId) return;\r\n        const name = currentUserName || currentUserEmail || 'User';\r\n        const statusMessage = `${name} ${actionDescription}`;\r\n        try {\r\n            await supabase\r\n                .from('activities')\r\n                .insert([{\r\n                    label,\r\n                    status: statusMessage,\r\n                    uid: currentUserId,\r\n                    created_at: new Date().toISOString()\r\n                }]);\r\n        } catch (error) {\r\n            console.error('Error logging activity:', error);\r\n        }\r\n    };\r\n\r\n    const handleSaveTask = async (taskData: Partial<Task>) => {\r\n        try {\r\n            if (!currentUserId) {\r\n                alert('User not found. Please log in again.');\r\n                return;\r\n            }\r\n\r\n            const payload = {\r\n                title: taskData.title,\r\n                description: taskData.description,\r\n                due_date: taskData.due_date,\r\n                priority: taskData.priority,\r\n                status: taskData.status,\r\n                visibility: taskData.visibility,\r\n                related_to: taskData.related_to,\r\n                uid: currentUserId\r\n            };\r\n\r\n            if (selectedTask) {\r\n                const { error } = await supabase\r\n                    .from('tasks')\r\n                    .update(payload)\r\n                    .eq('id', selectedTask.id) as any;\r\n                if (error) throw error;\r\n                logActivity('Edited', 'edited a task');\r\n            } else {\r\n                const { error } = await supabase\r\n                    .from('tasks')\r\n                    .insert([payload]) as any;\r\n                if (error) throw error;\r\n                logActivity('Added', 'added a new task');\r\n            }\r\n            fetchTasks();\r\n        } catch (error) {\r\n            console.error('Error saving task:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleStatusUpdate = async (id: string, newStatus: Task['status']) => {\r\n        try {\r\n            setOpenStatusDropdownId(null);\r\n            setData(prev => prev.map(t => t.id === id ? { ...t, status: newStatus } : t));\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .update({ status: newStatus })\r\n                .eq('id', id) as any;\r\n\r\n            if (error) {\r\n                throw error;\r\n                fetchTasks();\r\n            } else {\r\n                logActivity(`Marked as ${newStatus}`, `marked a task as ${newStatus}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating status:', error);\r\n        }\r\n    };\r\n\r\n    const handleVisibilityToggle = async (task: Task) => {\r\n        try {\r\n            setOpenActionMenuId(null);\r\n            const newVisibility = task.visibility === 'Public' ? 'Private' : 'Public';\r\n            setData(prev => prev.map(t => t.id === task.id ? { ...t, visibility: newVisibility } : t));\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .update({ visibility: newVisibility })\r\n                .eq('id', task.id) as any;\r\n\r\n            if (error) {\r\n                throw error;\r\n                fetchTasks();\r\n            } else {\r\n                logActivity(`Visibility changed to ${newVisibility}`, `changed task visibility to ${newVisibility}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating visibility:', error);\r\n        }\r\n    };\r\n\r\n    const handleDeleteTask = async (id: string) => {\r\n        setOpenActionMenuId(null);\r\n        if (!confirm('Are you sure you want to delete this task?')) return;\r\n        try {\r\n            const { error } = await supabase\r\n                .from('tasks')\r\n                .delete()\r\n                .eq('id', id) as any;\r\n            if (error) throw error;\r\n            logActivity('Deleted', 'deleted a task');\r\n            fetchTasks();\r\n        } catch (error) {\r\n            console.error('Error deleting task:', error);\r\n        }\r\n    };\r\n\r\n    const handleEditClick = (task: Task) => {\r\n        setOpenActionMenuId(null);\r\n        setSelectedTask(task);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleAddClick = () => {\r\n        setSelectedTask(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleViewTask = (task: Task) => {\r\n        setViewTask(task);\r\n        setIsViewModalOpen(true);\r\n    };\r\n\r\n    const getPriorityIcon = (priority: string) => {\r\n        switch (priority.toLowerCase()) {\r\n            case 'high': return <ArrowUpCircle className=\"w-3.5 h-3.5 text-red-500\" />;\r\n            case 'medium': return <AlertCircle className=\"w-3.5 h-3.5 text-amber-500\" />;\r\n            case 'low': return <ArrowDownCircle className=\"w-3.5 h-3.5 text-blue-500\" />;\r\n            default: return <MinusCircle className=\"w-3.5 h-3.5 text-zinc-500\" />;\r\n        }\r\n    };\r\n\r\n    const getPriorityStyles = (priority: string) => {\r\n        switch (priority.toLowerCase()) {\r\n            case 'high': return 'bg-red-500/10 text-red-400 border-red-500/20';\r\n            case 'medium': return 'bg-amber-500/10 text-amber-400 border-amber-500/20';\r\n            case 'low': return 'bg-blue-500/10 text-blue-400 border-blue-500/20';\r\n            default: return 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20';\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        switch (status.toLowerCase()) {\r\n            case 'completed': return <CheckCircle2 className=\"w-5 h-5 text-emerald-500\" />;\r\n            case 'in progress': return <Clock className=\"w-5 h-5 text-amber-500\" />;\r\n            default: return <Circle className=\"w-5 h-5 text-zinc-500\" />;\r\n        }\r\n    };\r\n\r\n    const formatDueDate = (dateString?: string) => {\r\n        if (!dateString) return <span className=\"text-zinc-600 text-xs\">ΓÇö</span>;\r\n        const date = parseISO(dateString);\r\n        if (!isValid(date)) return <span className=\"text-zinc-500 text-xs\">{dateString}</span>;\r\n\r\n        const isOverdue = isPast(date) && !isPast(new Date(date.getTime() + 86400000));\r\n\r\n        return (\r\n            <div className={`flex items-center gap-1.5 text-xs ${isOverdue ? 'text-red-400' : 'text-zinc-400'}`}>\r\n                <Calendar className=\"w-3.5 h-3.5\" />\r\n                <span>{format(date, 'MMM d')}</span>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const toggleFilter = (type: 'status' | 'priority', value: string) => {\r\n        if (type === 'status') {\r\n            setStatusFilter(prev => prev.includes(value) ? prev.filter(item => item !== value) : [...prev, value]);\r\n        } else {\r\n            setPriorityFilter(prev => prev.includes(value) ? prev.filter(item => item !== value) : [...prev, value]);\r\n        }\r\n    };\r\n\r\n    const clearFilters = () => {\r\n        setStatusFilter([]);\r\n        setPriorityFilter([]);\r\n        setShowMyTasksOnly(false);\r\n    };\r\n\r\n    const filteredData = data.filter(item => {\r\n        const matchesSearch = item.title.toLowerCase().includes(search.toLowerCase()) ||\r\n            (item.description && item.description.toLowerCase().includes(search.toLowerCase()));\r\n\r\n        const isVisible = item.visibility === 'Public' || item.uid === currentUserId;\r\n\r\n        const matchesStatus = statusFilter.length === 0 || statusFilter.includes(item.status);\r\n        const matchesPriority = priorityFilter.length === 0 || priorityFilter.includes(item.priority);\r\n        const matchesMyTasks = !showMyTasksOnly || item.uid === currentUserId;\r\n\r\n        return matchesSearch && isVisible && matchesStatus && matchesPriority && matchesMyTasks;\r\n    });\r\n\r\n    const activeFiltersCount = statusFilter.length + priorityFilter.length + (showMyTasksOnly ? 1 : 0);\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col\">\r\n            <TaskModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSave={handleSaveTask}\r\n                initialData={selectedTask}\r\n            />\r\n\r\n            <TaskDetailsModal\r\n                isOpen={isViewModalOpen}\r\n                onClose={() => setIsViewModalOpen(false)}\r\n                task={viewTask}\r\n            />\r\n\r\n            {/* Professional Toolbar */}\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6\">\r\n                {/* Search */}\r\n                <div className=\"relative flex-1 w-full sm:w-auto\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search tasks...\"\r\n                        value={search}\r\n                        onChange={(e) => setSearch(e.target.value)}\r\n                        className=\"w-full bg-zinc-900 border border-zinc-800 rounded-md pl-10 pr-4 py-2.5 text-sm text-white focus:outline-none focus:border-zinc-700 transition-colors placeholder:text-zinc-600\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2 w-full sm:w-auto\">\r\n                    {/* Filter Dropdown */}\r\n                    <div className=\"relative\" ref={filterRef}>\r\n                        <button\r\n                            onClick={() => setIsFilterOpen(!isFilterOpen)}\r\n                            className={`flex items-center gap-2 px-3 py-2.5 rounded-md text-sm font-medium transition-all border ${activeFiltersCount > 0\r\n                                ? 'bg-zinc-800 border-zinc-700 text-white'\r\n                                : 'bg-zinc-900 border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-700'\r\n                                }`}\r\n                        >\r\n                            <Filter className=\"w-4 h-4\" />\r\n                            <span className=\"hidden sm:inline\">Filters</span>\r\n                            {activeFiltersCount > 0 && (\r\n                                <span className=\"ml-1 text-[10px] font-bold bg-white text-black px-1.5 py-0.5 rounded-full\">\r\n                                    {activeFiltersCount}\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n\r\n                        <AnimatePresence>\r\n                            {isFilterOpen && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, y: 4, scale: 0.98 }}\r\n                                    animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                    exit={{ opacity: 0, y: 4, scale: 0.98 }}\r\n                                    transition={{ duration: 0.1 }}\r\n                                    className=\"absolute right-0 top-full mt-2 w-64 bg-[#09090b] border border-zinc-800 rounded-md shadow-xl z-50 p-4\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between mb-4 pb-3 border-b border-zinc-800\">\r\n                                        <span className=\"text-xs font-bold text-white uppercase tracking-wider\">Filters</span>\r\n                                        {activeFiltersCount > 0 && (\r\n                                            <button onClick={clearFilters} className=\"text-[10px] text-zinc-500 hover:text-white transition-colors\">\r\n                                                Clear all\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-4\">\r\n                                        <button\r\n                                            onClick={() => setShowMyTasksOnly(!showMyTasksOnly)}\r\n                                            className={`w-full flex items-center justify-between px-3 py-2 rounded-md text-xs font-medium transition-all ${showMyTasksOnly ? 'bg-zinc-800 text-white' : 'bg-zinc-900 text-zinc-400 hover:bg-zinc-800'\r\n                                                }`}\r\n                                        >\r\n                                            <span>My Tasks Only</span>\r\n                                            {showMyTasksOnly && <CheckCircle2 className=\"w-3.5 h-3.5\" />}\r\n                                        </button>\r\n\r\n                                        <div>\r\n                                            <label className=\"text-[10px] font-medium text-zinc-500 uppercase tracking-wider mb-2 block\">Status</label>\r\n                                            <div className=\"flex flex-wrap gap-2\">\r\n                                                {['Pending', 'In Progress', 'Completed'].map(status => (\r\n                                                    <button\r\n                                                        key={status}\r\n                                                        onClick={() => toggleFilter('status', status)}\r\n                                                        className={`text-[10px] px-2.5 py-1.5 rounded-md border transition-all ${statusFilter.includes(status)\r\n                                                            ? 'bg-zinc-800 border-zinc-700 text-white'\r\n                                                            : 'bg-transparent border-zinc-800 text-zinc-500 hover:text-zinc-300 hover:border-zinc-700'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {status}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label className=\"text-[10px] font-medium text-zinc-500 uppercase tracking-wider mb-2 block\">Priority</label>\r\n                                            <div className=\"flex flex-wrap gap-2\">\r\n                                                {['High', 'Medium', 'Low'].map(priority => (\r\n                                                    <button\r\n                                                        key={priority}\r\n                                                        onClick={() => toggleFilter('priority', priority)}\r\n                                                        className={`text-[10px] px-2.5 py-1.5 rounded-md border transition-all ${priorityFilter.includes(priority)\r\n                                                            ? 'bg-zinc-800 border-zinc-700 text-white'\r\n                                                            : 'bg-transparent border-zinc-800 text-zinc-500 hover:text-zinc-300 hover:border-zinc-700'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {priority}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Refresh */}\r\n                    <button\r\n                        onClick={fetchTasks}\r\n                        disabled={loading}\r\n                        className=\"p-2.5 rounded-md bg-zinc-900 border border-zinc-800 text-zinc-400 hover:text-white hover:border-zinc-700 transition-all disabled:opacity-50\"\r\n                    >\r\n                        <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n                    </button>\r\n\r\n                    {/* Add Task */}\r\n                    <button\r\n                        onClick={handleAddClick}\r\n                        className=\"flex items-center gap-2 px-4 py-2.5 rounded-md bg-white text-black text-sm font-semibold hover:bg-zinc-200 transition-all shadow-sm active:scale-95\"\r\n                    >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                        <span className=\"hidden sm:inline\">New Task</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Detailed Task List */}\r\n            <div className=\"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-4 pb-10\">\r\n                {loading ? (\r\n                    [...Array(5)].map((_, i) => (\r\n                        <div key={i} className=\"h-32 rounded-md bg-zinc-900 border border-zinc-800 animate-pulse\" />\r\n                    ))\r\n                ) : filteredData.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center justify-center py-20 text-zinc-500\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-zinc-900 border border-zinc-800 flex items-center justify-center mb-4\">\r\n                            <CheckCircle2 className=\"w-8 h-8 text-zinc-700\" />\r\n                        </div>\r\n                        <p className=\"text-sm font-medium text-zinc-400\">No tasks found</p>\r\n                        <p className=\"text-xs text-zinc-600 mt-1\">Create a new task to get started</p>\r\n                    </div>\r\n                ) : (\r\n                    <AnimatePresence mode='popLayout'>\r\n                        {filteredData.map((item, index) => (\r\n                            <motion.div\r\n                                key={item.id}\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, scale: 0.98 }}\r\n                                transition={{ delay: index * 0.03 }}\r\n                                onClick={() => handleViewTask(item)}\r\n                                className=\"group relative flex gap-6 p-6 rounded-md bg-zinc-900 border border-zinc-800 hover:border-zinc-700 transition-all duration-200 cursor-pointer shadow-sm\"\r\n                            >\r\n                                {/* Status Indicator */}\r\n                                <div className=\"flex-shrink-0 pt-1\">\r\n                                    <button\r\n                                        onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            const nextStatus = item.status === 'Completed' ? 'Pending' : 'Completed';\r\n                                            handleStatusUpdate(item.id, nextStatus);\r\n                                        }}\r\n                                        className=\"text-zinc-500 hover:text-white transition-colors\"\r\n                                    >\r\n                                        {getStatusIcon(item.status)}\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Main Content */}\r\n                                <div className=\"flex-1 min-w-0 flex flex-col gap-3\">\r\n                                    {/* Header: Title & Priority */}\r\n                                    <div className=\"flex items-start justify-between gap-4\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {item.visibility === 'Private' && (\r\n                                                <Lock className=\"w-3.5 h-3.5 text-zinc-500\" />\r\n                                            )}\r\n                                            <h3 className={`text-base font-semibold transition-colors ${item.status === 'Completed' ? 'text-zinc-500 line-through' : 'text-zinc-100 group-hover:text-white'}`}>\r\n                                                {item.title}\r\n                                            </h3>\r\n                                        </div>\r\n\r\n                                        <div className={`flex-shrink-0 px-2.5 py-1 rounded-md border text-[10px] font-bold uppercase tracking-wider flex items-center gap-1.5 ${getPriorityStyles(item.priority)}`}>\r\n                                            {getPriorityIcon(item.priority)}\r\n                                            {item.priority}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Description */}\r\n                                    {item.description && (\r\n                                        <p className=\"text-sm text-zinc-500 line-clamp-2 leading-relaxed group-hover:text-zinc-400 transition-colors\">\r\n                                            {item.description}\r\n                                        </p>\r\n                                    )}\r\n\r\n                                    {/* Metadata Row */}\r\n                                    <div className=\"flex items-center gap-6 pt-1 mt-auto\">\r\n                                        {/* Assignee */}\r\n                                        <div className=\"flex items-center gap-2 text-xs text-zinc-500\">\r\n                                            <div className=\"w-5 h-5 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center text-[10px] font-bold text-zinc-400 overflow-hidden\">\r\n                                                {(item as any).profile_url ? (\r\n                                                    <img src={(item as any).profile_url} alt={item.created_by} className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    (item.created_by || 'U').charAt(0).toUpperCase()\r\n                                                )}\r\n                                            </div>\r\n                                            <span>{item.created_by === currentUserEmail ? 'You' : (item.created_by || 'Unknown')}</span>\r\n                                        </div>\r\n\r\n                                        {/* Due Date */}\r\n                                        <div className=\"flex items-center gap-2 text-xs text-zinc-500\">\r\n                                            <Calendar className=\"w-3.5 h-3.5\" />\r\n                                            {formatDueDate(item.due_date)}\r\n                                        </div>\r\n\r\n                                        {/* Created At */}\r\n                                        <div className=\"flex items-center gap-2 text-xs text-zinc-500\">\r\n                                            <Clock className=\"w-3.5 h-3.5\" />\r\n                                            <span>{item.created_at ? format(new Date(item.created_at), 'MMM d') : '-'}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Actions (Hover) */}\r\n                                <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <div className=\"relative\">\r\n                                        <button\r\n                                            onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                setOpenActionMenuId(openActionMenuId === item.id ? null : item.id);\r\n                                            }}\r\n                                            className=\"p-2 rounded-md text-zinc-500 hover:text-white hover:bg-zinc-800 transition-colors\"\r\n                                        >\r\n                                            <MoreHorizontal className=\"w-4 h-4\" />\r\n                                        </button>\r\n\r\n                                        {openActionMenuId === item.id && (\r\n                                            <div\r\n                                                ref={actionMenuRef}\r\n                                                className=\"absolute right-0 top-full mt-2 w-40 bg-[#09090b] border border-zinc-800 rounded-md shadow-xl z-50 py-1 overflow-hidden\"\r\n                                                onClick={(e) => e.stopPropagation()}\r\n                                            >\r\n                                                {item.uid === currentUserId ? (\r\n                                                    <>\r\n                                                        <button\r\n                                                            onClick={() => handleEditClick(item)}\r\n                                                            className=\"w-full text-left px-3 py-2 text-xs text-zinc-400 hover:text-white hover:bg-zinc-800 flex items-center gap-2 transition-colors\"\r\n                                                        >\r\n                                                            <Edit2 className=\"w-3.5 h-3.5\" />\r\n                                                            Edit Task\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => handleVisibilityToggle(item)}\r\n                                                            className=\"w-full text-left px-3 py-2 text-xs text-zinc-400 hover:text-white hover:bg-zinc-800 flex items-center gap-2 transition-colors\"\r\n                                                        >\r\n                                                            {item.visibility === 'Public' ? (\r\n                                                                <><Lock className=\"w-3.5 h-3.5\" /> Make Private</>\r\n                                                            ) : (\r\n                                                                <><Globe className=\"w-3.5 h-3.5\" /> Make Public</>\r\n                                                            )}\r\n                                                        </button>\r\n                                                        <div className=\"h-px bg-zinc-800 my-1\" />\r\n                                                        <button\r\n                                                            onClick={() => handleDeleteTask(item.id)}\r\n                                                            className=\"w-full text-left px-3 py-2 text-xs text-red-400 hover:bg-red-500/10 flex items-center gap-2 transition-colors\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-3.5 h-3.5\" />\r\n                                                            Delete Task\r\n                                                        </button>\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <div className=\"px-3 py-2 text-xs text-zinc-600 text-center\">\r\n                                                        No actions available\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer Stats */}\r\n            {!loading && filteredData.length > 0 && (\r\n                <div className=\"mt-auto pt-4 border-t border-zinc-800 flex items-center justify-between text-[10px] font-medium text-zinc-500 uppercase tracking-wider\">\r\n                    <span>{filteredData.length} Total Tasks</span>\r\n                    <span>{filteredData.filter(t => t.status === 'Completed').length} Completed</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\Zoho\\ZohoSettingsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":6,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { SoftInput } from '../ui/Input';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { getZohoConfig, saveZohoConfig, ZohoConfig } from '@/lib/zoho';\r\nimport { Globe, ExternalLink, Server, Copy, Check, AlertTriangle, Key } from 'lucide-react';\r\n\r\ninterface ZohoSettingsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nconst DATA_CENTERS = [\r\n    { label: 'United States (.com)', value: 'com', authUrl: 'https://accounts.zoho.com' },\r\n    { label: 'Europe (.eu)', value: 'eu', authUrl: 'https://accounts.zoho.eu' },\r\n    { label: 'India (.in)', value: 'in', authUrl: 'https://accounts.zoho.in' },\r\n    { label: 'UAE (.ae)', value: 'ae', authUrl: 'https://accounts.zoho.ae' },\r\n    { label: 'Australia (.com.au)', value: 'com.au', authUrl: 'https://accounts.zoho.com.au' },\r\n    { label: 'China (.com.cn)', value: 'com.cn', authUrl: 'https://accounts.zoho.com.cn' },\r\n];\r\n\r\nexport const ZohoSettingsModal: React.FC<ZohoSettingsModalProps> = ({ isOpen, onClose }) => {\r\n    const [config, setConfig] = useState<ZohoConfig>({\r\n        clientId: process.env.NEXT_PUBLIC_ZOHO_CLIENT_ID || '',\r\n        clientSecret: process.env.NEXT_PUBLIC_ZOHO_CLIENT_SECRET || '',\r\n        redirectUri: process.env.NEXT_PUBLIC_ZOHO_REDIRECT_URI || 'http://localhost:3000/zoho-callback',\r\n        ownerName: process.env.NEXT_PUBLIC_ZOHO_OWNER_NAME || 'fairplatz2025',\r\n        appLinkName: process.env.NEXT_PUBLIC_ZOHO_APP_LINK_NAME || 'exhibitorsdb',\r\n        authToken: '',\r\n        dc: 'com'\r\n    });\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            const saved = getZohoConfig();\r\n            if (saved) {\r\n                setTimeout(() => {\r\n                    setConfig(prev => ({ ...prev, ...saved, dc: saved.dc || 'com' }));\r\n                }, 0);\r\n            }\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const handleAuthorize = () => {\r\n        saveZohoConfig(config);\r\n        const dc = DATA_CENTERS.find(d => d.value === config.dc) || DATA_CENTERS[0];\r\n\r\n        const scopes = [\r\n            'ZohoCreator.report.READ',\r\n            'ZohoCreator.report.CREATE',\r\n            'ZohoCreator.report.UPDATE',\r\n            'ZohoCreator.report.DELETE',\r\n            'ZohoCreator.form.CREATE',\r\n            'WorkDrive.files.ALL',\r\n            'WorkDrive.teamfolders.READ',\r\n            'WorkDrive.team.READ',\r\n            'ZohoSearch.securesearch.READ'\r\n        ].join(',');\r\n\r\n        const authUrl = `${dc.authUrl}/oauth/v2/auth?scope=${scopes}&client_id=${config.clientId}&response_type=code&access_type=offline&redirect_uri=${config.redirectUri}&prompt=consent`;\r\n        window.location.href = authUrl;\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(config.redirectUri || '');\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose} title=\"Zoho Connection Settings\" maxWidth=\"max-w-xl\">\r\n            <div className=\"p-6 space-y-6\">\r\n                {/* App Details */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <SoftInput\r\n                        label=\"Owner Name\"\r\n                        value={config.ownerName}\r\n                        onChange={(e) => setConfig({ ...config, ownerName: e.target.value })}\r\n                        placeholder=\"fairplatz2025\"\r\n                    />\r\n                    <SoftInput\r\n                        label=\"App Link Name\"\r\n                        value={config.appLinkName}\r\n                        onChange={(e) => setConfig({ ...config, appLinkName: e.target.value })}\r\n                        placeholder=\"exhibitorsdb\"\r\n                    />\r\n                </div>\r\n\r\n                {/* OAuth Config */}\r\n                <div className=\"p-5 bg-zinc-950/50 rounded-2xl border border-zinc-800 space-y-5\">\r\n                    <h4 className=\"text-sm font-bold text-zinc-400 uppercase tracking-wider flex items-center gap-2\">\r\n                        <Key className=\"w-4 h-4\" /> OAuth Configuration\r\n                    </h4>\r\n\r\n                    {/* Region Selector */}\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider ml-1\">Data Center Region</label>\r\n                        <div className=\"relative\">\r\n                            <select\r\n                                value={config.dc}\r\n                                onChange={(e) => setConfig({ ...config, dc: e.target.value })}\r\n                                className=\"w-full bg-zinc-900 border border-zinc-700 text-white px-4 py-3 rounded-xl focus:outline-none focus:border-orange-500/50 appearance-none font-medium text-sm\"\r\n                            >\r\n                                {DATA_CENTERS.map(dc => (\r\n                                    <option key={dc.value} value={dc.value}>{dc.label}</option>\r\n                                ))}\r\n                            </select>\r\n                            <Server className=\"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500 pointer-events-none\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <SoftInput\r\n                        label=\"Client ID\"\r\n                        value={config.clientId}\r\n                        onChange={(e) => setConfig({ ...config, clientId: e.target.value })}\r\n                        placeholder=\"1000.xxxxx\"\r\n                    />\r\n                    <SoftInput\r\n                        label=\"Client Secret\"\r\n                        value={config.clientSecret}\r\n                        onChange={(e) => setConfig({ ...config, clientSecret: e.target.value })}\r\n                        placeholder=\"xxxxx\"\r\n                        type=\"password\"\r\n                    />\r\n\r\n                    {/* Redirect URI with Copy */}\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider ml-1\">Redirect URI</label>\r\n                        <div className=\"flex gap-2\">\r\n                            <div className=\"flex-1\">\r\n                                <input\r\n                                    value={config.redirectUri}\r\n                                    onChange={(e) => setConfig({ ...config, redirectUri: e.target.value })}\r\n                                    className=\"w-full bg-zinc-900 border border-zinc-700 text-white px-4 py-3 rounded-xl focus:outline-none focus:border-orange-500/50 text-sm font-mono\"\r\n                                    placeholder=\"http://localhost:3000/zoho-callback\"\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                onClick={copyToClipboard}\r\n                                className=\"bg-zinc-800 hover:bg-zinc-700 text-white px-3 rounded-xl transition-colors flex items-center justify-center border border-zinc-700\"\r\n                                title=\"Copy to clipboard\"\r\n                            >\r\n                                {copied ? <Check className=\"w-4 h-4 text-green-500\" /> : <Copy className=\"w-4 h-4\" />}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Warning Box */}\r\n                    <div className=\"bg-orange-500/10 border border-orange-500/20 p-4 rounded-xl flex gap-3 items-start\">\r\n                        <AlertTriangle className=\"w-5 h-5 text-orange-500 shrink-0 mt-0.5\" />\r\n                        <div className=\"space-y-1\">\r\n                            <p className=\"text-xs font-bold text-orange-200\">Action Required</p>\r\n                            <p className=\"text-xs text-orange-200/70 leading-relaxed\">\r\n                                You MUST add <span className=\"font-mono bg-black/20 px-1 rounded text-orange-100\">{config.redirectUri}</span> to your\r\n                                <a href=\"https://api-console.zoho.com/\" target=\"_blank\" rel=\"noreferrer\" className=\"text-white underline ml-1 hover:text-blue-400\">Zoho API Console</a>\r\n                                Authorized Redirect URIs list.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-4 border-t border-white/5\">\r\n                    <Button variant=\"ghost\" onClick={onClose} className=\"flex-1\">Cancel</Button>\r\n                    <Button onClick={handleAuthorize} className=\"flex-1\" leftIcon={<Globe className=\"w-4 h-4\" />}>\r\n                        Authorize / Reconnect\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\hadhi\\Desktop\\Programming\\Fairplatz IT\\fp-marketing-tool\\components\\ui\\TableSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
